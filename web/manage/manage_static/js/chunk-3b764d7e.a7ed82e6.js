(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b764d7e"],{"28f8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-card",[s("div",{staticClass:"parent-box"},[s("div",{staticClass:"menu-box"},[s("img",{staticClass:"header",attrs:{src:a("5b76")}}),s("div",{staticClass:"width-percent-100 text-align-center headerTitle"},[e._v("公众号")]),s("div",{staticClass:"width-percent-100 text-align-center"},[s("span",{staticClass:"time"},[e._v("8:30")])]),s("div",{staticClass:"footer"},[s("img",{staticClass:"footerImg",attrs:{src:"http://demo26.crmeb.net/system/images/mobile_foot.png"}}),s("div",{staticClass:"footerMenu"},e._l(e.menuList,(function(t,a){return s("div",{key:a,staticClass:"footer-one justify-content-center"},[s("div",{staticClass:"menu-one overflowHidden",on:{click:function(s){return e.changeMenuOne(t,a)}}},[e._v(e._s(t.name))]),t.subButton&&t.subButton.length>0?s("div",{staticClass:"menu-two"},e._l(t.subButton,(function(t,n){return s("div",{key:n,staticClass:"menu-two-child overflowHidden",on:{click:function(s){return e.changeMenuTwo(a,t,n)}}},[e._v(e._s(t.name))])})),0):e._e()])})),0)]),s("a-card",{staticClass:"add-menu-class",attrs:{title:"add"===e.status?"添加菜单":"编辑菜单"}},["edit"===e.status?s("a",{attrs:{slot:"extra"},on:{click:e.changeStatus},slot:"extra"},[e._v("添加菜单")]):e._e(),s("a-form",{attrs:{form:e.formLevel,"label-col":{span:4},"wrapper-col":{span:16}}},["add"===e.status?s("a-form-item",{attrs:{label:"菜单类型"}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["level",{rules:[{required:!0,message:"请选择菜单类型"}]}],expression:"['level', { rules: [{ required: true, message: '请选择菜单类型' }] }]"}],staticClass:"width-200",attrs:{placeholder:"选择菜单类型"},on:{change:e.onChangeType}},[s("a-select-option",{attrs:{value:"1"}},[e._v("一级菜单")]),s("a-select-option",{attrs:{value:"2"}},[e._v("二级菜单")])],1)],1):e._e()],1),s("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:16}},on:{submit:e.handleSubmit}},["2"===e.menuType&&"add"===e.status?s("a-form-item",{attrs:{label:"上级菜单"}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["level1",{rules:[{required:!0,message:"请选择上级菜单"}]}],expression:"['level1', { rules: [{ required: true, message: '请选择上级菜单' }] }]"}],staticClass:"width-200",attrs:{placeholder:"选择上级菜单"},on:{change:e.onChangelevel}},e._l(e.menuList,(function(t,a){return s("a-select-option",{key:a},[e._v(e._s(t.name))])})),1)],1):e._e(),s("div",[s("a-form-item",{attrs:{label:"菜单名称"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"菜单名称不能为空！"}]}],expression:"['name', { rules: [{ required: true, message: '菜单名称不能为空！' }] }]"}],attrs:{placeholder:"请输入菜单名称"}})],1),"add"===e.status||e.editList.type?s("a-form-item",{attrs:{label:"规则状态"}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"请选择规则状态！"}]}],expression:"['type', { rules: [{ required: true, message: '请选择规则状态！' }] }]"}],staticClass:"width-200",attrs:{placeholder:"选择规则状态"},on:{change:e.onChangeStatus}},[s("a-select-option",{attrs:{value:"click"}},[e._v("点击事件")]),s("a-select-option",{attrs:{value:"view"}},[e._v("跳转网页")]),s("a-select-option",{attrs:{value:"miniprogram"}},[e._v("小程序")])],1)],1):e._e(),"click"==e.menuStatus?s("a-form-item",{attrs:{label:"关键字"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["key",{rules:[{required:!0,message:"请输入关键字！"}]}],expression:"['key', { rules: [{ required: true, message: '请输入关键字！' }] }]"}],attrs:{placeholder:"请输入关键字"}})],1):e._e(),"view"==e.menuStatus||"miniprogram"==e.menuStatus?s("a-form-item",{attrs:{label:"跳转地址"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:"请输入跳转地址！"}]}],expression:"['url', { rules: [{ required: true, message: '请输入跳转地址！' }] }]"}],attrs:{placeholder:"请输入跳转地址"}})],1):e._e(),"miniprogram"==e.menuStatus?s("a-form-item",{attrs:{label:"小程序Id"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appid",{rules:[{required:!0,message:"请输入小程序Id！"}]}],expression:"['appid', { rules: [{ required: true, message: '请输入小程序Id！' }] }]"}],attrs:{placeholder:"请输入小程序Id"}})],1):e._e(),"miniprogram"==e.menuStatus?s("a-form-item",{attrs:{label:"小程序路径"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pagepath",{rules:[{required:!0,message:"请输入小程序路径！"}]}],expression:"['pagepath', { rules: [{ required: true, message: '请输入小程序路径！' }] }]"}],attrs:{placeholder:"请输入跳转地址"}})],1):e._e(),s("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[s("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("保存")]),"edit"===e.status?s("a-button",{staticClass:"margin-left-16",attrs:{type:"danger"},on:{click:e.handleDel}},[e._v("删除")]):e._e()],1)],1)],1)],1)],1),s("a-button",{staticClass:"sync-button",attrs:{type:"primary"},on:{click:e.submiMenuData}},[e._v("提交菜单")])],1)])],1)},n=[],r=(a("a434"),a("d3b7"),a("5530")),i=a("15fd"),u=a("65af"),o=a("2ef0"),c={data:function(){return{status:"add",menuList:[],menuStatus:"",menuType:"",menuTwoIndex:null,menuIndex:null,editList:[],form:this.$form.createForm(this),formLevel:this.$form.createForm(this)}},watch:{menuType:function(e){this.form=this.$form.createForm(this)}},created:function(){this.getWxMenuList()},methods:{getWxMenuList:function(){var e=this;Object(u["b"])().then((function(t){e.menuList=Object(o["cloneDeep"])(t.data.menuData)}))},onChangeStatus:function(e){this.menuStatus=e},changeStatus:function(){this.status="add",this.menuType="",this.menuIndex="",this.menuStatus=null,this.form=this.$form.createForm(this),this.formLevel=this.$form.createForm(this)},onChangelevel:function(e){this.menuIndex=e},onChangeType:function(e){this.menuType=e},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.menuList,s=this.$message.error,n=this.form.validateFields,u=this.menuType,o=this.menuIndex,c=this.status,l=this.menuTwoIndex;n((function(e,n){if(!e)if("add"===c){if("1"===u&&a.length>=3)return s("一级菜单最多3个"),void(t.form=t.$form.createForm(t));if("1"===u&&a.length<3){var m=Object(r["a"])(Object(r["a"])({},n),{},{subButton:[]}),d=(m.level,Object(i["a"])(m,["level"]));a.push(d)}if("2"===u){var h=Object(r["a"])(Object(r["a"])({},n),{},{subButton:[]}),p=(h.level,h.level1,Object(i["a"])(h,["level","level1"]));a[o].subButton.push(p)}t.changeStatus()}else 1===u?Object.assign(a[o],n):2===u&&Object.assign(a[o].subButton[l],n)}))},changeMenuOne:function(e,t){var a=this;this.menuType=1,this.menuIndex=t,this.menuStatus=e.type,this.status="edit",this.editList=e,this.form=this.$form.createForm(this),new Promise((function(e){setTimeout(e,0)})).then((function(){var t=[];t=["name","type","key","url","appid","pagepath"],a.form.setFieldsValue(Object(o["pick"])(e,t))}))},changeMenuTwo:function(e,t,a){var s=this;this.menuTwoIndex=a,this.menuIndex=e,this.menuType=2,this.status="edit",this.editList=t,this.menuStatus=t.type,this.form=this.$form.createForm(this),new Promise((function(e){setTimeout(e,0)})).then((function(){var e=[];e=["name","type","key","url","appid","pagepath"],s.form.setFieldsValue(Object(o["pick"])(t,e))}))},handleDel:function(){1===this.menuType?this.menuList.splice(this.menuIndex,1):2===this.menuType&&this.menuList[this.menuIndex].subButton.splice(this.menuTwoIndex,1),this.changeStatus()},submiMenuData:function(){var e=this,t=this.$notification.success;Object(u["c"])({menuData:this.menuList}).then((function(a){t({message:"成功",description:"提交成功"}),e.changeStatus()}))}}},l=c,m=(a("841c0"),a("2877")),d=Object(m["a"])(l,s,n,!1,null,"2b72097c",null);t["default"]=d.exports},"5b76":function(e,t,a){e.exports=a.p+"manage_static/img/1593753139(1).4325138b.jpg"},"65af":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return u})),a.d(t,"f",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return d}));a("99af");var s=a("365c"),n=a("b775"),r=s["b"].weChat;function i(e){return Object(n["b"])({url:r.getIndexPageConfig,method:"get",params:e})}function u(e){return Object(n["b"])({url:r.wxSubscribeMsgsGetPage,method:"get",params:e})}function o(e){return Object(n["b"])({url:"".concat(r.wxSubscribeMsgsDelById).concat(e),method:"delete"})}function c(e){return Object(n["b"])({url:r.updateSystemConfigById,method:"patch",data:e})}function l(e){return Object(n["b"])({url:r.updateByIdSystemConfig,method:"patch",data:e})}function m(e){return Object(n["b"])({url:r.getWxMenu,method:"get",params:e})}function d(e){return Object(n["b"])({url:r.saveWxMenu,method:"post",data:e})}},"841c0":function(e,t,a){"use strict";a("8949")},8949:function(e,t,a){}}]);