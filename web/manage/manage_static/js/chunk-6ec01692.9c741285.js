(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ec01692"],{"2a37d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("a-card",[n("a-button",{staticClass:"margin-bottom-16",attrs:{type:"primary"},on:{click:e.handleAdd}},[n("a-icon",{attrs:{type:"plus"}}),e._v("添加商品")],1),n("a-table",{ref:"table",attrs:{rowKey:function(t){return t.id},columns:e.columns,"data-source":e.data,pagination:!1},scopedSlots:e._u([{key:"isOnSale",fn:function(t,a){return[e._v(" "+e._s(1===a.isOnSale?"上架":"已下架")+" ")]}},{key:"action",fn:function(t,a){return[n("a-popconfirm",{attrs:{title:"确定删除该商品吗？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.confirmDel(a)}}},[n("a",{staticClass:"color-red"},[e._v("删除")])])]}}])})],1),n("product-list",{attrs:{rows:e.data,keys:e.productIds},on:{submit:e.emitList},model:{value:e.product.visible,callback:function(t){e.$set(e.product,"visible",t)},expression:"product.visible"}}),n("footer-tool-bar",{staticClass:"display-flex justify-content-center",style:{width:e.isSideMenu()&&e.isDesktop()?"calc(100% - "+(e.sidebarOpened?200:80)+"px)":"100%"}},[n("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),n("a-button",{staticClass:"margin-left-10",on:{click:function(){return t.$router.go(-1)}}},[e._v("取消")])],1)],1)},r=[],o=(a("c740"),a("d81d"),a("a434"),a("2af9")),i=a("0644"),s=a.n(i),c=a("f955"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择商品",width:"1250px"},on:{ok:t.submitProduct,cancel:t.cancelHandle},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-row",{staticClass:"margin-bottom-16",attrs:{gutter:5}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-input",{attrs:{placeholder:"商品名称",allowClear:""},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否上架",allowClear:""},model:{value:t.queryParam.isOnSale,callback:function(e){t.$set(t.queryParam,"isOnSale",e)},expression:"queryParam.isOnSale"}},[a("a-select-option",{attrs:{value:1}},[t._v("上架")]),a("a-select-option",{attrs:{value:0}},[t._v("下架")])],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"商品类型",allowClear:""},model:{value:t.queryParam.saleStrategy,callback:function(e){t.$set(t.queryParam,"saleStrategy",e)},expression:"queryParam.saleStrategy"}},t._l(t.type,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.name))])})),1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.$refs.tab.refresh(!0)}}},[t._v("查询")]),a("a-button",{staticClass:"margin-left-8",on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)])],1),a("s-table",{ref:"tab",attrs:{rowKey:function(t){return t.id},columns:t.columns,data:t.loadData,rowSelection:{columnWidth:80,selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},pagination:t.pagination,scroll:{y:440}},scopedSlots:t._u([{key:"saleStrategy",fn:function(e,n){return t._l(t.type,(function(e){return n.saleStrategy===e.key?a("a-tag",{key:e.key},[t._v(t._s(e.name))]):t._e()}))}},{key:"isOnSale",fn:function(e,a){return[t._v(" "+t._s(1===a.isOnSale?"上架":"已下架")+" ")]}}])})],1)},d=[],l=(a("b0c0"),a("d3b7"),a("ddb0"),a("4c79")),m={components:{STable:o["p"]},props:{value:{type:Boolean},keys:{type:Array},rows:{type:Array}},watch:{value:function(t){this.visible=t,this.selectedRowKeys=this.keys},rows:function(t){var e=this;t.map((function(t){e.selectedRows[t.id]=t}))}},model:{prop:"value",event:"change"},data:function(){var t=this;return{queryParam:{},pagination:{pageSize:10,current:1},list:[],visible:!1,type:[{key:"PINK",name:"拼团"},{key:"SCORE",name:"积分"},{key:"NORMAL",name:"普通"},{key:"SECKILL",name:"秒杀"}],columns:[{title:"商品名称123",dataIndex:"name",scopedSlots:{customRender:"name"},width:"25%"},{title:"类型",scopedSlots:{customRender:"saleStrategy"}},{title:"原价",dataIndex:"originPrice",scopedSlots:{customRender:"originPrice"}},{title:"售价",dataIndex:"salePrice",scopedSlots:{customRender:"salePrice"},width:"10%"},{title:"会员价",dataIndex:"memberPrice",scopedSlots:{customRender:"memberPrice"},width:"10%"},{title:"库存",dataIndex:"isStock",scopedSlots:{customRender:"isStock"},width:"10%"},{title:"上下架",dataIndex:"isOnSale",scopedSlots:{customRender:"isOnSale"},width:"10%"},{title:"已售数量",dataIndex:"baseSalesNumber",scopedSlots:{customRender:"baseSalesNumber"},width:"10%"}],loadData:function(e){var a=e.pageNo,n=e.pageSize,r=t.queryParam,o=r.name,i=r.isOnSale,s=r.saleStrategy,c={page:a,limit:n,name:o,isOnSale:i,saleStrategy:s};return Object(l["k"])(c).then((function(e){var r=e.data,o=r.list,i=r.totalCount;return t.list=o,{pageNo:a,pageSize:n,data:o,totalCount:i}}))},data:[],selectedRows:[],selectedRowKeys:[1,2,3]}},created:function(){},methods:{onSelectChange:function(t,e){var a=this;e.map((function(t,e){a.selectedRows[t.id]=t})),this.selectedRowKeys=t},submitProduct:function(){var t=this.selectedRows,e=this.selectedRowKeys,a=e.map((function(e){return t[e]}));this.$emit("change",!1),this.$emit("submit",this.selectedRowKeys,a)},cancelHandle:function(){this.$emit("change",!1),this.$emit("submit",this.keys,this.rows)}}},p=m,f=a("2877"),b=Object(f["a"])(p,u,d,!1,null,null,null),h=b.exports,y=a("17eb"),g=a("5a70"),S=a("ac0d"),v={components:{Template:y["a"],STable:o["p"],ProductList:h,FooterToolBar:g["a"]},mixins:[S["b"],S["c"]],data:function(){var t=this.$route.params.gid;return{gid:t,data:[],product:{visible:!1},productIds:[],pagination:{pageSize:10,current:1},keys:[],columns:[{title:"ID",dataIndex:"id",scopedSlots:{customRender:"id"}},{title:"商品名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"是否上架",dataIndex:"isOnSale",scopedSlots:{customRender:"isOnSale"}},{title:"原价",dataIndex:"originPrice",scopedSlots:{customRender:"originPrice"}},{title:"售价",dataIndex:"salePrice",scopedSlots:{customRender:"salePrice"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}]}},created:function(){var t=this;Object(c["j"])({gid:this.gid}).then((function(e){var a=e.data;t.data=a.items,t.productIds=t.data.map((function(t){return t.id}))}))},methods:{setProduct:function(t){this.product=Object.assign(this.product,t)},emitList:function(t,e){this.productIds=t,this.data=e,this.productIds=t},handleAdd:function(){this.setProduct({visible:!0})},confirmDel:function(t){var e=s()(this.data),a=e.findIndex((function(e){return e.id===t.id}));e.splice(a,1),this.data=e},handleSubmit:function(){var t=this,e=this.$notification.success,a=this.data.map((function(t){return t.id})),n={id:this.gid,fields:a};Object(c["p"])(n).then((function(a){e({message:"成功",description:"提交成功"}),t.$router.go(-1)}))}}},O=v,k=Object(f["a"])(O,n,r,!1,null,null,null);e["default"]=k.exports},f955:function(t,e,a){"use strict";a.d(e,"n",(function(){return i})),a.d(e,"l",(function(){return s})),a.d(e,"r",(function(){return c})),a.d(e,"o",(function(){return u})),a.d(e,"d",(function(){return d})),a.d(e,"a",(function(){return l})),a.d(e,"h",(function(){return m})),a.d(e,"e",(function(){return p})),a.d(e,"m",(function(){return f})),a.d(e,"b",(function(){return b})),a.d(e,"p",(function(){return h})),a.d(e,"f",(function(){return y})),a.d(e,"i",(function(){return g})),a.d(e,"k",(function(){return S})),a.d(e,"j",(function(){return v})),a.d(e,"c",(function(){return O})),a.d(e,"g",(function(){return k})),a.d(e,"q",(function(){return w}));a("99af");var n=a("365c"),r=a("b775"),o=n["b"].maintain;function i(t){return Object(r["b"])({url:o.getTabPage,method:"get",params:t})}function s(t){return Object(r["b"])({url:o.getSystemConfigPage,method:"get",params:t})}function c(t){return Object(r["b"])({url:o.updateTabById,method:"patch",data:t})}function u(t){return Object(r["b"])({url:o.updateSystemConfigById,method:"patch",data:t})}function d(t){return Object(r["b"])({url:o.addTab,method:"post",data:t})}function l(t){return Object(r["b"])({url:o.addSystemConfig,method:"post",data:t})}function m(t){return Object(r["b"])({url:"".concat(o.delTabById).concat(t),method:"delete"})}function p(t){return Object(r["b"])({url:"".concat(o.delSystemConfigById).concat(t),method:"delete"})}function f(t){return Object(r["b"])({url:o.getSystemGroupPage,method:"get",params:t})}function b(t){return Object(r["b"])({url:o.addSystemGroup,method:"post",data:t})}function h(t){return Object(r["b"])({url:o.updateSystemGroupById,method:"patch",data:t})}function y(t){return Object(r["b"])({url:"".concat(o.delSystemGroupById).concat(t),method:"delete"})}function g(t){return Object(r["b"])({url:o.getNormalGroupDataPag,method:"get",params:t})}function S(t){return Object(r["b"])({url:o.getStrategyGroupDataPag,method:"get",params:t})}function v(t){return Object(r["b"])({url:o.getProductGroupDataPag,method:"get",params:t})}function O(t){return Object(r["b"])({url:o.addSystemGroupData,method:"post",data:t})}function k(t){return Object(r["b"])({url:"".concat(o.delSystemGroupDataById).concat(t),method:"delete"})}function w(t){return Object(r["b"])({url:o.updateSystemGroupDataById,method:"patch",data:t})}}}]);