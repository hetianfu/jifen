(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6890e0ec"],{"783b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",[a("a-card",[a("a-button",{staticClass:"margin-bottom-16",attrs:{type:"primary"},on:{click:e.handleAdd}},[a("a-icon",{attrs:{type:"plus"}}),e._v("添加秒杀")],1),a("a-table",{ref:"table",attrs:{rowKey:function(t){return t.id},columns:e.columns,"data-source":e.data,pagination:!1},scopedSlots:e._u([{key:"strategyType",fn:function(t){return e._l(e.INFO_STRATEGY_TYPE,(function(n){return n.value===t?a("a-tag",{key:n.value,attrs:{color:n.color}},[e._v(e._s(n.name))]):e._e()}))}},{key:"onShow",fn:function(t,n){return[e._v(" "+e._s(1===n.onShow?"开启":"关闭")+" ")]}},{key:"status",fn:function(t,n){return e._l(e.status,(function(t,r){return n.status===t.value?a("span",{key:r},[e._v(e._s(t.name))]):e._e()}))}},{key:"action",fn:function(t,n){return[a("a-popconfirm",{attrs:{title:"确定删除该商品吗？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.confirmDel(n)}}},[a("a",{staticClass:"color-red"},[e._v("删除")])])]}}])})],1),a("strategy-list",{attrs:{rows:e.data,keys:e.productIds},on:{submit:e.emitList},model:{value:e.product.visible,callback:function(t){e.$set(e.product,"visible",t)},expression:"product.visible"}}),a("footer-tool-bar",{staticClass:"display-flex justify-content-center",style:{width:e.isSideMenu()&&e.isDesktop()?"calc(100% - "+(e.sidebarOpened?200:80)+"px)":"100%"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),a("a-button",{staticClass:"margin-left-10",on:{click:function(){return t.$router.go(-1)}}},[e._v("取消")])],1)],1)},r=[],o=(n("c740"),n("d81d"),n("a434"),n("2af9")),s=n("0644"),c=n.n(s),i=n("f955"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{title:"选择秒杀",width:"1200px"},on:{ok:t.submitProduct,cancel:t.cancelHandle},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("a-row",{staticClass:"margin-bottom-16",attrs:{gutter:5}},[n("a-col",{attrs:{md:6,sm:24}},[n("a-input",{attrs:{placeholder:"商品名称",allowClear:""},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1),n("a-col",{attrs:{md:4,sm:24}},[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否上架",allowClear:""},model:{value:t.queryParam.isOnSale,callback:function(e){t.$set(t.queryParam,"isOnSale",e)},expression:"queryParam.isOnSale"}},[n("a-select-option",{attrs:{value:1}},[t._v("上架")]),n("a-select-option",{attrs:{value:0}},[t._v("下架")])],1)],1),n("a-col",{attrs:{md:6,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons"},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),n("a-button",{staticClass:"margin-left-8",on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)])],1),n("s-table",{ref:"tab",attrs:{rowKey:function(t){return t.id},columns:t.columns,data:t.loadData,rowSelection:{columnWidth:100,selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},pagination:t.pagination,scroll:{y:440}},scopedSlots:t._u([{key:"strategyType",fn:function(e){return t._l(t.INFO_STRATEGY_TYPE,(function(a){return a.value===e?n("a-tag",{key:a.value,attrs:{color:a.color}},[t._v(t._s(a.name))]):t._e()}))}}])})],1)},d=[],l=(n("b0c0"),n("d3b7"),n("ddb0"),n("7154")),m=n("f121"),p={components:{STable:o["p"]},props:{value:{type:Boolean},keys:{type:Array},rows:{type:Array}},watch:{value:function(t){this.visible=t,this.selectedRowKeys=this.keys},rows:function(t){var e=this;t.map((function(t){e.selectedRows[t.id]=t}))}},model:{prop:"value",event:"change"},data:function(){var t=this;return{INFO_STRATEGY_TYPE:m["i"],queryParam:{},pagination:{pageSize:10,current:1},list:[],visible:!1,columns:[{title:"ID",dataIndex:"id",scopedSlots:{customRender:"id"}},{title:"商品名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"活动类型",dataIndex:"strategyType",scopedSlots:{customRender:"strategyType"}},{title:"活动开始时间",dataIndex:"startDate",scopedSlots:{customRender:"startDate"}},{title:"活动结束时间",dataIndex:"endDate",scopedSlots:{customRender:"endDate"}},{title:"状态",dataIndex:"onShow",scopedSlots:{customRender:"onShow"}}],loadData:function(e){var n=e.pageNo,a=e.pageSize,r=t.queryParam,o=r.name,s=r.isOnSale,c={page:n,limit:a,name:o,isOnSale:s};return Object(l["c"])(c).then((function(e){var r=e.data.list;return t.list=r,{pageNo:n,pageSize:a,data:r,totalCount:0}}))},selectedRows:[],selectedRowKeys:[]}},created:function(){},methods:{onSelectChange:function(t,e){var n=this;e.map((function(t,e){n.selectedRows[t.id]=t})),this.selectedRowKeys=t},submitProduct:function(){var t=this.selectedRows,e=this.selectedRowKeys,n=e.map((function(e){return t[e]}));this.$emit("change",!1),this.$emit("submit",this.selectedRowKeys,n)},cancelHandle:function(){this.$emit("change",!1),this.$emit("submit",this.keys,this.rows)}}},f=p,b=n("2877"),h=Object(b["a"])(f,u,d,!1,null,null,null),y=h.exports,g=n("17eb"),v=n("5a70"),S=n("ac0d"),_={components:{Template:g["a"],STable:o["p"],FooterToolBar:v["a"],strategyList:y},mixins:[S["b"],S["c"]],data:function(){var t=this.$route.params.gid;return{INFO_STRATEGY_TYPE:m["i"],gid:t,data:[],product:{visible:!1},productIds:[],pagination:{pageSize:10,current:1},keys:[],columns:[{title:"ID",dataIndex:"id"},{title:"秒杀名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"活动价格",dataIndex:"salePrice"},{title:"活动类型",dataIndex:"strategyType",scopedSlots:{customRender:"strategyType"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",scopedSlots:{customRender:"action"}}],status:[{value:0,name:"未开始"},{value:1,name:"活动中"},{value:-1,name:"已结束"}]}},created:function(){var t=this;Object(i["k"])({gid:this.gid}).then((function(e){var n=e.data;t.data=n.items,t.productIds=t.data.map((function(t){return t.id}))}))},methods:{setProduct:function(t){this.product=Object.assign(this.product,t)},emitList:function(t,e){this.productIds=t,this.data=e},handleAdd:function(){this.setProduct({visible:!0})},confirmDel:function(t){var e=c()(this.data),n=e.findIndex((function(e){return e.id===t.id}));e.splice(n,1),this.data=e},handleSubmit:function(){var t=this.$notification.success,e=this.data.map((function(t){return t.id})),n={id:this.gid,fields:e};Object(i["p"])(n).then((function(e){t({message:"成功",description:"提交成功"})}))}}},w=_,O=Object(b["a"])(w,a,r,!1,null,null,null);e["default"]=O.exports},f955:function(t,e,n){"use strict";n.d(e,"n",(function(){return s})),n.d(e,"l",(function(){return c})),n.d(e,"r",(function(){return i})),n.d(e,"o",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return l})),n.d(e,"h",(function(){return m})),n.d(e,"e",(function(){return p})),n.d(e,"m",(function(){return f})),n.d(e,"b",(function(){return b})),n.d(e,"p",(function(){return h})),n.d(e,"f",(function(){return y})),n.d(e,"i",(function(){return g})),n.d(e,"k",(function(){return v})),n.d(e,"j",(function(){return S})),n.d(e,"c",(function(){return _})),n.d(e,"g",(function(){return w})),n.d(e,"q",(function(){return O}));n("99af");var a=n("365c"),r=n("b775"),o=a["b"].maintain;function s(t){return Object(r["b"])({url:o.getTabPage,method:"get",params:t})}function c(t){return Object(r["b"])({url:o.getSystemConfigPage,method:"get",params:t})}function i(t){return Object(r["b"])({url:o.updateTabById,method:"patch",data:t})}function u(t){return Object(r["b"])({url:o.updateSystemConfigById,method:"patch",data:t})}function d(t){return Object(r["b"])({url:o.addTab,method:"post",data:t})}function l(t){return Object(r["b"])({url:o.addSystemConfig,method:"post",data:t})}function m(t){return Object(r["b"])({url:"".concat(o.delTabById).concat(t),method:"delete"})}function p(t){return Object(r["b"])({url:"".concat(o.delSystemConfigById).concat(t),method:"delete"})}function f(t){return Object(r["b"])({url:o.getSystemGroupPage,method:"get",params:t})}function b(t){return Object(r["b"])({url:o.addSystemGroup,method:"post",data:t})}function h(t){return Object(r["b"])({url:o.updateSystemGroupById,method:"patch",data:t})}function y(t){return Object(r["b"])({url:"".concat(o.delSystemGroupById).concat(t),method:"delete"})}function g(t){return Object(r["b"])({url:o.getNormalGroupDataPag,method:"get",params:t})}function v(t){return Object(r["b"])({url:o.getStrategyGroupDataPag,method:"get",params:t})}function S(t){return Object(r["b"])({url:o.getProductGroupDataPag,method:"get",params:t})}function _(t){return Object(r["b"])({url:o.addSystemGroupData,method:"post",data:t})}function w(t){return Object(r["b"])({url:"".concat(o.delSystemGroupDataById).concat(t),method:"delete"})}function O(t){return Object(r["b"])({url:o.updateSystemGroupDataById,method:"patch",data:t})}}}]);