(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-559498d6"],{"2a79":function(e,t,a){"use strict";a("5e4c")},"593d":function(e,t,a){},"5e24a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-view",{attrs:{title:"商品评论列表"}},[a("div",[a("a-card",[a("a-row",{staticClass:"margin-bottom-16",attrs:{gutter:16}},[a("a-col",{attrs:{span:4}},[a("a-input",{attrs:{placeholder:"订单号",allowClear:""},model:{value:e.queryParam.orderId,callback:function(t){e.$set(e.queryParam,"orderId",t)},expression:"queryParam.orderId"}})],1),a("a-col",{attrs:{span:4}},[a("a-select",{staticClass:"width-percent-100",attrs:{placeholder:"是否推荐",allowClear:""},model:{value:e.queryParam.isRecommend,callback:function(t){e.$set(e.queryParam,"isRecommend",t)},expression:"queryParam.isRecommend"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("已推荐")]),a("a-select-option",{attrs:{value:"0"}},[e._v("未推荐")])],1)],1),a("a-col",{attrs:{span:3}},[a("a-select",{staticClass:"width-percent-100",attrs:{placeholder:"是否删除",allowClear:""},model:{value:e.queryParam.isDel,callback:function(t){e.$set(e.queryParam,"isDel",t)},expression:"queryParam.isDel"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("已删除")]),a("a-select-option",{attrs:{value:"0"}},[e._v("正常")])],1)],1),a("a-col",{attrs:{span:3}},[a("a-select",{staticClass:"width-percent-100",attrs:{placeholder:"审核状态",allowClear:""},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("已审核")]),a("a-select-option",{attrs:{value:"0"}},[e._v("未审核")])],1)],1),a("a-col",{attrs:{span:8}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticClass:"margin-left-10",on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)],1),a("s-table",{ref:"table",attrs:{rowKey:function(e,t){return e.id},data:e.loadData,columns:e.columns,pagination:e.pagination},scopedSlots:e._u([{key:"coverImg",fn:function(t){return[t?a("img",{staticClass:"coverImg-class",attrs:{src:t}}):e._e()]}},{key:"productInfo",fn:function(e,t){return t.productInfo?[a("popover-text",{attrs:{text:t.productInfo.name,max:10}})]:void 0}},{key:"userInfo",fn:function(t,n){return[n.userInfo?a("div",{staticClass:"userSnapClass display-flex"},[n.userInfo.headImg?a("img",{staticClass:"hedaImgClass userImg",attrs:{src:n.userInfo.headImg}}):e._e(),a("popover-text",{staticClass:"nickNameClass",attrs:{text:n.userInfo.nickName,max:7}})],1):e._e()]}},{key:"productScore",fn:function(t,n){return[a("a-rate",{attrs:{disabled:""},model:{value:n.productScore,callback:function(t){e.$set(n,"productScore",t)},expression:"record.productScore"}})]}},{key:"comment",fn:function(t){return[0===t.isDel?a("popover-text",{attrs:{text:t.comment,max:15}}):e._e(),1===t.isDel?a("s",{staticStyle:{color:"#ccc"}},[e._v(e._s(t.comment))]):e._e()]}},{key:"isRecommend",fn:function(t,n){return[a("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",loading:n.loading,checked:Boolean(t)},on:{change:function(t){return e.handleRecommend(n,t)}}})]}},{key:"showOrder",fn:function(t){return[a("edit-show-order",{attrs:{number:t.showOrder},on:{change:function(a){return e.onEditChange(t.id,"showOrder",a)}}})]}},{key:"updatedAt",fn:function(t){return[e._v(e._s(e._f("parseTime")(t,"YYYY-MM-DD")))]}},{key:"action",fn:function(t,n){return[0===n.status&&0===n.isDel?a("a",{staticClass:"color-red",on:{click:function(t){return e.handleStatus(n)}}},[e._v("审核")]):e._e(),0===n.status&&0===n.isDel?a("a-divider",{attrs:{type:"vertical"}}):e._e(),0===n.isDel?a("a",{staticClass:"color-red",on:{click:function(t){return e.handleDel(n)}}},[e._v("删除")]):e._e(),1===n.isDel?a("a",{staticStyle:{color:"#ccc"}},[e._v("已删除")]):e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleInfo(n)}}},[e._v("详情")])]}}],null,!0)})],1)],1)])},s=[],r=(a("d81d"),a("a9e3"),a("ade3")),o=a("4c79"),c=a("2af9"),i=a("17eb"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editable-cell"},[e.editable?a("div",{staticClass:"editable-cell-input-wrapper"},[a("a-input-number",{staticClass:"input-class",attrs:{defaultValue:e.value},on:{change:e.handleChange,pressEnter:e.check}}),a("a-icon",{staticClass:"editable-cell-icon-check",attrs:{type:"check"},on:{click:e.check}})],1):a("div",{staticClass:"editable-cell-text-wrapper input-class"},[a("a-popover",{attrs:{placement:"topLeft",arrowPointAtCenter:""}},[a("template",{slot:"content"},[e._v(e._s(e.value))]),a("span",[e._v(e._s(e.value||0))])],2),a("a-icon",{staticClass:"editable-cell-icon",attrs:{type:"edit"},on:{click:e.edit}})],1)])},d=[],u={props:{number:{type:Number}},data:function(){return{value:this.number,editable:!1}},watch:{number:function(e){this.value=e}},methods:{handleChange:function(e){var t=e||0;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}},m=u,p=(a("76ba"),a("2877")),f=Object(p["a"])(m,l,d,!1,null,"460c4a70",null),h=f.exports,v=a("c8c3"),b={name:"ProductReplies",components:{Template:i["a"],STable:c["p"],PageView:v["a"],PopoverText:c["n"],preview:c["w"],EditShowOrder:h},data:function(){var e=this;return{isInit:!1,queryParam:{},pagination:{pageSize:10,current:1},columns:[{title:"商品图片",dataIndex:"productInfo.coverImg",scopedSlots:{customRender:"coverImg"},width:100},{title:"商品名称",dataIndex:"productInfo",scopedSlots:{customRender:"productInfo"},width:200},{title:"用户信息",dataIndex:"userInfo",scopedSlots:{customRender:"userInfo"},width:150},{title:"评论内容",scopedSlots:{customRender:"comment"}},{title:"商品分数",dataIndex:"productScore",scopedSlots:{customRender:"productScore"},width:180},{title:"是否推荐",dataIndex:"isRecommend",scopedSlots:{customRender:"isRecommend"},width:100},{title:"更新时间",dataIndex:"updatedAt",scopedSlots:{customRender:"updatedAt"},sorter:!0,width:150},{title:"排序",scopedSlots:{customRender:"showOrder"},sorter:!0,width:140},{title:"操作",scopedSlots:{customRender:"action"},width:180}],loadData:function(t){var a=t.pageNo,n=t.pageSize,s=t.sortField,c=void 0===s?"showOrder":s,i=t.sortOrder,l=void 0===i?"ascend":i;t.sortField="showOrder"===c?"show_order":"updated_at";var d=e.queryParam,u=d.isRecommend,m=d.isDel,p=d.status,f={page:a,limit:n,isRecommend:u,orders:Object(r["a"])({},t.sortField,"ascend"===l?"asc":"desc"),isDel:m,status:p};return Object(o["i"])(f).then((function(t){e.isInit=!0,t.data.list.map((function(e){return e.loading=!1,e}));var s=t.data,r=s.list,o=s.totalCount;return{pageNo:a,pageSize:n,data:r,totalCount:o}}))}}},activated:function(){this.isInit&&this.$refs.table.refresh()},beforeRouteLeave:function(e,t,a){e.meta.keepAlive=!0,a()},methods:{handleRecommend:function(e,t){var a=this;e.loading=!0,e.isRecommend=Number(t);var n={id:e.id,isRecommend:e.isRecommend};Object(o["r"])(n).then((function(t){setTimeout((function(){a.$message.success("修改成功"),e.loading=!1}),200)}))},onEditChange:function(e,t,a){var n=this;void 0===a&&(a=0),Object(o["r"])(Object(r["a"])({id:e},t,Number(a))).then((function(e){n.$message.success("修改成功"),n.$refs.table.refresh()}))},handleStatus:function(e){var t=this.$refs.table,a=this.$notification.success;this.$confirm({title:"警告",content:"是否通过是审核？",onOk:function(){var n={id:e.id,status:1};Object(o["r"])(n).then((function(e){a({message:"成功",description:"审核成功"}),t.refresh()}))}})},handleDel:function(e){var t=this.$refs.table,a=this.$notification.success;this.$confirm({title:"警告",content:"是否删除该评论吗？",onOk:function(){Object(o["e"])(e.id).then((function(e){a({message:"成功",description:"删除成功"}),t.refresh()}))}})},handleInfo:function(e){var t=e.id;this.$router.push({name:"RepliesInfo",params:{id:t}})}}},g=b,w=(a("2a79"),Object(p["a"])(g,n,s,!1,null,"703b0778",null));t["default"]=w.exports},"5e4c":function(e,t,a){},"76ba":function(e,t,a){"use strict";a("593d")}}]);