(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a31c5"],{"017e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-button",{staticClass:"margin-bottom-16",attrs:{type:"primary"},on:{click:e.onChangeAdd}},[a("a-icon",{attrs:{type:"plus"}}),e._v("添加打印机")],1),a("s-table",{ref:"table",attrs:{rowKey:function(e,t){return t},columns:e.columns,data:e.loadData,pagination:e.pagination},scopedSlots:e._u([{key:"brand",fn:function(t){return a("span",{},e._l(e.printList,(function(r){return t.brand===r.key?a("span",{key:r.key},[e._v(e._s(r.name))]):e._e()})),0)}},{key:"disable",fn:function(t,r){return[1===r.disable?a("a-badge",{attrs:{status:"processing",text:"启用"}}):e._e(),0===r.disable?a("a-badge",{attrs:{status:"default",text:"禁用"}}):e._e()]}},{key:"status",fn:function(t,a){return a.status?[e._v(" "+e._s(a.status.data)+" ")]:void 0}},{key:"action",fn:function(t,r){return[a("a",{on:{click:function(t){return e.onChangeEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"color-red",on:{click:function(t){return e.onChangeDelete(r)}}},[e._v("删除")])]}}],null,!0)})],1),a("a-modal",{attrs:{title:e.print.title},on:{ok:function(t){"add"===e.print.status?e.getHandleAdd():e.getHandleEdit()}},model:{value:e.print.visible,callback:function(t){e.$set(e.print,"visible",t)},expression:"print.visible"}},[a("a-form",{attrs:{form:e.print.form,"label-col":{span:6},"wrapper-col":{span:17}}},[a("a-form-item",{staticClass:"margin-bottom-0",attrs:{label:"收银端设备名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入设备名称"}]}],expression:"['name', {rules: [{ required: true, message: '请输入设备名称' }]}]"}],attrs:{placeholder:"请输入收银端设备名称"}})],1),a("a-form-item",{staticClass:"margin-bottom-0",staticStyle:{height:"25px"},attrs:{label:"设备状态"}},[a("span",[e._v(e._s(e.printStatus))])]),a("a-form-item",{attrs:{label:"打印机品牌"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brand",{rules:[{required:!0,message:"请选择品牌"}]}],expression:"['brand', {rules: [{ required: true, message: '请选择品牌' }]}]"}],staticClass:"width-percent-50",attrs:{placeholder:"请选择"}},e._l(e.printList,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"云打印机编号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["printSn",{rules:[{required:!0,message:"请输入云打印机编号"}]}],expression:"['printSn', {rules: [{ required: true, message: '请输入云打印机编号' }]}]"}],attrs:{placeholder:"请输入云打印机编号"}})],1),a("a-form-item",{attrs:{label:"云打印机Key"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["printKey",{rules:[{required:!0,message:"请输入密钥"}]}],expression:"['printKey', {rules: [{ required: true, message: '请输入密钥' }]}]"}],attrs:{placeholder:"请输入密钥"}})],1),a("a-form-item",{attrs:{label:"所属人-标识"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["owner"],expression:"['owner']"}],attrs:{placeholder:"请输入标识"}})],1),a("a-form-item",{attrs:{label:"流量卡号码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["simNo"],expression:"['simNo']"}],attrs:{placeholder:"请输入流量卡号码"}})],1),a("a-form-item",{attrs:{label:"备注"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{placeholder:"请输入备注"}})],1),a("a-form-item",{attrs:{label:"是否启用"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["disable",{initialValue:1}],expression:"['disable',{ initialValue: 1 }]"}]},[a("a-radio",{attrs:{value:1}},[e._v("启用")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1)],1)],1)],1)},n=[],i=(a("d3b7"),a("5530")),s=a("2ef0"),o=a("365c"),d=a("b775");function l(e){return Object(d["b"])({url:o["b"].printers.getPrintPage,method:"get",params:e})}function c(e){return Object(d["b"])({url:o["b"].printers.getPrintById+e,method:"get"})}function u(e){return Object(d["b"])({url:o["b"].printers.updatePrintProperty,method:"patch",data:e})}function p(e){return Object(d["b"])({url:o["b"].printers.addPrintProperty,method:"post",data:e})}function m(e){return Object(d["b"])({url:o["b"].printers.deletePrintById+e,method:"delete"})}var f=a("2af9"),b={components:{STable:f["p"]},data:function(){return{print:{id:null,form:null,status:"add",title:"",visible:!1},printList:[{key:"feieyun",name:"飞鹅"},{key:"ylyun",name:"易联云"}],printStatus:"",pagination:{pageSize:10,current:1},columns:[{title:"ID",dataIndex:"id",scopedSlots:{customRender:"id"}},{title:"收银端设备名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"品牌",scopedSlots:{customRender:"brand"}},{title:"所属人-标识",dataIndex:"owner",scopedSlots:{customRender:"owner"}},{title:"云打印机编号",dataIndex:"printSn",scopedSlots:{customRender:"printSn"}},{title:"是否启用",dataIndex:"disable",scopedSlots:{customRender:"disable"}},{title:"备注",dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){var t=e.pageNo,a=e.pageSize,r={page:t,limit:a};return l(r).then((function(e){var r=e.data.list;return{pageNo:t,pageSize:a,data:r,totalCount:0}}))}}},created:function(){},methods:{onChangeAdd:function(){this.print.status="add",this.print.form=this.$form.createForm(this),this.print.title="添加打印机",this.print.visible=!0},getHandleAdd:function(){var e=this;this.print.form.validateFields((function(t,a){var r=e.$refs.table,n=e.$notification.success;t||p(a).then((function(t){n({message:"成功",description:"添加成功"}),r.refresh(),e.print.visible=!1}))}))},onChangeEdit:function(e){var t=this;c(e.id).then((function(a){var r=a.data;t.printStatus=r.status.data,t.print.title="编辑打印机",t.print.status="edit",t.print.id=e.id,t.print.form=t.$form.createForm(t),t.print.visible=!0,new Promise((function(e){setTimeout(e,0)})).then((function(){t.print.form.setFieldsValue(Object(s["pick"])(e,["name","owner","printSn","brand","simNo","remark","printKey","disable"]))}))}))},getHandleEdit:function(){var e=this;this.print.form.validateFields((function(t,a){var r=Object(i["a"])({id:e.print.id},a);if(!t){var n=e.$refs.table,s=e.$notification.success;u(r).then((function(t){s({message:"成功",description:"编辑成功"}),n.refresh(),e.print.visible=!1}))}}))},onChangeDelete:function(e){var t=this.$refs.table,a=this.$notification.success;this.$confirm({content:"是否删除该打印机？",onOk:function(){m(e.id).then((function(e){a({message:"成功",description:"删除成功"}),t.refresh()}))}})}}},v=b,h=a("2877"),g=Object(h["a"])(v,r,n,!1,null,null,null);t["default"]=g.exports}}]);