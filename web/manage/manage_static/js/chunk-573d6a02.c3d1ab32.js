(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-573d6a02"],{"0f35":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{staticClass:"margin-bottom-16",attrs:{gutter:16}},t._l(t.statistic,(function(e,r){return a("a-col",{key:r,attrs:{span:6}},[a("a-card",{staticClass:"width-percent-100",attrs:{title:e.name,bordered:!1}},[a("div",{staticClass:"amount-slot-class",attrs:{slot:"extra"},slot:"extra"},[t._v(t._s(e.unit))]),a("div",{staticClass:"header-class"},[t._v(t._s(e.amount||0))])])],1)})),1),a("a-card",[a("a-row",{staticClass:"margin-bottom-24",attrs:{gutter:10}},[a("a-col",{attrs:{md:4,sm:24}},[a("fuzzy-search-user",{model:{value:t.queryParam.userId,callback:function(e){t.$set(t.queryParam,"userId",e)},expression:"queryParam.userId"}})],1),a("a-col",{attrs:{span:4}},[a("a-select",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"积分类型"},model:{value:t.queryParam.type,callback:function(e){t.$set(t.queryParam,"type",e)},expression:"queryParam.type"}},t._l(t.type,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.name))])})),1)],1),a("a-col",{attrs:{span:8}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),a("a-button",{staticClass:"margin-left-10",on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)],1),a("s-table",{ref:"table",attrs:{rowKey:function(t,e){return e},data:t.loadData,pagination:t.pagination,columns:t.columns},scopedSlots:t._u([{key:"userSnap",fn:function(e){return[e?a("div",{staticClass:"user-info display-flex align-items-center"},[a("div",{staticClass:"user-head-img cursor-pointer"},[a("a-avatar",e?{staticClass:"margin-right-16",attrs:{size:32,src:e.headImg}}:{staticClass:"margin-right-16",attrs:{size:32,icon:"user"}})],1),a("div",{staticClass:"user-nick-name display-flex flex-direction-column cursor-pointer"},[a("a-popover",{attrs:{placement:"topLeft"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.nickName))]),a("span",[t._v(t._s(t._f("textOverflowEllipsis")(e.nickName,0,6)))])])],1)]):t._e()]}},{key:"type",fn:function(e,r){return t._l(t.type,(function(e,s){return e.value===r.type?a("a-tag",{key:s,attrs:{color:e.color}},[t._v(t._s(e.name))]):t._e()}))}},{key:"updatedAt",fn:function(e){return[t._v(t._s(t._f("parseTime")(e||void 0)))]}}])})],1)],1)},s=[],n=(a("c740"),a("2af9")),o=a("4124"),i=a("2ef0"),c={components:{STable:n["p"],FuzzySearchUser:n["h"]},data:function(){var t=this;return{queryParam:{},statistic:[{name:"消费次数",value:"orderNumber",unit:"次"},{name:"消费积分",value:"orderScore",unit:"个"},{name:"签到次数",value:"singNumber",unit:"次"},{name:"签到积分",value:"singScore",unit:"个"}],type:[{name:"变动",value:"CHARGE",color:"#ff9a76"},{name:"抵扣",value:"DEDUCT",color:"#2db7f5"},{name:"消费",value:"ORDER",color:"#87d068"},{name:"签到",value:"SIGN",color:"#febf63"},{name:"退单",value:"REFUND",color:"#a3d2ca"}],columns:[{title:"ID",dataIndex:"id",scopedSlots:{customRender:"id"}},{title:"会员信息",dataIndex:"userSnap",scopedSlots:{customRender:"userSnap"}},{title:"联系电话",dataIndex:"userSnap.telephone"},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"上次剩余",dataIndex:"lastScore",scopedSlots:{customRender:"lastScore"}},{title:"当前变动",dataIndex:"score",scopedSlots:{customRender:"score"}},{title:"最近更新",dataIndex:"updatedAt",scopedSlots:{customRender:"updatedAt"}}],pagination:{pageSize:10,current:1},loadData:function(e){var a=e.pageNo,r=e.pageSize,s=t.queryParam,n=s.telephone,i=s.type,c=s.userId,u={page:a,limit:r,telephone:n||void 0,type:i,userId:c||void 0};return Object(o["l"])(u).then((function(t){var e=t.data,s=e.list,n=e.totalCount;return{pageNo:a,pageSize:r,data:s,totalCount:n}}))}}},created:function(){this.statisticUserScore()},methods:{statisticUserScore:function(){var t=this;Object(o["q"])().then((function(e){var a=e.data,r=Object(i["cloneDeep"])(t.statistic),s=function(t){var e=r.findIndex((function(e){return t===e.value}));r[e].value===t?r[e].amount=a[t]:r[e].amount=0};for(var n in a)s(n);t.statistic=r}))}}},u=c,l=(a("6d90"),a("2877")),d=Object(l["a"])(u,r,s,!1,null,"0ea42740",null);e["default"]=d.exports},"20c8":function(t,e,a){},"6d90":function(t,e,a){"use strict";a("20c8")}}]);