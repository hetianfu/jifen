(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9f1691a"],{"5aff":function(t,e,a){"use strict";a("7d3f")},"73df":function(t,e,a){"use strict";a.d(e,"b",(function(){return u})),a.d(e,"h",(function(){return h})),a.d(e,"c",(function(){return j})),a.d(e,"d",(function(){return v})),a.d(e,"f",(function(){return k})),a.d(e,"g",(function(){return S})),a.d(e,"a",(function(){return w})),a.d(e,"e",(function(){return I}));a("4ec9"),a("a9e3"),a("b64b"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0");var n=a("b85c"),i=a("2909"),r=a("53ca"),c=a("d4ec"),o=a("bee2"),s=a("2ef0"),u=function(){function t(){Object(c["a"])(this,t)}return Object(o["a"])(t,[{key:"setAttributes",value:function(t){var e=this,a=new Map,n=this.attributes();for(var i in n)a.set(n[i],i);for(var r in t)if(t.hasOwnProperty(r)&&a.get(r)){var c=this.getType;switch(c(e[r])){case"boolean":e[r]=!!t[r];break;case"string":e[r]=t[r]?t[r]:e[r];break;case"object":e[r]="object"===c(t[r])?t[r]:e[r];break;case"array":e[r]="array"===c(t[r])?t[r]:e[r];break;case"number":e[r]=t[r]?Number(t[r]):e[r];break;default:e[r]=t[r]}}return e}},{key:"toObject",value:function(t){var e={},a=this;for(var n in t){var i=Object(r["a"])(t[n]);if("string"===i)e[n]=a[t[n]];else if("function"===i){var c=t[n].apply();null!==c&&(e[n]=c)}}return e}},{key:"fields",value:function(){var t=this.attributes();return Object(s["zipObject"])(t,t)}},{key:"attributes",value:function(){var t=this,e=[];return e.push.apply(e,Object(i["a"])(Object.keys(t))),e}},{key:"delFields",value:function(t,e){var a,i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;delete t[r]}}catch(c){i.e(c)}finally{i.f()}}},{key:"getType",value:function(t){var e=Object.prototype.toString.apply(t);switch(e){case"[object String]":e="string";break;case"[object Number]":e="number";break;case"[object Boolean]":e="boolean";break;case"[object Undefined]":e="undefined";break;case"[object Null]":e="null";break;case"[object Object]":e="object";break;case"[object Array]":e="array";break;case"[object Function]":e="function";break}return e}}]),t}(),l=(a("b0c0"),a("45eb")),d=a("7e84"),p=a("262e"),f=a("2caf"),b=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.call(this),t.id="",t.name="",t.employeeNumber="",t.telephone="",t.sex=0,t.email="",t.departmentIds=[],t.updatedAt=0,t.userSnap={},t.mpOpenId="",t.mpSendMsg=0,t.openId="",t.status=0,t.roleList=[],t.isAdmin=0,t.shopId="",t.account="",t.shopInfo="",t.password="",t}return Object(o["a"])(a,[{key:"renderData",value:function(){var t=this,e=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return e["updateAt"]=function(){return 1e3*t.updateAt},Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,e)}}]),a}(u),h=b,m=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.call(this),t.id="",t.orderId="",t.status="",t.payAmount=0,t.updateTime=0,t.productType="",t.cartSnap=[],t.userSnap={},t.addressSnap={},t.cooperateShopSnap={},t.batchNumber="",t.trackingNumber="",t.trackingName="",t.addressSnap={},t.sharingAmount=0,t.createTime=0,t.incomeAmount=0,t.remark="",t.distribute="",t.productType="",t.expressName="",t.expressNo="",t.freightAmount="",t.couponInfo={},t.deductScore=0,t.connectSnap={},t.cooperateShopAddressSnap={},t.sendSnap={},t.sendType=0,t}return Object(o["a"])(a,[{key:"renderData",value:function(){var t=this,e=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this),n=this.productType;return"POST"===n&&(e["info"]=function(){return Object(s["get"])(t,"addressSnap")}),"GROUP_BUY"===n&&(e["info"]=function(){return Object(s["get"])(t,"cooperateShopSnap")}),Object(l["a"])(Object(d["a"])(a.prototype),"delFields",this).call(this,e,["cooperateShopSnap"]),Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,e)}},{key:"renderInfo",value:function(){var t=this,e=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this),n=this.productType;return"POST"===n&&(e["consigneeName"]=function(){return Object(s["get"])(t,"addressSnap.name")},e["consigneeStreet"]=function(){return Object(s["get"])(t,"addressSnap.street")},e["consigneeRoom"]=function(){return Object(s["get"])(t,"addressSnap.room")},e["consigneeTelephone"]=function(){return Object(s["get"])(t,"addressSnap.telephone")}),"GROUP_BUY"===n&&(e["shopName"]=function(){return Object(s["get"])(t,"cooperateShopSnap.shopName")},e["shopLogo"]=function(){return Object(s["get"])(t,"cooperateShopSnap.logo")},e["shopAddress"]=function(){return Object(s["get"])(t,"cooperateShopSnap.address")}),Object(l["a"])(Object(d["a"])(a.prototype),"delFields",this).call(this,e,[]),Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,e)}}]),a}(u),j=m,O=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.call(this),t.id="",t.name="",t.type="",t.number=0,t.amount=0,t.coverImg="",t.unitSnap={},t.categorySnap={},t.skuDetail=[],t.specSnap="",t}return Object(o["a"])(a,[{key:"renderData",value:function(){var t=this,e=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return e["unitName"]=function(){return Object(s["get"])(t,"unitSnap.name")},e["categoryName"]=function(){return Object(s["get"])(t,"categorySnap.name")},Object(l["a"])(Object(d["a"])(a.prototype),"delFields",this).call(this,e,["unitSnap","categorySnap"]),Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,e)}}]),a}(u),v=O,y=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.call(this),t.id="",t.title="",t.couponType="",t.status=0,t.leftNumber=0,t.usedNumber=0,t.totalNumber=0,t.userSnap={},t.updateTime=0,t.orderId="",t.createdAt=0,t.expireTime=0,t}return Object(o["a"])(a,[{key:"renderData",value:function(){var t=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,t)}}]),a}(u),k=y,g=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.call(this),t.id="",t.title="",t.couponType="",t.number=0,t.userSnap={},t.checkEmployeeSnap="",t.checkEmployeeName="",t.createdAt=0,t.shopBillAmount=0,t.title="",t}return Object(o["a"])(a,[{key:"renderData",value:function(){var t=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,t)}}]),a}(u),S=g,D=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.call(this),t.id=0,t.name="",t.path="",t.parentId=0,t.meta={},t.show=0,t.title="",t.icon="",t.component="",t.createTime=0,t.isMenu=0,t.key="",t.redirect="",t.servicePath="",t.requestMethod="",t.sort=0,t}return Object(o["a"])(a,[{key:"MenuList",value:function(){var t=this,e=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return e["redirect"]=function(){return""===t.redirect?void 0:t.redirect},Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,e)}},{key:"renderData",value:function(){var t=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,t)}},{key:"exportData",value:function(){var t=this,e=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return e["meta"]=function(){return{icon:t.icon,title:t.title,show:t.show,key:t.key}},e["show"]=function(){},e["title"]=function(){},e["icon"]=function(){},e["key"]=function(){},e["createTime"]=function(){},Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,e)}}]),a}(u),w=D,A=function(t){Object(p["a"])(a,t);var e=Object(f["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.call(this),t.id=0,t.parentId=0,t.sort=0,t.status=0,t.title="",t.createdAt=0,t}return Object(o["a"])(a,[{key:"RoleList",value:function(){var t=this,e=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return e["createdAt"]=function(){return t.createdAt},Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,e)}},{key:"exportData",value:function(){var t=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,t)}},{key:"renderData",value:function(){var t=Object(l["a"])(Object(d["a"])(a.prototype),"fields",this).call(this);return t["createdAt"]=function(){},Object(l["a"])(Object(d["a"])(a.prototype),"toObject",this).call(this,t)}}]),a}(u),I=A},"7d3f":function(t,e,a){},bf25:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-list"},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleAdd()}}},[t._v("添加角色")])],1),a("div",[a("s-table",{ref:"table",staticClass:"menu-list-table",attrs:{rowKey:function(t){return t.id},data:t.loadData,columns:t.columns,pagination:t.pagination},scopedSlots:t._u([{key:"createdAt",fn:function(e){return[t._v(t._s(t._f("parseTime")(e,"YYYY-MM-DD")))]}},{key:"meta",fn:function(e){return[t._v(t._s(e.title))]}},{key:"status",fn:function(e,n){return a("span",{},[a("a-switch",{attrs:{checked:1===e,checkedChildren:"启用",unCheckedChildren:"禁用"},on:{change:function(e){return t.changeStatus(n)}}})],1)}},{key:"action",fn:function(e){return[a("a",{on:{click:function(a){return t.handlePermission(e)}}},[t._v("权限")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(a){return t.handleEditMenu(e)}}},[t._v("编辑")]),void 0===e.children?a("a-divider",{attrs:{type:"vertical"}}):t._e(),void 0===e.children?a("a",{staticStyle:{color:"#f5222d"},on:{click:function(a){return t.handleDelete(e)}}},[t._v("删除")]):t._e()]}}])})],1)]),a("a-modal",{attrs:{title:t.confirm.title,width:"800px"},on:{ok:function(e){"create"===t.confirm.status?t.createData():t.updateData()}},model:{value:t.confirm.visible,callback:function(e){t.$set(t.confirm,"visible",e)},expression:"confirm.visible"}},[a("a-form",{attrs:{form:t.confirm.form}},[a("a-form-item",{attrs:{label:"父级","label-col":t.confirm.labelCol,"wrapper-col":t.confirm.wrapperCol}},[a("a-input",{attrs:{disabled:!0},model:{value:t.parentName,callback:function(e){t.parentName=e},expression:"parentName"}})],1),a("a-form-item",{attrs:{label:"角色名称","label-col":t.confirm.labelCol,"wrapper-col":t.confirm.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入角色名称"}]}],expression:"['title', {rules: [{ required: true, message: '请输入角色名称' }]}]"}]})],1),a("a-form-item",{attrs:{label:"状态","label-col":t.confirm.labelCol,"wrapper-col":t.confirm.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1}],expression:"['status', { initialValue: 1 }]"}],attrs:{name:"radioGroup"}},[a("a-radio",{attrs:{value:1}},[t._v("启用")]),a("a-radio",{attrs:{value:0}},[t._v("禁用")])],1)],1),a("a-form-item",{attrs:{label:"排序","label-col":t.confirm.labelCol,"wrapper-col":t.confirm.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:0}],expression:"['sort', { initialValue: 0 }]"}],attrs:{min:0}})],1)],1)],1),a("a-modal",{attrs:{title:t.detail.title,visible:t.detail.visible,"confirm-loading":t.detail.loading},on:{ok:t.handleConfirmAuth,cancel:function(e){return t.setDetail({visible:!1})}}},[a("div",{staticClass:"detail-scroll"},[a("a-tree",{attrs:{checkable:"","tree-data":t.detail.tree},on:{check:t.onCheckAuth},model:{value:t.detail.checked,callback:function(e){t.$set(t.detail,"checked",e)},expression:"detail.checked"}})],1)])],1)},i=[],r=(a("c740"),a("d81d"),a("a9e3"),a("d3b7"),a("5530")),c=a("88bc"),o=a.n(c),s=a("2ef0"),u=a("680a"),l=a("ed08"),d=a("ab09"),p=a("2af9"),f=a("0feb"),b=a("73df"),h=a("c8c3"),m=!1,j={},O={name:"MenuList",components:{PageView:h["a"],ProductView:u["d"],STable:d["a"],STableUser:p["t"],STableType:p["s"]},data:function(){var t=this;return{confirmSta:!1,queryParam:{},columns:[{title:"排序",dataIndex:"sort",scopedSlots:{customRender:"sort"}},{title:"角色名称",dataIndex:"title",scopedSlots:{customRender:"title"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createdAt",scopedSlots:{customRender:"createdAt"},sorter:!0},{title:"操作",scopedSlots:{customRender:"action"}}],pagination:{pageSize:10,current:1},pId:"",parentName:"",confirm:{form:null,temp:{},title:"",status:"",visible:!1,labelCol:{span:6},wrapperCol:{span:12}},loadData:function(e){var a=e.pageSize,n=e.sortOrder,i=void 0===n?"ascend":n,r=t.queryParam.title,c=e.pageNo,o={page:c,pageSize:a,createTimeByOrder:"ascend"===i?"asc":"desc",title:r};return t.queryParam.pageData=o.page,m&&(t.queryParam.pageData=j.pageData,o.page=j.pageData,c=j.pageData),Object(f["i"])().then((function(t){var e=t.data.map((function(t){var e=new b["e"];return e.setAttributes(t).RoleList()})),n=Object(l["u"])(e);return m=!1,{pageNo:c,pageSize:a,data:n,totalCount:0}}))},detail:{title:"",visible:!1,loading:!1,checked:[],extendItem:[]}}},created:function(){m=!0,j=Object(l["s"])(),this.getAuthItemList()},methods:{changeStatus:function(t){var e=t.status;t.status=1===t.status?0:1;var a=t.id,n=t.status,i=this.$message.success;Object(f["m"])({id:a,status:n}).then((function(t){i("修改成功"),setTimeout((function(){}),1e3)})).catch((function(){t.status=e}))},handleAdd:function(){this.pId=0,this.parentName="顶级",this.confirm.temp={},this.confirm.status="create",this.confirm.form=this.$form.createForm(this),this.confirm.title="添加角色",this.confirm.visible=!0},createData:function(){var t=this,e=this.confirm.form.validateFields,a=this.$refs.table,n=this.$notification.success;e((function(e,i){if(!e){var c=new b["e"],o=c.setAttributes(Object(r["a"])(Object(r["a"])({},i),{},{parentId:t.pId})).exportData();Object(f["b"])(o).then((function(e){n({message:"成功",description:"添加成功"}),a.refresh(!0),t.confirm.visible=!1}))}}))},handleEditMenu:function(t){this.confirm.temp=Object(r["a"])({},t),this.parentName="顶级",this.confirm.status="update",this.confirm.form=this.$form.createForm(this),this.confirm.title="编辑 [ ".concat(t.title," ]");var e=this.confirm.form.setFieldsValue;new Promise((function(t){setTimeout(t,0)})).then((function(){e(o()(t,["sort","status","title"]))})),this.confirm.visible=!0},updateData:function(){var t=this;m=!0;var e=this.confirm,a=e.form.validateFields,n=e.temp.id,i=this.$refs.table,c=this.$notification.success;a((function(e,a){if(!e){var o=new b["e"],s=o.setAttributes(Object(r["a"])(Object(r["a"])({},a),{},{id:n})).renderData();Object(f["m"])(s).then((function(e){c({message:"成功",description:"编辑成功"}),i.refresh(!0),t.confirm.visible=!1}))}}))},handleDelete:function(t){var e=this.$notification.success,a=this.$refs.table;this.$confirm({title:"警告",content:"确定删除 ".concat(t.title," 吗?"),onOk:function(){Object(f["e"])(t.id).then((function(t){e({message:"成功",description:"删除成功"}),a.refresh(!0)}))}})},handleReset:function(){this.queryParam={storeId:void 0,pageData:1},m=!1},setDetail:function(t){this.detail=Object.assign(this.detail,t)},getAuthItemList:function(){var t=this;Object(f["f"])().then((function(e){var a=e.data||[],n=Object(s["cloneDeep"])(a).map((function(t){var e=t.id,a=t.title,n=t.isMenu;return{id:e,name:a,isMenu:n}})),i=a.map((function(t){var e=t.id,a=t.title,n=t.parentId;return{key:e,title:a,parentId:n}}));t.setDetail({tree:Object(l["u"])(i,{id:"key"}),data:n})}))},handlePermission:function(t){var e=this;this.confirmSta=!1,Object(f["k"])({roleList:t.id}).then((function(a){var n=a.data,i=n.map((function(t){return Number(t)}));e.setDetail({id:t.id,title:"".concat(t.title),checked:i,loading:!1,visible:!0,extendItem:[]})}))},handleConfirmAuth:function(){var t=this;if(!1!==this.confirmSta){var e=this.detail,a=e.id,n=e.checked,i=e.data,r=e.extendItem,c=n.map((function(t){return i[i.findIndex((function(e){return e.id===t}))]}));this.setDetail({loading:!0}),Object(f["c"])({itemList:c,id:a,extendItem:r}).then((function(){t.$notification.success({message:"成功",description:"编辑成功"}),t.setDetail({visible:!1})})).catch((function(){t.setDetail({loading:!1})}))}else this.setDetail({loading:!0,visible:!1})},onCheckAuth:function(t,e){this.confirmSta=!0,this.setDetail({checked:t,extendItem:e.halfCheckedKeys})}}},v=O,y=(a("5aff"),a("2877")),k=Object(y["a"])(v,n,i,!1,null,"128dd4d2",null);e["default"]=k.exports}}]);