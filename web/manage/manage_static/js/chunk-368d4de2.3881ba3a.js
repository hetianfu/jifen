(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-368d4de2"],{5340:function(t,e,a){},bf21:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"product-stock-list",attrs:{bordered:!1}},[a("div",[a("div",{staticClass:"table-page-search-wrapper margin-bottom-24"},[a("a-select",{staticClass:"margin-right-10",staticStyle:{width:"200px"},attrs:{showArrow:!1,filterOption:!1,notFoundContent:null,defaultActiveFirstOption:!1,showSearch:"",allowClear:"",placeholder:"商品名称"},on:{search:t.searchProductName},model:{value:t.queryParam.productId,callback:function(e){t.$set(t.queryParam,"productId",e)},expression:"queryParam.productId"}},t._l(t.productList,(function(e){return a("a-select-option",{key:e.id},[t._v(t._s(e.name))])})),1),a("a-cascader",{staticClass:"margin-right-10",staticStyle:{width:"300px"},attrs:{options:t.categoryOptions,fieldNames:{label:"name",value:"id",children:"children"},placeholder:"商品分类",changeOnSelect:""},model:{value:t.queryParam.categoryId,callback:function(e){t.$set(t.queryParam,"categoryId",e)},expression:"queryParam.categoryId"}}),a("span",{},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)],1),a("s-table",{ref:"table",staticClass:"stock-list-table",attrs:{rowKey:function(t,e){return e},columns:t.columns,data:t.loadData,pagination:t.pagination},scopedSlots:t._u([{key:"name",fn:function(t,e){return[a("preview",{attrs:{img:e.images,name:e.name}})]}},{key:"updatedAt",fn:function(e){return a("span",{},[t._v(t._s(t._f("parseTime")(e)))])}},{key:"action",fn:function(e,r){return[a("a",{on:{click:function(e){return t.handleStockDetail(r)}}},[t._v("详情")]),1===r.delete?a("a-divider",{attrs:{type:"vertical"}}):t._e(),1===r.delete?a("a",{staticStyle:{color:"#f5222d"},on:{click:function(e){return t.handleDelete(r)}}},[t._v("删除")]):t._e()]}}])})],1),a("a-modal",{attrs:{footer:null,width:"600px"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.specImg}})])],1)},c=[],n=a("ade3"),i=a("5530"),o=a("2af9"),s=a("6a14"),d=a("66da"),u=a("4c79"),l=a("ed08"),p=a("3232"),h=!1,m={},f={name:"ProductStockList",components:{STable:o["p"],EditStockCostPrice:o["e"],preview:o["w"]},data:function(){var t=this;return{specImg:"",visible:!1,queryParam:{},columns:[{title:"ID",dataIndex:"productId"},{title:"商品名称",scopedSlots:{customRender:"name"}},{title:"规格",dataIndex:"specSnap",scopedSlots:{customRender:"specSnap"},width:"16%"},{title:"数量",dataIndex:"stockNumber",width:"8%"},{title:"更新时间",dataIndex:"updatedAt",sorter:!0,scopedSlots:{customRender:"updatedAt"},width:"16%"},{title:"操作",scopedSlots:{customRender:"action"},width:100}],pagination:{pageSize:10,current:1},pageTemp:0,loadData:function(e){var a=e.pageSize,r=e.sortField,c=void 0===r?"updateTime":r,n=e.sortOrder,i=void 0===n?"descend":n,o=e.pageNo,d=new p["a"],u=t.queryParam,f=u.productId,b=u.categoryId;d.setOrderBy(c,i);var g={page:o,limit:a,categoryId:b,productId:f};return h&&(t.queryParam.pageData=m.pageData,g.page=m.pageData,o=m.pageData),Object(s["d"])(g).then((function(t){var e=t.data,r=e.list,c=e.totalCount;return h=!1,Object(l["a"])(),{pageNo:o,pageSize:a,data:r,totalCount:c}}))},categoryOptions:[],productList:[]}},created:function(){h=!0,m=Object(l["s"])(),this.getCategoryList()},methods:{getCategoryList:function(){var t=this;Object(d["e"])().then((function(e){t.categoryOptions=Object(l["u"])(e.data)}))},searchProductName:function(t){var e=this,a={page:1,limit:10,combo:0};a.name=t,Object(u["k"])(a).then((function(t){var a=t.data.list;e.productList=a})).catch((function(){e.productList=[]}))},handleEditCostPrice:function(t,e,a){var r=this;h=!0,Object(l["r"])(Object(i["a"])({},this.queryParam)),m=Object(l["s"])(),Object(s["f"])(Object(n["a"])({id:t},e,a)).then((function(t){r.$message.success("修改成功"),r.$refs.table.refresh(!0)}))},handleStockEnter:function(){Object(l["r"])(Object(i["a"])({},this.queryParam)),this.$router.push({name:"EnterProductStock"})},handleClearRedis:function(){var t=this.$refs.table,e=this.$notification.success;Object(s["e"])({productId:this.id}).then((function(a){e({message:"成功",description:"清除缓存成功"}),t.refresh(!0)}))},handleStockOut:function(){Object(l["r"])(Object(i["a"])({},this.queryParam)),this.$router.push({name:"OutProductStock"})},handleStockDetail:function(t){Object(l["r"])(Object(i["a"])({},this.queryParam)),this.$router.push({name:"ProductStockDetail",params:{id:t.id}})},handleDelete:function(t){var e=t.id,a=t.productName;h=!0,Object(l["r"])(Object(i["a"])({},this.queryParam));var r=this.$refs.table,c=this.$notification.success;this.$confirm({title:"警告",content:"是否删除 [ ".concat(a," ] 吗?"),onOk:function(){m=Object(l["s"])(),Object(s["a"])(e).then((function(t){c({message:"成功",description:"删除成功"}),r.refresh(!0)}))}})},handleImgModel:function(t){this.specImg=t.images,this.visible=!0}}},b=f,g=(a("ccdb"),a("2877")),y=Object(g["a"])(b,r,c,!1,null,"5fdedb2f",null);e["default"]=y.exports},ccdb:function(t,e,a){"use strict";a("5340")}}]);