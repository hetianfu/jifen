(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cfc6a"],{"64c9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",[a("a-row",{staticClass:"margin-bottom-8",attrs:{gutter:8}},[a("a-col",{attrs:{md:4,sm:24}},[a("fuzzy-search-user",{model:{value:t.queryParam.userId,callback:function(e){t.$set(t.queryParam,"userId",e)},expression:"queryParam.userId"}})],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-select",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"类型","option-filter-prop":"children"},model:{value:t.queryParam.type,callback:function(e){t.$set(t.queryParam,"type",e)},expression:"queryParam.type"}},t._l(t.COUPON_TEMPLATE_TYPE,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])})),1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-range-picker",{staticClass:"width-percent-100",on:{change:t.onChangeCreateTime},model:{value:t.queryParam.timeRange,callback:function(e){t.$set(t.queryParam,"timeRange",e)},expression:"queryParam.timeRange"}})],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),a("a-button",{staticClass:"margin-left-8",on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)],1),a("s-table",{ref:"table",attrs:{rowKey:function(t,e){return e},columns:t.columns,data:t.loadData,pagination:t.pagination},scopedSlots:t._u([{key:"userSnap",fn:function(e){return[e?a("div",{staticClass:"user-info display-flex align-items-center"},[a("div",{staticClass:"user-head-img cursor-pointer"},[a("a-avatar",e?{staticClass:"margin-right-16",attrs:{size:32,src:e.headImg}}:{staticClass:"margin-right-16",attrs:{size:32,icon:"user"}})],1),a("div",{staticClass:"user-nick-name display-flex flex-direction-column cursor-pointer"},[a("a-popover",{attrs:{placement:"topLeft"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.nickName))]),a("span",[t._v(t._s(t._f("textOverflowEllipsis")(e.nickName,0,6)))])])],1)]):t._e()]}},{key:"getMethod",fn:function(e){return[t._v(t._s("seller"===e?"后台获取":"用户自领"))]}},{key:"type",fn:function(e){return t._l(t.COUPON_TEMPLATE_TYPE,(function(n,r){return n.value===e?a("a-tag",{key:r,attrs:{color:n.color}},[t._v(t._s(n.name))]):t._e()}))}},{key:"createdAt",fn:function(e){return[t._v(t._s(t._f("parseTime")(e,"YYYY-MM-DD")))]}},{key:"status",fn:function(e){return[0===e?a("a-badge",{attrs:{status:"success",text:"未使用"}}):t._e(),1===e?a("a-badge",{attrs:{status:"warning",text:"已使用"}}):t._e(),-1===e?a("a-badge",{attrs:{status:"default",text:"已过期"}}):t._e()]}}])})],1)],1)},r=[],s=a("4124"),i=a("f121"),o=a("2af9"),l=a("17eb"),u={components:{Template:l["a"],STable:o["p"],FuzzySearchUser:o["h"]},data:function(){var t=this;return{COUPON_TEMPLATE_TYPE:i["e"],pagination:{pageNo:1,pageSize:10},queryParam:{timeRange:["",""]},columns:[{title:"ID",dataIndex:"id"},{title:"用户信息",dataIndex:"userSnap",scopedSlots:{customRender:"userSnap"}},{title:"联系电话",dataIndex:"userSnap.telephone",width:140},{title:"优惠券名称",dataIndex:"title"},{title:"获取方式",dataIndex:"getMethod",scopedSlots:{customRender:"getMethod"}},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"},width:110},{title:"优惠券面值",dataIndex:"limitAmount",scopedSlots:{customRender:"limitAmount"}},{title:"发放时间",dataIndex:"createdAt",scopedSlots:{customRender:"createdAt"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:120}],loadData:function(e){var a=e.pageNo,n=e.pageSize,r=t.queryParam,i=r.userId,o=r.telephone,l=r.type,u=r.timeRange,c={page:a,limit:n,userId:i||void 0,telephone:o||void 0,type:l||void 0,geCreatedAt:u[0]?u[0]+" 00:00:00":void 0,leCreatedAt:u[1]?u[1]+" 23:59:59":void 0};return Object(s["i"])(c).then((function(t){var e=t.data,r=e.list,s=e.totalCount;return{pageNo:a,limit:n,data:r,totalCount:s}}))}}},created:function(){},methods:{onChangeCreateTime:function(t,e){this.queryParam.timeRange=e}}},c=u,d=a("2877"),m=Object(d["a"])(c,n,r,!1,null,"8545ded8",null);e["default"]=m.exports}}]);