(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-334dee5b"],{"5e2d":function(t,e,a){"use strict";a("5f24")},"5f24":function(t,e,a){},"6d3d":function(t,e,a){},"7a4e":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-category-tree"},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAddCategory}},[t._v("添加主分类")])],1),a("s-table",{ref:"table",attrs:{rowKey:function(t){return t.id},columns:t.columns,data:t.loadData,pagination:!1},scopedSlots:t._u([{key:"pic",fn:function(e){return[e?a("s-table-avatar",{attrs:{src:e}}):t._e()]}},{key:"status",fn:function(e,r){return[1===r.status?a("a-badge",{attrs:{status:"processing",text:"已发布"}}):t._e(),0===r.status?a("a-badge",{attrs:{status:"warning",text:"未发布"}}):t._e()]}},{key:"action",fn:function(e){return 0===e.isSystem?[a("a",{on:{click:function(a){return t.handleEditCategory(e)}}},[t._v("编辑")]),void 0===e.children?a("a-divider",{attrs:{type:"vertical"}}):t._e(),void 0===e.children?a("a",{staticStyle:{color:"#f5222d"},on:{click:function(a){return t.onChangeDel(e)}}},[t._v("删除")]):t._e()]:void 0}}],null,!0)})],1),a("a-modal",{staticClass:"product-category-dialog",attrs:{title:t.category.title},on:{ok:function(e){"create"===t.category.status?t.createData():t.updateData()}},model:{value:t.category.visible,callback:function(e){t.$set(t.category,"visible",e)},expression:"category.visible"}},[a("a-form",{attrs:{form:t.category.form}},[a("a-form-item",{attrs:{label:"分类名称","label-col":t.category.labelCol,"wrapper-col":t.category.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入分类名称"}]}],expression:"['title', {rules: [{ required: true, message: '请输入分类名称' }]}]"}]})],1),a("a-form-item",{attrs:{label:"分类图片","label-col":t.category.labelCol,"wrapper-col":t.category.wrapperCol}},[a("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic",{rules:[{required:!0,message:"请上传图片"}]}],expression:"['pic', {rules: [{ required: true, message: '请上传图片' }]}]"}]})],1),a("a-form-item",{attrs:{label:"分类简介","label-col":t.category.labelCol,"wrapper-col":t.category.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["info"],expression:"['info']"}],attrs:{placeholder:"请输入分类简介"}})],1),a("a-form-item",{attrs:{label:"排序","label-col":t.category.labelCol,"wrapper-col":t.category.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["showOrder",{initialValue:0}],expression:"['showOrder', { initialValue: 0 }]"}],attrs:{min:0,max:1e4}})],1),a("a-form-item",{attrs:{label:"状态","label-col":t.category.labelCol,"wrapper-col":t.category.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:0}],expression:"['status', { initialValue: 0 }]"}]},[a("a-radio",{attrs:{value:0}},[t._v("未发布")]),a("a-radio",{attrs:{value:1}},[t._v("已发布")])],1)],1)],1)],1)],1)},i=[],s=(a("d3b7"),a("5530")),o=a("88bc"),c=a.n(o),n=a("2af9"),l=a("ba41"),d=a("3232"),u=a("ed08"),p=a("365c"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"s-table-avatar cursor-pointer",on:{click:t.parseImg}},[a("div",{staticClass:"image-curtain"},[t._m(0),a("a-avatar",{attrs:{src:t.src,size:38}})],1),a("a-modal",{attrs:{footer:null,width:"800px"},on:{click:t.handleImgCancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.src}})])],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"curtain"},[a("div",{staticClass:"eye"},[a("div",{staticClass:"super-icon-font font-size-fourteen"})])])}],g={props:{src:{type:String,default:""},name:{type:String,default:""}},data:function(){return{visible:!1}},methods:{parseImg:function(){this.visible=!0},handleImgCancel:function(){this.visible=!1}}},h=g,v=(a("e4da"),a("2877")),b=Object(v["a"])(h,m,f,!1,null,null,null),y=b.exports,C={name:"ProductCategoryTree",components:{STable:n["p"],AddCategoryGoods:n["a"],STableAvatar:y},data:function(){var t=Object(u["i"])();return{pagination:{pageSize:10,current:1},headers:t,imageUrl:"",action:p["b"].uploadImgs.addCategoryImage,columns:[{title:"分类图片",dataIndex:"pic",scopedSlots:{customRender:"pic"}},{title:"分类名称",dataIndex:"title",scopedSlots:{customRender:"title"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"showOrder"},{title:"操作",scopedSlots:{customRender:"action"}}],loadData:function(t){var e=t.pageNo,a=t.pageSize,r=t.sortField,i=void 0===r?"showOrder":r,s=t.sortOrder,o=void 0===s?"descend":s,c={page:e,limit:a},n=new d["a"];return n.setOrderBy(i,o),c.query=n.exportData(),Object(l["e"])(c).then((function(t){var r=Object(u["v"])(t.data);return{pageNo:e,pageSize:a,data:r,totalCount:0}}))},category:{form:null,temp:{},title:"",status:"",visible:!1,labelCol:{span:8},wrapperCol:{span:12}},addCategoryGoods:{select:[],visible:!1},categoryId:""}},created:function(){},methods:{handleAddCategory:function(){this.category.temp={},this.category.status="create",this.category.form=this.$form.createForm(this),this.category.title="添加资讯分类",this.category.visible=!0,this.imageUrl=""},handlePushCategory:function(t){this.category.temp=t,this.category.status="create",this.category.form=this.$form.createForm(this),this.category.title="".concat(t.title," > 添加分类"),this.category.visible=!0,this.imageUrl=""},createData:function(){var t=this,e=this.category,a=e.form.validateFields,r=e.temp,i=this.$refs.table,o=this.$notification.success;a((function(e,a){if(!e){var c=Object(s["a"])(Object(s["a"])({},a),{},{pid:r.id});Object(l["a"])(c).then((function(e){o({message:"成功",description:"添加成功"}),i.refresh(!0),t.category.visible=!1}))}}))},handleEditCategory:function(t){this.category.temp=t,this.category.status="update",this.imageUrl=t.pic,this.category.form=this.$form.createForm(this),this.category.title="编辑 [ ".concat(t.title," ] 分类");var e=this.category.form;new Promise((function(t){setTimeout(t,0)})).then((function(){e.setFieldsValue(c()(t,["title","status","showOrder","synOnline","pic"]))})),this.category.visible=!0},updateData:function(){var t=this,e=this.category,a=e.form.validateFields,r=e.temp.id,i=this.$refs.table,o=this.$notification.success;a((function(e,a){if(!e){var c=Object(s["a"])(Object(s["a"])({},a),{},{id:r});Object(l["h"])(c).then((function(e){o({message:"成功",description:"编辑成功"}),i.refresh(!0),t.category.visible=!1}))}}))},onChangeDel:function(t){var e=this.$refs.table,a=this.$notification.success;this.$confirm({title:"警告",content:"是否删除 [ ".concat(t.title," ] 分类?"),onOk:function(){Object(l["c"])(t.id).then((function(t){a({message:"成功",description:"删除成功"}),e.refresh(!0)}))}})},onChangeUpload:function(t){var e=t.file;"done"===e.status&&(this.$message.success("图片上传成功"),this.imageUrl=e.response.data.accessUrl)}}},w=C,O=(a("5e2d"),Object(v["a"])(w,r,i,!1,null,"2cc3c393",null));e["default"]=O.exports},e4da:function(t,e,a){"use strict";a("6d3d")}}]);