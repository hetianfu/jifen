(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b80c12f"],{"01a2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-row",{staticClass:"margin-bottom-16",attrs:{gutter:10}},[a("a-col",{attrs:{span:5}},[a("a-input",{attrs:{placeholder:"数据组名称",allowClear:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1),a("a-col",{attrs:{span:4}},[a("a-select",{staticClass:"width-percent-100",attrs:{placeholder:"配置类型",allowClear:""},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},e._l(e.COMBINED_CONFIG_TYPE,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1),a("a-col",{attrs:{span:8}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticClass:"margin-left-10",on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)],1),a("a-button",{staticClass:"margin-bottom-16",attrs:{type:"primary"},on:{click:e.handleAdd}},[a("a-icon",{attrs:{type:"plus"}}),e._v("添加数据组")],1),a("s-table",{ref:"table",attrs:{rowKey:function(e,t){return t},columns:e.columns,data:e.loadData,pagination:e.pagination},scopedSlots:e._u([{key:"name",fn:function(t,a){return[e._v(e._s(a.name))]}},{key:"type",fn:function(t,r){return e._l(e.COMBINED_CONFIG_TYPE,(function(t,n){return r.type===t.value?a("a-tag",{key:n,attrs:{color:t.color}},[e._v(e._s(t.name))]):e._e()}))}},{key:"action",fn:function(t,r){return[a("a-dropdown",{attrs:{trigger:["click"]}},[a("a",[e._v("操作 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},["NORMAL"===r.type?a("a-menu-item",{on:{click:function(t){return e.handleToNormal(r)}}},[a("a",[e._v("数据列表")])]):e._e(),"PRODUCT"===r.type?a("a-menu-item",{on:{click:function(t){return e.handleToPorduct(r)}}},[a("a",[e._v("商品列表")])]):e._e(),"STRATEGY"===r.type?a("a-menu-item",{on:{click:function(t){return e.handleToStrategy(r)}}},[a("a",[e._v("活动列表")])]):e._e(),"PINK"===r.type?a("a-menu-item",{on:{click:function(t){return e.handleToPink(r)}}},[a("a",[e._v("拼团列表")])]):e._e(),a("a-menu-item",{on:{click:function(t){return e.handleEdit(r)}}},[a("a",[e._v("编辑")])]),a("a-menu-item",{on:{click:function(t){return e.handleMord(r)}}},[a("a",[e._v("扩展")])]),a("a-menu-item",{on:{click:function(t){return e.handleDel(r)}}},[a("a",{staticClass:"color-red"},[e._v("删除")])])],1)],1)]}}])})],1),a("a-modal",{attrs:{title:e.group.title,width:"800px"},on:{ok:function(t){"add"===e.group.status?e.handleSubmitAdd():e.handleSubmitEdit()}},model:{value:e.group.visible,callback:function(t){e.$set(e.group,"visible",t)},expression:"group.visible"}},[a("a-form",{attrs:{form:e.group.form,"label-col":{span:4},"wrapper-col":{span:19}}},[a("a-form-item",{attrs:{label:"数据组名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!1,message:"请输入数据组名称"}]}],expression:"['name', { rules: [{ required: false, message: '请输入数据组名称' }] }]"}],attrs:{placeholder:"请输入数据组名称"}})],1),a("a-form-item",{attrs:{label:"数据组简介"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["info",{rules:[{required:!1,message:"请输入数据组简介"}]}],expression:"['info', { rules: [{ required: false, message: '请输入数据组简介' }] }]"}],attrs:{placeholder:"请输入数据组简介"}})],1),a("a-form-item",{attrs:{label:"配置类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:"NORMAL"},{rules:[{required:!1,message:"请选择配置类型"}]}],expression:"[ 'type', { initialValue: 'NORMAL' }, { rules: [{ required: false, message: '请选择配置类型' }] } ]"}],staticStyle:{width:"200px"},attrs:{placeholder:"选择配置类型"},on:{change:e.onChangeType}},e._l(e.COMBINED_CONFIG_TYPE,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"渲染方式："}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["renderType"],expression:"['renderType']"}],staticStyle:{width:"200px"},attrs:{placeholder:"选择渲染方式"}},e._l(Object.keys(e.renderType),(function(t,r){return a("a-select-opt-group",{key:r},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.renderType[t]["name"]))]),e._l(e.renderType[t]["list"],(function(r,n){return a("a-select-option",{key:n,attrs:{value:t+"-"+r.value}},[e._v(e._s(r.label))])}))],2)})),1)],1),a("a-form-item",{attrs:{label:"排序："}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["showOrder",{initialValue:0},{rules:[{required:!1,message:"请输入排序"}]}],expression:"['showOrder', { initialValue: 0 }, { rules: [{ required: false, message: '请输入排序' }] }]"}],attrs:{min:0}})],1),e._l(e.dataList,(function(t,r){return"NORMAL"===e.renderSta?a("a-form-item",{key:r,attrs:{label:"字段"+(r+1)}},[a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:11}},[a("a-form-item",{staticClass:"margin-bottom-0"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fields["+r+"].name",{rules:[{required:!1,message:"请输入字段名称"}]}],expression:"[`fields[${index}].name`, { rules: [{ required: false, message: '请输入字段名称' }] }]"}],attrs:{placeholder:"字段名称：姓名"}})],1),a("a-form-item",{staticClass:"margin-bottom-0"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fields["+r+"].title",{rules:[{required:!1,message:"请输入字段配置名"}]}],expression:"[\n                    `fields[${index}].title`,\n                    { rules: [{ required: false, message: '请输入字段配置名' }] }\n                  ]"}],attrs:{placeholder:"字段配置名：name"}})],1),a("a-form-item",{staticClass:"margin-bottom-0"},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["fields["+r+"].type",{rules:[{required:!1,message:"请选择字段类型!"}]}],expression:"[\n                    `fields[${index}].type`,\n                    { rules: [{ required: false, message: '请选择字段类型!' }] }\n                  ]"}],attrs:{placeholder:"字段类型"}},e._l(e.textType,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.type}},[e._v(e._s(t.name))])})),1)],1)],1),a("a-col",{attrs:{span:11}},[a("a-form-item",{staticClass:"margin-bottom-0"},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["fields["+r+"].configParameter",{rules:[{required:!1,message:"请输入配置参数"}]}],expression:"[\n                    `fields[${index}].configParameter`,\n                    { rules: [{ required: false, message: '请输入配置参数' }] }\n                  ]"}],staticStyle:{height:"97px",resize:"none"},attrs:{placeholder:"参数方式例如:白色,红色,黑色"}})],1)],1),a("a-col",{attrs:{span:2}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeChange(r)}}},[a("a-icon",{attrs:{type:"close"}})],1)],1)],1)],1):e._e()})),a("a-form-item",{staticClass:"margin-left-24"},["NORMAL"===e.renderSta?a("a-button",{attrs:{type:"primary"},on:{click:e.addTextHandle}},[e._v("添加字段")]):e._e()],1)],2)],1),a("a-modal",{attrs:{title:e.more.title},on:{ok:e.getMoreHandle},model:{value:e.more.visible,callback:function(t){e.$set(e.more,"visible",t)},expression:"more.visible"}},[a("a-form",{attrs:{form:e.more.form,"label-col":{span:4},"wrapper-col":{span:19}}},[a("a-form-item",{attrs:{label:"封面图",extra:"（注：封面图片尺寸为750 * 316(可自定义)）"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["coverImg"],expression:"['coverImg']"}],staticClass:"display-none"}),a("upload-image",{attrs:{value:e.moreImg.coverImg,action:e.action,headers:e.headers},on:{change:e.handleChangeCoverImg}})],1),a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["moreName"],expression:"['moreName']"}],attrs:{placeholder:"请输入名称"}})],1),a("a-form-item",{attrs:{label:"跳转路径"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["moreUrl"],expression:"['moreUrl']"}],attrs:{placeholder:"请输入跳转路径"}})],1)],1)],1)],1)},n=[],o=(a("99af"),a("a434"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("1276"),a("15fd")),i=a("5530"),s=a("2af9"),l=a("f955"),u=a("f121"),c=a("e47b"),d=a("2ef0"),m=a("88bc"),p=a.n(m),f=a("ed08"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-upload",{attrs:{action:e.action,headers:e.headers,"show-upload-list":!1,beforeUpload:e.onBeforeUpload,"list-type":"picture-card"},on:{change:e.onChangeUpload}},[a("div",[e.image&&"loading"!==e.image?a("img",{staticClass:"width-percent-100",attrs:{src:e.image,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.image?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.image?"文件上传中":"上传"))])],1)])])},g=[],b={props:{value:{type:String,default:""},action:{type:String,required:!0},showUploadList:{type:Boolean,default:!0}},model:{prop:"value",event:"change"},watch:{value:function(e){this.image=e}},data:function(){var e=this.value,t=Object(f["i"])();return{headers:t,image:e}},methods:{onBeforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("你只能上传 JPG或PNG 文件！");var a=e.size/1024/1024<2;return a||this.$message.error("图像必须小于2MB！"),t&&a},onChangeUpload:function(e){var t=e.file;e.fileList;if("uploading"===t.status&&(this.image="loading"),"done"===t.status){var a=t.response.data;this.image=a.accessUrl,this.$emit("change",a.accessUrl)}}}},v=b,y=a("2877"),O=Object(y["a"])(v,h,g,!1,null,"ae262a06",null),_=O.exports,w=a("365c"),N=a("5880"),j={components:{STable:s["p"],UploadImage:_},data:function(){var e=this,t=Object(f["i"])();return{renderType:c,headers:t,action:w["b"].uploadImgs.addSystemImage,more:{visible:!1,form:null,title:"编辑扩展",spreads:null},moreImg:{coverImg:""},renderSta:"NORMAL",queryParam:{},COMBINED_CONFIG_TYPE:u["a"],dataList:[],pagination:{pageSize:10,current:1},group:{visible:!1,form:null,status:"",title:""},textType:[{type:"text",name:"文本框"},{type:"textarea",name:"多行文本框"},{type:"radio",name:"单选按钮"},{type:"checkbox",name:"多选框"},{type:"images",name:"多图上传"},{type:"file",name:"文件上传"},{type:"upload",name:"单图上传"},{type:"select",name:"下拉选框"}],columns:[{title:"编号",dataIndex:"id"},{title:"数据字段",dataIndex:"configName",scopedSlots:{customRender:"configName"}},{title:"数据组名称",key:"name",scopedSlots:{customRender:"name"}},{title:"简介",dataIndex:"info",scopedSlots:{customRender:"info"}},{title:"配置类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"排序",dataIndex:"showOrder",scopedSlots:{customRender:"showOrder"},sorter:!0},{title:"操作",scopedSlots:{customRender:"action"}}],loadData:function(t){var a=t.pageNo,r=t.pageSize,n=t.sortOrder,o=void 0===n?"ascend":n,i=e.queryParam,s=i.name,u=i.type,c={page:a,limit:r,name:s||void 0,type:u,orders:{show_order:"ascend"===o?"asc":"desc"}};return Object(l["m"])(c).then((function(e){var t=e.data,n=t.list,o=t.totalCount;return{pageNo:a,pageSize:r,data:n,totalCount:o}}))}}},created:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(N["mapActions"])(["setGroupData"])),{},{setGroup:function(e){this.group=Object.assign(this.group,e)},handleAdd:function(){this.dataList=[],this.renderSta="NORMAL",this.setGroup({visible:!0,title:"添加数据组",status:"add",form:this.$form.createForm(this)})},handleSubmitAdd:function(){var e=this;this.group.form.validateFields((function(t,a){var r=Object(i["a"])({},a),n=(r.renderType,Object(o["a"])(r,["renderType"])),s=a.renderType&&a.renderType.split("-");t||(n.showMod=Object(d["last"])(s),n.configName=Object(d["head"])(s),Object(l["b"])(n).then((function(t){e.$notification.success({message:"成功",description:"添加成功"}),e.$refs.table.refresh(),e.group.visible=!1})))}))},handleEdit:function(e){var t=this,a=Object(i["a"])({},e),r=a.fields;this.dataList=r,this.renderSta=e.type,this.setGroup({id:e.id,visible:!0,title:"编辑 [ ".concat(e.name," ]"),status:"edit",form:this.$form.createForm(this)}),new Promise((function(e){setTimeout(e,0)})).then((function(){e.renderType="".concat(e.configName,"-").concat(e.showMod),t.group.form.setFieldsValue(p()(e,["name","renderType","info","showOrder","type"])),"NORMAL"===t.renderSta&&r&&t.group.form.setFieldsValue({fields:r})}))},handleSubmitEdit:function(){var e=this,t=this.group,a=t.form.validateFields,r=t.id;a((function(t,a){var n=Object(i["a"])(Object(i["a"])({},a),{},{id:r}),s=(n.renderType,Object(o["a"])(n,["renderType"])),u=a.renderType&&a.renderType.split("-");t||(s.showMod=Object(d["last"])(u),s.configName=Object(d["head"])(u),Object(l["p"])(s).then((function(t){e.$notification.success({message:"成功",description:"编辑成功"}),e.$refs.table.refresh(),e.group.visible=!1})))}))},onChangeType:function(e){this.renderSta=e},addTextHandle:function(){this.dataList.push(Number(new Date))},closeChange:function(e){var t=this.group.form,a=this.dataList;a.splice(e,1);var r=t.getFieldValue("fields");r.splice(e,1),t.setFieldsValue({fields:r})},handleDel:function(e){var t=this.$refs.table,a=this.$notification.success;this.$confirm({title:"警告",content:"是否删除[ ".concat(e.name," ]"),onOk:function(){Object(l["f"])(e.id).then((function(e){a({message:"成功",description:"删除成功"}),t.refresh()}))}})},handleToNormal:function(e){this.setGroupData(e),this.$router.push({name:"NormalData",params:{gid:e.id}})},handleToPorduct:function(e){this.setGroupData(e),this.$router.push({name:"ProductData",params:{gid:e.id}})},handleToStrategy:function(e){this.setGroupData(e),this.$router.push({name:"StrategyData",params:{gid:e.id}})},handleToPink:function(e){this.setGroupData(e),this.$router.push({name:"PinkData",params:{gid:e.id}})},handleMord:function(e){var t=this;this.more.form=this.$form.createForm(this),this.more.visible=!0,this.more.id=e.id,new Promise((function(e){setTimeout(e,0)})).then((function(){null!==e.spreads?t.moreImg.coverImg=e.spreads.coverImg:t.moreImg.coverImg=void 0,t.more.form.setFieldsValue(p()(e.spreads,["moreName","moreUrl","coverImg"]))}))},handleChangeCoverImg:function(e){this.more.form.setFieldsValue({coverImg:e})},getMoreHandle:function(){var e=this,t=this.more,a=t.form,r=t.id,n=this.$refs.table,o=this.$notification.success;a.validateFields((function(t,a){t||Object(l["p"])({id:r,spreads:Object(i["a"])({},a)}).then((function(t){o({message:"成功",description:"修改成功"}),n.refresh(!0),e.more.visible=!1}))}))}})},S=j,T=Object(y["a"])(S,r,n,!1,null,null,null);t["default"]=T.exports},e47b:function(e){e.exports=JSON.parse('{"ads":{"name":"广告","list":[{"label":"自定义广告渲染1","value":1},{"label":"自定义广告渲染1","value":2},{"label":"田字格展示方式","value":3}]},"category":{"name":"分类","list":[{"label":"四列一排","value":4},{"label":"五列一排","value":5}]},"news":{"name":"新闻资讯","list":[{"label":"自定义1","value":1}]},"diy":{"name":"商品","list":[{"label":"自定义商品渲染1","value":1},{"label":"自定义商品渲染2","value":2},{"label":"自定义商品渲染3","value":3},{"label":"自定义商品渲染4","value":4},{"label":"自定义商品渲染5","value":5},{"label":"商品渲染6（限秒杀）","value":6},{"label":"自定义商品渲染7","value":7},{"label":"自定义广告渲染8","value":8},{"label":"自定义广告渲染9","value":9}]}}')},f955:function(e,t,a){"use strict";a.d(t,"n",(function(){return i})),a.d(t,"l",(function(){return s})),a.d(t,"r",(function(){return l})),a.d(t,"o",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"m",(function(){return f})),a.d(t,"b",(function(){return h})),a.d(t,"p",(function(){return g})),a.d(t,"f",(function(){return b})),a.d(t,"i",(function(){return v})),a.d(t,"k",(function(){return y})),a.d(t,"j",(function(){return O})),a.d(t,"c",(function(){return _})),a.d(t,"g",(function(){return w})),a.d(t,"q",(function(){return N}));a("99af");var r=a("365c"),n=a("b775"),o=r["b"].maintain;function i(e){return Object(n["b"])({url:o.getTabPage,method:"get",params:e})}function s(e){return Object(n["b"])({url:o.getSystemConfigPage,method:"get",params:e})}function l(e){return Object(n["b"])({url:o.updateTabById,method:"patch",data:e})}function u(e){return Object(n["b"])({url:o.updateSystemConfigById,method:"patch",data:e})}function c(e){return Object(n["b"])({url:o.addTab,method:"post",data:e})}function d(e){return Object(n["b"])({url:o.addSystemConfig,method:"post",data:e})}function m(e){return Object(n["b"])({url:"".concat(o.delTabById).concat(e),method:"delete"})}function p(e){return Object(n["b"])({url:"".concat(o.delSystemConfigById).concat(e),method:"delete"})}function f(e){return Object(n["b"])({url:o.getSystemGroupPage,method:"get",params:e})}function h(e){return Object(n["b"])({url:o.addSystemGroup,method:"post",data:e})}function g(e){return Object(n["b"])({url:o.updateSystemGroupById,method:"patch",data:e})}function b(e){return Object(n["b"])({url:"".concat(o.delSystemGroupById).concat(e),method:"delete"})}function v(e){return Object(n["b"])({url:o.getNormalGroupDataPag,method:"get",params:e})}function y(e){return Object(n["b"])({url:o.getStrategyGroupDataPag,method:"get",params:e})}function O(e){return Object(n["b"])({url:o.getProductGroupDataPag,method:"get",params:e})}function _(e){return Object(n["b"])({url:o.addSystemGroupData,method:"post",data:e})}function w(e){return Object(n["b"])({url:"".concat(o.delSystemGroupDataById).concat(e),method:"delete"})}function N(e){return Object(n["b"])({url:o.updateSystemGroupDataById,method:"patch",data:e})}}}]);