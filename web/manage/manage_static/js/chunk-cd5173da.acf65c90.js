(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd5173da"],{"2d94":function(t,e,a){"use strict";a("b3bd")},b3bd:function(t,e,a){},c818:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",[a("a-row",{staticClass:"margin-bottom-24",attrs:{gutter:10}},[a("a-col",{attrs:{span:5}},[a("a-input",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"商品名称"},model:{value:t.queryParam.productName,callback:function(e){t.$set(t.queryParam,"productName",e)},expression:"queryParam.productName"}})],1),a("a-col",{attrs:{span:3}},[a("a-select",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"状态"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}},t._l(t.status,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])})),1)],1),a("a-col",{attrs:{span:8}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),a("a-button",{staticClass:"margin-left-10",on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)],1),a("s-table",{ref:"table",attrs:{rowKey:function(t,e){return e},columns:t.columns,data:t.loadData,pagination:t.pagination},scopedSlots:t._u([{key:"user",fn:function(t){return t.userInfo?[a("s-table-user",{attrs:{info:{nickName:t.userInfo.nickName,headImg:t.userInfo.headImg}}})]:void 0}},{key:"totalNum",fn:function(e){return[t._v(" "+t._s(e.currencyNum)+" / "+t._s(e.totalNum)+" ")]}},{key:"time",fn:function(e){return[a("div",{staticClass:"startColor"},[t._v("开始："+t._s(t._f("parseTime")(e.updatedAt,"YYYY-MM-DD HH:mm")))]),a("div",{staticClass:"endColor"},[t._v("结束："+t._s(t._f("parseTime")(e.endTime,"YYYY-MM-DD HH:mm")))])]}},{key:"isRefund",fn:function(e,n){return[a("span",[t._v(t._s(0===n.isRefund?"":"已退款"))])]}},{key:"status",fn:function(e){return t._l(t.status,(function(n){return n.key===e.status?a("a-tag",{key:n.key,attrs:{color:n.color}},[t._v(t._s(n.value))]):t._e()}))}},{key:"action",fn:function(e){return[0===e.status?a("a",{on:{click:function(a){return t.handleFinish(e)}}},[t._v("完结拼团")]):t._e(),0===e.status?a("a-divider",{attrs:{type:"vertical"}}):t._e(),a("a",{on:{click:function(a){return t.handleInfo(e)}}},[t._v("拼团详情")])]}}],null,!0)}),a("a-modal",{attrs:{title:"参与人列表",width:"800px",footer:null,bodyStyle:{padding:"10px"}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"userList rank"},[a("a-table",{attrs:{rowKey:function(t){return t.id},columns:t.columnsB,"data-source":t.userInfo,size:"small",pagination:!1},scopedSlots:t._u([{key:"userInfo",fn:function(t){return[a("s-table-user",{attrs:{info:{nickName:t.nickName,headImg:t.headImg}}})]}},{key:"status",fn:function(t){return[t.status?a("a-badge",{attrs:{status:"processing",text:"已支付"}}):a("a-badge",{attrs:{status:"default",text:"未支付"}})]}}])})],1)])],1)},s=[],r=a("2af9"),o=a("4124"),i=a("17eb"),u={components:{Template:i["a"],STable:r["p"],STableUser:r["t"],preview:r["w"]},data:function(){var t=this;return{queryParam:{},visible:!1,userInfo:[],status:[{key:0,value:"进行中",color:"blue"},{key:1,value:"已完成",color:"cyan"},{key:-1,value:"失败",color:"red"}],columns:[{title:"ID",dataIndex:"id",width:90},{title:"发起人",scopedSlots:{customRender:"user"},width:250},{title:"拼团商品",dataIndex:"productSnap.name",ellipsis:!0},{title:"拼团人数",scopedSlots:{customRender:"totalNum"},width:120},{title:"有效时间",scopedSlots:{customRender:"time"},width:200},{title:"状态",scopedSlots:{customRender:"status"},width:120},{title:"退款状态",scopedSlots:{customRender:"isRefund"},width:120},{title:"操作",scopedSlots:{customRender:"action"},width:170}],columnsB:[{title:"ID",dataIndex:"id"},{title:"订单编号",dataIndex:"orderId",width:210},{title:"用户信息",scopedSlots:{customRender:"userInfo"}},{title:"支付状态",scopedSlots:{customRender:"status"}}],pagination:{pageSize:10,current:1},loadData:function(e){var a=e.pageNo,n=e.pageSize,s=t.queryParam,r=s.status,i=s.productName,u={page:a,limit:n,status:r,productName:i||void 0};return Object(o["j"])(u).then((function(t){var e=t.data.list;return{pageNo:a,pageSize:n,data:e,totalCount:0}}))}}},created:function(){},methods:{handleInfo:function(t){var e=this;Object(o["k"])(t.id).then((function(t){e.userInfo=t.data,e.visible=!0}))},handleFinish:function(t){var e=this.$refs.table,a=this.$notification.success;this.$confirm({title:"警告",content:"是否完结该订单",onOk:function(){Object(o["f"])({id:t.id}).then((function(t){a({message:"成功",description:"已完结"}),e.refresh()}))}})}}},c=u,l=(a("2d94"),a("2877")),d=Object(l["a"])(c,n,s,!1,null,"fa031e04",null);e["default"]=d.exports}}]);