(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a21ed15"],{"00d8":function(e,t){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,a=0;r<e.length;r++,a+=8)t[a>>>5]|=e[r]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],a=0;a<e.length;a+=3)for(var i=e[a]<<16|e[a+1]<<8|e[a+2],n=0;n<4;n++)8*a+6*n<=8*e.length?r.push(t.charAt(i>>>6*(3-n)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],a=0,i=0;a<e.length;i=++a%4)0!=i&&r.push((t.indexOf(e.charAt(a-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(a))>>>6-2*i);return r}};e.exports=r})()},"0151":function(e,t,r){},"044b":function(e,t){function r(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&r(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||a(e)||!!e._isBuffer)}},"06c8":function(e,t,r){},"080e":function(e,t,r){},"38a3":function(e,t,r){},"3e17":function(e,t,r){},"52b8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-spin",{attrs:{spinning:e.loading}},[r("a-card",{style:{height:"100%"},attrs:{bordered:!1,bodyStyle:{padding:"16px 15px",height:"100%"}}},[r("div",{staticClass:"account-settings-info-main",class:e.device},[r("div",[r("a-menu",{style:{width:"mobile"==e.device?"560px":"auto"},attrs:{mode:"horizontal",multiple:!1,type:"inner"},on:{click:e.onOpenChange},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}},[r("a-menu-item",{key:"BasicInfo"},[e._v("基本信息")]),r("a-menu-item",{key:"ProductInfo"},[e._v("商品图片")]),r("a-menu-item",{key:"ProductDetails"},[e._v("商品详情")]),r("a-menu-item",{key:"Other"},[e._v("其他设置")])],1)],1),e.status?r("div",{staticClass:"account-settings-info"},[r("a-form",{directives:[{name:"show",rawName:"v-show",value:"BasicInfo"===e.currentComponet,expression:"currentComponet === 'BasicInfo'"}],attrs:{form:e.basicForm}},[r("basic-info",{attrs:{form:e.basicForm,units:e.unitList,categories:e.categoryList}})],1),r("a-form",{directives:[{name:"show",rawName:"v-show",value:"ProductInfo"===e.currentComponet,expression:"currentComponet === 'ProductInfo'"}],attrs:{form:e.imgForm}},[r("product-info",{attrs:{form:e.imgForm}})],1),r("a-form",{directives:[{name:"show",rawName:"v-show",value:"ProductDetails"===e.currentComponet,expression:"currentComponet === 'ProductDetails'"}],attrs:{form:e.detailForm,layout:"inline"}},[r("product-details")],1),r("a-form",{directives:[{name:"show",rawName:"v-show",value:"Other"===e.currentComponet,expression:"currentComponet === 'Other'"}],attrs:{form:e.otherForm,layout:"inline"}},[r("other",{attrs:{form:e.otherForm}})],1)],1):e._e()])]),r("footer-tool-bar",{staticClass:"display-flex justify-content-center",style:{width:e.isSideMenu()&&e.isDesktop()?"calc(100% - "+(e.sidebarOpened?200:80)+"px)":"100%"}},[r("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("修改")]),r("a-button",{staticClass:"margin-left-10",on:{click:e.handleGoBack}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("c740"),r("a15b"),r("d81d"),r("b0c0"),r("a9e3"),r("b64b"),r("d3b7"),r("ac1f"),r("1276"),r("ade3")),o=r("5530"),s=r("88bc"),c=r.n(s),l=r("5880"),u=r("ed08"),d=r("9f60"),p=r("4c79"),m=r("66da"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"basic-info"},[r("a-form-item",{staticClass:"display-none",attrs:{label:"ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),r("a-form-item",{staticClass:"margin-bottom-0",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品名称"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入商品名称"}]}],expression:"['name', {rules: [{ required: true, message: '请输入商品名称'}]}]"}],staticClass:"product-name-item product-name border-trr-0 border-brr-0",attrs:{placeholder:"请输入商品名称"}}),r("a-form-item",{staticClass:"product-unit-item"},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["unitId",{rules:[{required:!0,message:"请选择单位"}]}],expression:"['unitId', {rules: [{ required: true, message: '请选择单位'}]}]"}],staticClass:"product-unit",attrs:{showSearch:"",filterOption:e.filterOptionUnit,placeholder:"单位"}},e._l(e.unitList,(function(t){return r("a-select-option",{key:t.id,attrs:{title:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),r("a-form-item",{attrs:{label:"副标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["subTitle"],expression:"['subTitle']"}],attrs:{placeholder:"请输入副标题"}})],1),r("a-form-item",{attrs:{label:"供应商",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["supplyName"],expression:"['supplyName']"}],staticClass:"product-unit",attrs:{showSearch:"",allowClear:"",filterOption:e.filterOptionUnit,placeholder:"请选择供应商"}},e._l(e.supplyList,(function(t){return r("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品条码"}},[r("a-input-search",{directives:[{name:"decorator",rawName:"v-decorator",value:["barCode",{rules:[{required:!0,message:"请输入商品条码"},{pattern:/^[1-9]\d*$/,message:"条码格式错误"}]}],expression:"['barCode', {rules: [{ required: true, message: '请输入商品条码'}, { pattern: /^[1-9]\\d*$/, message: '条码格式错误'}]}]"}],attrs:{placeholder:"请输入条码"},on:{search:e.searchBarCode}},[r("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v("生成")])],1)],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品分类"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId",{rules:[{required:!0,message:"请选择分类"}]}],expression:"['categoryId', {rules: [{ required: true, message: '请选择分类'}]}]"}],staticClass:"width-percent-100",attrs:{placeholder:"请选择分类",mode:"multiple"}},e._l(e.categoryTree,(function(t,a){return r("a-select-opt-group",{key:a},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.name))]),e._l(t.children,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)})),1)],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品规格"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isSku",{initialValue:0}],expression:"['isSku', { initialValue: 0 }]"}],on:{change:e.changeIsSku}},[r("a-radio",{attrs:{value:0}},[e._v("单规格")]),r("a-radio",{attrs:{value:1}},[e._v("多规格")])],1)],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所需积分"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["needScore"],expression:"['needScore']"}],attrs:{placeholder:"0",min:0}})],1),e.IsSku?r("product-sku",{attrs:{labelCol:e.labelCol,wrapperCol:{span:18}}}):e._e(),e.IsSku?e._e():r("div",{staticClass:"width-percent-100"},[r("a-form-item",{staticClass:"margin-bottom-0 price-input-group",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品价格"}},[r("div",{staticClass:"price-class width-percent-60"},[r("a-form-item",[r("a-input-group",{attrs:{compact:""}},[r("a-input",{staticClass:"placeholder",attrs:{disabled:"","default-value":"售价"}}),r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["salePrice",{rules:[{required:!0,message:"请输入商品售价"}],initialValue:0}],expression:"['salePrice', {rules: [{ required: true, message: '请输入商品售价'}], initialValue: 0}]"}],staticClass:"number-price sale-price border-tlr-0 border-blr-0",attrs:{min:0,max:1e5,precision:2,formatter:function(e){return("￥ "+e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\￥\s?|(,*)/g,"")}}})],1)],1),r("a-form-item",[r("a-input-group",{attrs:{compact:""}},[r("a-input",{staticClass:"placeholder",attrs:{disabled:"","default-value":"会员价"}}),r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["memberPrice",{rules:[{required:!0,message:"请输入商品会员价"}],initialValue:0}],expression:"['memberPrice', {rules: [{ required: true, message: '请输入商品会员价'}], initialValue: 0}]"}],staticClass:"number-price origin-price border-tlr-0 border-blr-0",attrs:{min:0,precision:2,formatter:function(e){return("￥ "+e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\￥\s?|(,*)/g,"")}}})],1)],1),r("a-form-item",[r("a-input-group",{attrs:{compact:""}},[r("a-input",{staticClass:"placeholder",attrs:{disabled:"","default-value":"成本价"}}),r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["costPrice",{rules:[{required:!0,message:"请输入商品成本价"}],initialValue:0}],expression:"['costPrice', {rules: [{ required: true, message: '请输入商品成本价'}], initialValue: 0 }]"}],staticClass:"number-price sale-price border-tlr-0 border-blr-0",attrs:{min:0,precision:2,formatter:function(e){return("￥ "+e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\￥\s?|(,*)/g,"")}}})],1)],1),r("a-form-item",[r("a-input-group",{attrs:{compact:""}},[r("a-input",{staticClass:"placeholder",attrs:{disabled:"","default-value":"原价"}}),r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["originPrice",{rules:[{required:!0,message:"请输入商品原价"}],initialValue:0}],expression:"['originPrice', {rules: [{ required: true, message: '请输入商品原价'}], initialValue: 0 }]"}],staticClass:"number-price origin-price border-tlr-0 border-blr-0",attrs:{min:0,precision:2,formatter:function(e){return("￥ "+e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\￥\s?|(,*)/g,"")}}})],1)],1)],1)]),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"库存"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["stockNumber"],expression:"['stockNumber']"}],attrs:{placeholder:"0",min:0}})],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"重量"}},[r("a-input-group",{attrs:{compact:""}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight"],expression:"['weight']"}],staticClass:"base-sales-number",attrs:{placeholder:"0",min:0,max:1e5,precision:0}}),r("a-input",{staticClass:"base-sales-number-placeholder",attrs:{placeholder:"克",disabled:""}})],1)],1)],1),e.IsFreight?r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"运费模板"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["freightId"],expression:"['freightId']"}],staticStyle:{width:"220px"},attrs:{allowClear:"",placeholder:"选择运费模板"}},e._l(e.freightList,(function(t){return r("a-select-option",{key:t.id},[e._v(e._s(t.name))])})),1)],1):e._e(),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["showOrder",{initialValue:0}],expression:"['showOrder', { initialValue: 0 }]"}],attrs:{min:0}})],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["isOnSale",{valuePropName:"checked",initialValue:!1}],expression:"['isOnSale', { valuePropName: 'checked', initialValue: false }]"}],attrs:{checkedChildren:"上架",unCheckedChildren:"下架"}})],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"推荐理由"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tips"],expression:"['tips']"}],staticClass:"display-none"}),r("div",[e._l(e.tips,(function(t,a){return[r("a-tooltip",{key:t,staticStyle:{height:"30px","line-height":"30px","font-size":"14px"}},[r("a-tag",{attrs:{closable:""},on:{close:function(){return e.handleCloseTip(t,a)}}},[e._v(e._s(t))])],1)]})),e.inputVisible?r("a-input",{ref:"tipInput",staticStyle:{width:"78px",height:"30px"},attrs:{type:"text",size:"small",value:e.inputValue},on:{change:e.handleChangeTip,blur:e.handleConfirmTip}}):r("a-tag",{staticClass:"tag-class",on:{click:e.showInput}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" 添加标签 ")],1)],2)],1)],1)},h=[],b=(r("4de4"),r("c975"),r("6062"),r("3ca3"),r("498a"),r("ddb0"),r("2909")),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-upload",{staticClass:"product-sku-upload-class",attrs:{action:e.action,headers:e.headers,"show-upload-list":!1,beforeUpload:e.onBeforeUpload,"list-type":"picture-card"},on:{change:e.onChangeUpload}},[r("div",[e.image&&"loading"!==e.image?r("img",{staticClass:"width-percent-100",attrs:{src:e.image,alt:"avatar"}}):r("div",[r("a-icon",{attrs:{type:e.image?"loading":"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.image?"文件上传中":"上传"))])],1)])])],1)},v=[],C={props:{value:{},action:{type:String,required:!0},showUploadList:{type:Boolean,default:!0}},model:{prop:"value",event:"change"},watch:{value:function(e){this.image=e}},data:function(){var e=Object(u["i"])();return{headers:e,image:""}},methods:{onBeforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("你只能上传 JPG或PNG 文件！");var r=e.size/1024/1024<2;return r||this.$message.error("图像必须小于2MB！"),t&&r},onChangeUpload:function(e){var t=e.file;e.fileList;if("uploading"===t.status&&(this.image="loading"),"done"===t.status){var r=t.response.data;this.image=r.accessUrl,this.$emit("change",r.accessUrl)}}}},w=C,y=(r("d416"),r("2877")),P=Object(y["a"])(w,g,v,!1,null,null,null),k=P.exports,O=r("da71"),I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-form",{attrs:{form:e.form}},[r("a-form-item",{attrs:{label:"选择规格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-select",{staticClass:"Product-attri-bute-select",staticStyle:{width:"300px"},attrs:{"allow-clear":"",placeholder:"请选择规格"},on:{change:e.specHandleChange}},e._l(e.list,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1),e.submitSta?r("a-button",{staticClass:"margin-left-24",attrs:{type:"primary"},on:{click:e.createspecSubmit}},[e._v("立即生成")]):e._e()],1),e._l(e.dataList,(function(t,a){return r("a-form-item",{key:a,attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:t.name}},[r("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:t.decorator,expression:"item.decorator"}]},e._l(t.value,(function(t,a){return r("a-checkbox",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)})),e.skuList.length?r("a-form-item",{attrs:{label:"批量",labelCol:{span:1},wrapperCol:{span:23}}},[r("a-table",{attrs:{size:"small",rowKey:function(e,t){return t},bordered:"",columns:e.columnB,"data-source":e.batch,pagination:!1},scopedSlots:e._u([{key:"images",fn:function(t,a){return[r("div",[r("sku-image",{attrs:{value:t,action:e.action,headers:e.headers},on:{change:function(t){return e.handlebatchImage(a,t)}}})],1)]}},{key:"originPrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"originPrice",t)}},model:{value:a.originPrice,callback:function(t){e.$set(a,"originPrice",t)},expression:"record.originPrice"}})]}},{key:"costPrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"costPrice",t)}},model:{value:a.costPrice,callback:function(t){e.$set(a,"costPrice",t)},expression:"record.costPrice"}})]}},{key:"salePrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"salePrice",t)}},model:{value:a.salePrice,callback:function(t){e.$set(a,"salePrice",t)},expression:"record.salePrice"}})]}},{key:"memberPrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"memberPrice",t)}},model:{value:a.memberPrice,callback:function(t){e.$set(a,"memberPrice",t)},expression:"record.memberPrice"}})]}},{key:"stockNumber",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"stockNumber",t)}},model:{value:a.stockNumber,callback:function(t){e.$set(a,"stockNumber",t)},expression:"record.stockNumber"}})]}},{key:"barCode",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"barCode",t)}},model:{value:a.barCode,callback:function(t){e.$set(a,"barCode",t)},expression:"record.barCode"}})]}},{key:"weight",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"weight",t)}},model:{value:a.weight,callback:function(t){e.$set(a,"weight",t)},expression:"record.weight"}})]}},{key:"action",fn:function(t,a){return[r("a",{on:{click:function(t){return e.handleBatch(a)}}},[e._v("修改")])]}}],null,!1,1473432815)})],1):e._e(),e.skuList.length?r("a-form-item",{attrs:{label:" ",labelCol:{span:1},wrapperCol:{span:23},colon:!1}},[r("a-table",{attrs:{size:"small",rowKey:function(e,t){return t},bordered:"",columns:e.columns,pagination:!1,"data-source":e.skuList},scopedSlots:e._u([{key:"images",fn:function(t,a){return[r("div",[r("a-upload",{staticClass:"product-sku-upload-class",attrs:{action:e.action,headers:e.headers,"show-upload-list":!1,"list-type":"picture-card"},on:{change:function(t){return e.onChangeUpload(a,t)}}},[r("div",[t&&"loading"!==t?r("img",{staticClass:"width-percent-100",attrs:{src:a.images,alt:"avatar"}}):r("div",[r("a-icon",{attrs:{type:e.image?"loading":"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.image?"文件上传中":"上传"))])],1)])])],1)]}},{key:"originPrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"originPrice",t)}},model:{value:a.originPrice,callback:function(t){e.$set(a,"originPrice",t)},expression:"record.originPrice"}})]}},{key:"costPrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"costPrice",t)}},model:{value:a.costPrice,callback:function(t){e.$set(a,"costPrice",t)},expression:"record.costPrice"}})]}},{key:"salePrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"salePrice",t)}},model:{value:a.salePrice,callback:function(t){e.$set(a,"salePrice",t)},expression:"record.salePrice"}})]}},{key:"memberPrice",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"memberPrice",t)}},model:{value:a.memberPrice,callback:function(t){e.$set(a,"memberPrice",t)},expression:"record.memberPrice"}})]}},{key:"stockNumber",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"stockNumber",t)}},model:{value:a.stockNumber,callback:function(t){e.$set(a,"stockNumber",t)},expression:"record.stockNumber"}})]}},{key:"barCode",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"barCode",t)}},model:{value:a.barCode,callback:function(t){e.$set(a,"barCode",t)},expression:"record.barCode"}})]}},{key:"weight",fn:function(t,a){return[r("a-input",{staticClass:"width-percent-100",on:{change:function(t){return e.handleOriginPrice(a,"weight",t)}},model:{value:a.weight,callback:function(t){e.$set(a,"weight",t)},expression:"record.weight"}})]}},{key:"action",fn:function(t,a){return[r("a",{staticClass:"color-red",on:{click:function(t){return e.handleDelSku(a)}}},[e._v("删除")])]}}],null,!1,2202454277)})],1):e._e()],2)],1)},x=[],S=(r("99af"),r("a434"),r("6821")),j=r.n(S),_=r("d6b4"),N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload"},[r("a-upload",{attrs:{action:e.action,headers:e.headers,"show-upload-list":!1,beforeUpload:e.onBeforeUpload,"list-type":"picture-card"},on:{change:e.onChangeUpload}},[r("div",[e.image?r("div",{staticClass:"tubiao"},[r("a-icon",{staticClass:"delete",attrs:{type:"delete"},on:{click:e.handleDel}})],1):e._e(),e.image&&"loading"!==e.image?r("img",{staticClass:"image",attrs:{src:e.image,alt:"avatar"}}):r("div",[r("a-icon",{attrs:{type:e.image?"loading":"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.image?"文件上传中":"上传"))])],1)])])],1)},F=[],L={props:{value:{type:String,default:""},action:{type:String,required:!0},showUploadList:{type:Boolean,default:!0}},model:{prop:"value",event:"change"},watch:{value:function(e){this.image=e}},data:function(){var e=this.value,t=Object(u["i"])();return{headers:t,image:e}},methods:{onBeforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("你只能上传 JPG或PNG 文件！");var r=e.size/1024/1024<2;return r||this.$message.error("图像必须小于2MB！"),t&&r},onChangeUpload:function(e){var t=e.file;e.fileList;if("uploading"===t.status&&(this.image="loading"),"done"===t.status){var r=t.response.data;this.image=r.accessUrl,this.$emit("change",r.accessUrl)}},handleDel:function(e){e.stopPropagation(),this.image="",this.$emit("change","")}}},B=L,V=(r("7200"),Object(y["a"])(B,N,F,!1,null,null,null)),$=V.exports,T=r("365c"),U=r("17eb"),R={name:"ProductSku",components:{Template:U["a"],UploadImage:$,skuImage:k},props:{labelCol:{type:Object,default:function(){}},wrapperCol:{type:Object,default:function(){}}},data:function(){var e=Object(u["i"])(),t=this.$store.getters.product;return{product:t,images:null,submitSta:!1,headers:e,action:T["b"].uploadImgs.addProductImage,config:{visibe:!1,title:"",specForm:null,record:{},index:null},batch:[{images:null,originPrice:null,costPrice:null,salePrice:null,memberPrice:null,stockNumber:null,barCode:null,weight:null}],specListClVal:[],list:[],data:[],form:this.$form.createForm(this),attrList:{},specList:{},skuList:[],dataList:[],columns:[],columnB:[{title:"商品图片",dataIndex:"images",scopedSlots:{customRender:"images"},width:80},{title:"售价",dataIndex:"salePrice",scopedSlots:{customRender:"salePrice"}},{title:"会员价",dataIndex:"memberPrice",scopedSlots:{customRender:"memberPrice"}},{title:"成本价",dataIndex:"costPrice",scopedSlots:{customRender:"costPrice"}},{title:"商品原价",dataIndex:"originPrice",scopedSlots:{customRender:"originPrice"}},{title:"库存",dataIndex:"stockNumber",scopedSlots:{customRender:"stockNumber"}},{title:"重量",dataIndex:"weight",scopedSlots:{customRender:"weight"}},{title:"操作",scopedSlots:{customRender:"action"},width:50}],title:[],productSpec:{specList:[]}}},created:function(){var e=this;Object(p["m"])().then((function(t){e.list=t.data})),this.getHandle()},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapActions"])(["setProductInfo"])),{},{onChangeUpload:function(e,t){var r=t.file;t.fileList;if("uploading"===r.status&&(this.image="loading"),"done"===r.status){var a=r.response.data;this.image=a.accessUrl,e.images=a.accessUrl}},handlebatchImage:function(e,t){e.images=t},handleBatch:function(e){this.skuList.map((function(t){var r=Object.keys(t);r.map((function(r){e[r]&&(t[r]=e[r])}))}))},handleOriginPrice:function(e,t,r){this.setProductInfo({skuList:this.skuList})},getHandle:function(){this.skuList=this.product.skuList,null!==this.product.skuList&&(this.columns=[{title:"商品图片",dataIndex:"images",scopedSlots:{customRender:"images"},width:100},{title:"规格镜像",dataIndex:"specSnap",scopedSlots:{customRender:"specSnap"},ellipsis:!0},{title:"售价",dataIndex:"salePrice",scopedSlots:{customRender:"salePrice"}},{title:"会员价",dataIndex:"memberPrice",scopedSlots:{customRender:"memberPrice"}},{title:"成本价",dataIndex:"costPrice",scopedSlots:{customRender:"costPrice"}},{title:"商品原价",dataIndex:"originPrice",scopedSlots:{customRender:"originPrice"}},{title:"库存",dataIndex:"stockNumber",scopedSlots:{customRender:"stockNumber"}},{title:"商品条码",dataIndex:"barCode",scopedSlots:{customRender:"barCode"},width:"18%"},{title:"重量",dataIndex:"weight",scopedSlots:{customRender:"weight"}},{title:"操作",scopedSlots:{customRender:"action"},width:50}])},specHandleChange:function(e){this.index=e,this.submitSta=!0,this.specSubmit()},specSubmit:function(){var e=this;Object(p["l"])(this.index).then((function(t){var r=t.data.specList,a={},i={},n=r.map((function(e,t){var r=j()(t);return i[r]=e.name,e.value=e.value.split(",").map((function(e,t){var i=j()("".concat(r,"-").concat(t));return a[i]=e,{id:i,name:e}})),e.decorator=[r],e}));e.specList=i,e.attrList=a,e.dataList=n}))},createspecSubmit:function(){var e=this,t=this.form.validateFields,r=this.attrList,a=this.specList,i=this.dataList,n=i.map((function(e){return e.name}));t((function(t,i){if(!t){var o=[],s=Object.keys(i).filter((function(e){return i[e]&&i[e].length})),c=s.map((function(e){o.push(i[e]);var t=i[e].map((function(e){return r[e]})).join(",");return t}));for(var l in s)e.title.push({name:n[l],value:c[l]});e.productSpec.specList=e.title;var d=Object(u["f"])(o),p=d.map((function(e,t){var a=new _["a"],i=Object(u["e"])()+(100+t),n=e.map((function(e){return r[e]})).join(","),o=a.setAttributes({barCode:i,specSnap:n}).toObject();return o})),m=[{title:"商品图片",dataIndex:"images",scopedSlots:{customRender:"images"},width:80}];s.map((function(e,t){var r={};r.title=a[e],r.customRender=function(e,r,a){var i=e.specSnap.split(",");return i[t]},m.push(r)})),m.push({title:"售价",dataIndex:"salePrice",scopedSlots:{customRender:"salePrice"}},{title:"会员价",dataIndex:"memberPrice",scopedSlots:{customRender:"memberPrice"}},{title:"成本价",dataIndex:"costPrice",scopedSlots:{customRender:"costPrice"}},{title:"商品原价",dataIndex:"originPrice",scopedSlots:{customRender:"originPrice"}},{title:"库存",dataIndex:"stockNumber",scopedSlots:{customRender:"stockNumber"}},{title:"商品条码",dataIndex:"barCode",scopedSlots:{customRender:"barCode"},width:"22%"},{title:"操作",scopedSlots:{customRender:"action"},width:100}),e.columns=m,e.skuList=p,e.setProductInfo({skuList:p,productSpec:e.productSpec})}}))},handleChangeImage:function(e){this.config.specForm.setFieldsValue({images:e})},handleConsole:function(e){var t=this;this.images=null,this.config.specForm=this.$form.createForm(this),new Promise((function(e){setTimeout(e,0)})).then((function(){t.images=e.images,t.config.specForm.setFieldsValue(c()(e,["originPrice","costPrice","salePrice","memberPrice","barCode","stockNumber","images"]))})),this.config.index=this.skuList.indexOf(e),this.config.record=e,this.config.visibe=!0,this.config.title=e.specSnap.split(",").join("-")+"-编辑"},handleDelSku:function(e){var t=this.skuList;t.splice(t.indexOf(e),1),this.skuList=t}})},q=R,D=(r("e4a3"),Object(y["a"])(q,I,x,!1,null,"bb2a4ddc",null)),A=D.exports,z=r("8cd7"),E={name:"BasicInfo",components:{ProductSku:A,skuImage:k},props:{form:{type:Object,required:function(){}},units:{type:Array,required:function(){return[]}},categories:{type:Array,required:function(){return[]}}},data:function(e){var t=this.$store.getters.product;return{product:t,labelCol:{span:3},wrapperCol:{span:14},unitList:this.units,categoryTree:Object(u["u"])(this.categories),IsSku:!1,IsFreight:!0,freightList:[],tips:[],inputVisible:!1,inputValue:"",supplyList:[]}},created:function(){var e=this;Object(p["m"])().then((function(t){e.list=t.data})),this.getProduct(),this.getFreightTemplate(),this.getSupplier()},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapActions"])(["setProductInfo"])),{},{getSupplier:function(){var e=this;Object(z["c"])({title:"product",son:"supplier"}).then((function(t){var r=t.data,a=r.groupValue.list;e.supplyList=a.map((function(e){return e.value["name"]["value"]}))}))},getProduct:function(){this.IsSku=this.product.isSku,this.tips=this.product.tips||[]},getFreightTemplate:function(){var e=this;Object(O["c"])().then((function(t){e.freightList=t.data}))},changeIsSku:function(e){this.IsSku=Boolean(e.target.value)},changeType:function(e){"VIRTUAL"===e.target.value?this.IsFreight=!1:this.IsFreight=!0},handleChangeTip:function(e){this.inputValue=e.target.value},handleConfirmTip:function(){var e=this.tips,t=this.inputValue;""!==t.trim()&&e.push(t),this.tips=Object(b["a"])(new Set(e)),this.inputValue="",this.inputVisible=!1,this.form.setFieldsValue({tips:this.tips.join(",")})},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.tipInput.focus()}))},handleCloseTip:function(e,t){this.tips=this.tips.filter((function(t){return t!==e})),this.form.setFieldsValue({tips:this.tips.join(",")})},filterOptionUnit:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},searchBarCode:function(){this.form.setFieldsValue({barCode:Object(u["e"])()})}})},K=E,M=(r("f985"),Object(y["a"])(K,f,h,!1,null,"65807229",null)),G=M.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-info"},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{md:24,lg:18}},[r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品封面图",extra:"（注：商品封面图片尺寸为750×420）"}},[r("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["coverImg",{rules:[{required:!0,message:"请上传封面图"}]}],expression:"['coverImg', { rules: [{ required: true, message: '请上传封面图' }] }]"}]})],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品图片",extra:"（注：商品图片尺寸为750×750）"}},[r("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["images",{rules:[{required:!0,message:"请上传商品图片"}]}],expression:"['images', { rules: [{ required: true, message: '请上传商品图片' }] }]"}],attrs:{multiple:"",max:7}})],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品分享图",extra:"（注：商品分享图尺寸为750×1334）"}},[r("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["shareImg"],expression:"['shareImg']"}]})],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"视频封面图",extra:"（注：视频封面图尺寸为750×750(必须上传封面图,视频才能正常显示)）"}},[r("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["videoCoverImg"],expression:"['videoCoverImg']"}]})],1),r("a-form-item",{staticClass:"margin-bottom-0",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"商品视频"}},[r("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["video"],expression:"['video']"}],attrs:{type:"videos"}})],1)],1)],1)],1)},J=[],W={name:"ProductInfo",components:{UploadImage:$},props:{form:{type:Object,required:function(){}}},data:function(){var e=Object(u["i"])(),t=this.$store.getters.product;return{product:t,labelCol:{span:5},wrapperCol:{span:19},buttonCol:{wrapperCol:{xs:{span:24},sm:{span:24,offset:5}}},temp:{video:null,images:[],coverImg:null,description:"",videoCoverImg:null,ossClientAdd:[],ossClientDel:[],shareImg:""},productInfo:{},loadings:{videoCoverImg:!1},previewVisible:!1,previewImage:"",previewCoverImg:"",action:T["b"].uploadImgs.addProductImage,actionB:T["b"].uploadImgs.addProductVideo,headers:e,data:[]}},created:function(){this.getProduct()},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapActions"])(["setProductInfo"])),{},{getProduct:function(){this.temp.coverImg=this.product.coverImg,this.temp.shareImg=this.product.shareImg,this.temp.images=this.product.images,this.temp.videoCoverImg=this.product.videoCoverImg,this.temp.video=this.product.video},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("你只能上传 JPG或PNG 文件！");var r=e.size/1024/1024<2;return r||this.$message.error("图像必须小于2MB！"),t&&r},beforeUploadVideo:function(e){var t="video/mp4"===e.type;t||this.$message.error("你只能上传 mp4 文件！");var r=e.size/1024/1024<10;return r||this.$message.error("图像必须小于10MB！"),t&&r},handleViewChange:function(e){var t=e.file,r=e.fileList;if("error"===t.status&&Object(u["q"])(t),t.status,"done"===t.status){var a=t.response.data;r=r.map((function(e){return void 0!==e.status?{name:e.name,uid:e.uid,url:a.accessUrl,key:a.key}:e}))}},handleChangeCoverImg:function(e){this.form.setFieldsValue({coverImg:e})},handleChangeShareImg:function(e){this.form.setFieldsValue({shareImg:e})},handleChangeVideoCover:function(e){this.form.setFieldsValue({videoCoverImg:e})},handleVideoChange:function(e){var t=e.file;e.fileList;if("error"===t.status&&Object(u["q"])(t),"done"===t.status){var r=t.response.data,a=r.accessUrl,i=r.key;this.temp.video={key:i,url:a},this.form.setFieldsValue({video:a})}},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0}})},Z=W,Q=(r("8b61"),Object(y["a"])(Z,H,J,!1,null,"c9538cec",null)),X=Q.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-item",{attrs:{label:"商品详情"}},[r("tinymce",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{initialValue:" "}],expression:"['description', { initialValue: ' ' }]"}],ref:"tinymce",attrs:{config:{height:800}}})],1)},ee=[],te=r("8256"),re={name:"ProductDetails",components:{Tinymce:te["a"]},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},methods:{}},ae=re,ie=Object(y["a"])(ae,Y,ee,!1,null,null,null),ne=ie.exports,oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"boss_box"},[r("a-form-item",{staticClass:"width-percent-32",attrs:{label:"支付类型"}},[r("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["payType",{initialValue:["wx","alipay"]}],expression:"['payType', { initialValue: ['wx', 'alipay'] }]"}]},[r("a-checkbox",{attrs:{value:"wx"}},[e._v("微信")]),r("a-checkbox",{attrs:{value:"alipay"}},[e._v("支付宝")]),r("a-checkbox",{attrs:{value:"after"}},[e._v("货到付款")])],1)],1),"SCORE"!==e.type?r("a-form-item",{staticClass:"width-percent-32",attrs:{label:"是否可使用优惠券"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["supportCoupon",{initialValue:1}],expression:"['supportCoupon', { initialValue: 1 }]"}]},[r("a-radio",{attrs:{value:1}},[e._v("是")]),r("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1):e._e(),"SCORE"!==e.type?r("a-form-item",{staticClass:"width-percent-32",attrs:{label:"是否可使用积分抵扣"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["supportScore",{initialValue:1}],expression:"['supportScore', { initialValue: 1 }]"}]},[r("a-radio",{attrs:{value:1}},[e._v("是")]),r("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1):e._e(),r("a-form-item",{staticClass:"width-percent-32",attrs:{label:"喜欢人数"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeCount"],expression:"['storeCount']"}],staticClass:"width_260",attrs:{min:0,placeholder:"0"}})],1),"SCORE"!==e.type?r("a-form-item",{staticClass:"width-percent-32",attrs:{label:"赠送积分"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["productScore"],expression:"['productScore']"}],staticClass:"width_260",attrs:{min:0,precision:0,placeholder:"0"}})],1):e._e(),r("a-form-item",{staticClass:"width-percent-32",attrs:{label:"虚拟销量"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["baseSalesNumber"],expression:"['baseSalesNumber']"}],staticClass:"width_260",attrs:{min:0,precision:0,placeholder:"0"}})],1),r("a-form-item",{staticClass:"width-percent-32",attrs:{label:"好评率%"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodRate"],expression:"['goodRate']"}],staticClass:"width_260",attrs:{min:0,placeholder:"0"}})],1)],1)},se=[],ce=r("0644"),le=r.n(ce),ue=r("a59b"),de=r.n(ue),pe=r("4416"),me=r.n(pe),fe=r("5f5f"),he={name:"Other",props:{form:{type:Object,required:function(){}}},data:function(){var e=this.$route.params.type;return{product:this.$store.getters.product,type:e,isFreight:!1,labelCol:{span:3},wrapperCol:{span:14},id:0,Freight:[],isDistribute:!1,columns:[{title:"等级",dataIndex:"levelName",width:150,ellipsis:!0},{title:"首推",dataIndex:"first",scopedSlots:{customRender:"first"}},{title:"间推",dataIndex:"second",scopedSlots:{customRender:"second"}}],dataList:[]}},created:function(){var e=this;Object(fe["e"])().then((function(t){var r=e.product,a=[],i=r.distributeConfig||[];t.data.map((function(e){a[e.id]=i[e.id]?i[e.id]:[0,0]})),r.distributeConfig=a,e.dataList=t.data.map((function(e,t){return e={key:e.id,levelName:e.levelName},r.distributeConfig?(e.first=de()(r.distributeConfig[t]),e.second=me()(r.distributeConfig[t])):(e.first=0,e.second=0),e}))})),this.isDistribute=le()(Boolean(this.product.isDistribute))},methods:{handleDistribute:function(e){this.isDistribute=Boolean(e.target.value)},handleFirst:function(e,t){this.product.distributeConfig[e][0]=t},handleSecond:function(e,t){this.product.distributeConfig[e][1]=t}}},be=he,ge=(r("e3e7"),Object(y["a"])(be,oe,se,!1,null,"18fb2042",null)),ve=ge.exports,Ce=r("ac0d"),we=r("5a70"),ye={name:"ProductAdd",components:{BasicInfo:G,FooterToolBar:we["a"],ProductInfo:X,ProductDetails:ne,Other:ve},mixins:[Ce["b"],Ce["c"]],data:function(){var e=this.$route.params.id,t=this.$store.getters.product,r=this.$route.params.type;return{id:e,product:t,type:r,status:!1,currentComponet:"BasicInfo",selectedKeys:["BasicInfo"],categoryList:[],unitList:[],basicForm:null,imgForm:null,otherForm:null,detailForm:null,loading:!0,textMap:{BasicInfo:"基本信息",ProductInfo:"商品图片",ProductDetails:"商品详情",Other:"其他设置"}}},created:function(){var e=this;this.getUnitList(),this.getCategoryList(),setTimeout((function(){e.getProductById()}),500),this.createForm()},destroyed:function(){this.clearProductInfo()},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapActions"])(["setProductInfo","clearProductInfo"])),{},{getProductById:function(){var e=this,t=this.$store.getters.product;Object(p["j"])(this.id).then((function(r){var a=r.data;e.setProductInfo(a),t.id&&(e.status=!0),new Promise((function(e){setTimeout(e,0)})).then((function(){a.isOnSale=Boolean(a.isOnSale),a.tips&&(a.tips=a.tips.join(",")),0===a.isSku&&(a.salePrice=Number(a.salePrice),a.memberPrice=Number(a.memberPrice),a.costPrice=Number(a.costPrice),a.originPrice=Number(a.originPrice),e.basicForm.setFieldsValue(c()(a,["id","supplyName","name","subTitle","unitId","barCode","categoryId","isSku","needScore","freightId","showOrder","isOnSale","tips","salePrice","memberPrice","costPrice","originPrice","stockNumber","weight"]))),1===a.isSku&&e.basicForm.setFieldsValue(c()(a,["id","supplyName","name","unitId","subTitle","barCode","categoryId","isSku","needScore","freightId","showOrder","isOnSale","tips"])),e.imgForm.setFieldsValue(c()(a,["images","coverImg","shareImg","video","videoCoverImg"])),e.detailForm.setFieldsValue(c()(a,["description"])),e.otherForm.setFieldsValue(c()(a,["payType","supportCoupon","supportScore","storeCount","productScore","goodRate","baseSalesNumber"]))})),e.loading=!1}))},getUploadFormat:function(e,t){return{uid:"vc-uid-".concat(e),url:t,name:"vc-name-".concat(e),key:"vc-key-".concat(e),status:"done"}},onOpenChange:function(e){var t=e.key;this.currentComponet=t},getUnitList:function(){var e=this;Object(d["c"])().then((function(t){e.unitList=t.data.map((function(e){var t=e.id,r=e.name;return{id:t,name:r}}))}))},getCategoryList:function(){var e=this;Object(m["e"])().then((function(t){e.categoryList=t.data,e.categoryTree=Object(u["u"])(t.data)}))},createForm:function(){var e=this;this.basicForm=this.$form.createForm(this,{onFieldsChange:function(t,r){Object.keys(r).map((function(t){var a=r[t]["value"],i=Object(n["a"])({},t,a);e.setProductInfo(i)}))}}),this.imgForm=this.$form.createForm(this,{onFieldsChange:function(t,r){Object.keys(r).map((function(t){var a=r[t]["value"],i=Object(n["a"])({},t,a);e.setProductInfo(i)}))}}),this.detailForm=this.$form.createForm(this,{onFieldsChange:function(t,r){Object.keys(r).map((function(t){var a=r[t]["value"],i=Object(n["a"])({},t,a);e.setProductInfo(i)}))}}),this.otherForm=this.$form.createForm(this,{onFieldsChange:function(t,r){Object.keys(r).map((function(t){var a=r[t]["value"],i=Object(n["a"])({},t,a);e.setProductInfo(i)}))}});var t=this.$route.params.type;this.setProductInfo({saleStrategy:t})},handleSubmit:function(){var e=this,t=this.basicForm,r=this.unitList,a=this.detailForm,i=this.imgForm,n=this.otherForm,s=this.categoryList,c=this.$store.getters.product,l=this.$notification.success,u=!1;t.validateFields((function(t,a){if(t)e.selectedKeys=["BasicInfo"],e.currentComponet="BasicInfo",u=!0;else{var i=Object.keys(a);i.map((function(t){if("unitId"===t&&(a.unitSnap=r[r.findIndex((function(e){return e.id===a[t]}))]),"categoryId"===t){var i=a[t].map((function(e){var t=s[s.findIndex((function(t){return t.id===e}))];return{id:e,name:t.name}}));a["categoryList"]=i}if("isSku"===t&&1===a[t]){var n={salePrice:0,costPrice:0,originPrice:0,memberPrice:0,stockNumber:0,weight:0};e.setProductInfo(Object(o["a"])({},n))}"isSku"===t&&0===a[t]&&e.setProductInfo({skuList:void 0}),"freightId"===t&&(void 0===a[t]?a["isFreight"]=0:a["isFreight"]=1),"isOnSale"===t&&(a[t]=Number(a[t])),"tips"===t&&a[t]&&(a[t]=a[t].split(","))})),e.setProductInfo(a)}})),a.validateFields((function(t,r){t?(e.selectedKeys=["ProductDetails"],e.currentComponet="ProductDetails",u=!0):e.setProductInfo(r)})),i.validateFields((function(t,r){t?(e.selectedKeys=["ProductInfo"],e.currentComponet="ProductInfo",u=!0):e.setProductInfo(r)})),n.validateFields((function(t,r){if(t)e.selectedKeys=["Other"],e.currentComponet="Other",u=!0;else{var a=Object.keys(r);a.map((function(t){"isDistribute"===t&&0===r[t]&&e.setProductInfo({distributeConfig:void 0})})),e.setProductInfo(r)}})),u||("SCORE"===this.type&&(c.supportCoupon=0,c.supportScore=0,c.isDistribute=0),Object(p["q"])(c).then((function(t){l({message:"成功",description:"修改成功"}),e.$router.go(-1)})))},handleGoBack:function(){this.$router.go(-1)}})},Pe=ye,ke=(r("e9a1"),r("bb49"),Object(y["a"])(Pe,a,i,!1,null,"90192b52",null));t["default"]=ke.exports},"59c8":function(e,t,r){},"5cb7":function(e,t,r){},"5f5f":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d}));r("99af");var a=r("365c"),i=r("b775"),n=a["b"].distribute;function o(e){return Object(i["b"])({url:n.getDistributePage,method:"get",params:e})}function s(e){return Object(i["b"])({url:n.distributeUserAdd,method:"post",data:e})}function c(e){return Object(i["b"])({url:"".concat(n.getPartnerPage,"?parentId=").concat(e),method:"get"})}function l(e){return Object(i["b"])({url:"".concat(n.distributeDelById).concat(e),method:"delete"})}function u(e){return Object(i["b"])({url:n.getUserLevelList,method:"get",params:e})}function d(e){return Object(i["b"])({url:n.updateUserLevelById,method:"patch",data:e})}},6821:function(e,t,r){(function(){var t=r("00d8"),a=r("9a634").utf8,i=r("044b"),n=r("9a634").bin,o=function(e,r){e.constructor==String?e=r&&"binary"===r.encoding?n.stringToBytes(e):a.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var s=t.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,p=271733878,m=0;m<s.length;m++)s[m]=16711935&(s[m]<<8|s[m]>>>24)|4278255360&(s[m]<<24|s[m]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var f=o._ff,h=o._gg,b=o._hh,g=o._ii;for(m=0;m<s.length;m+=16){var v=l,C=u,w=d,y=p;l=f(l,u,d,p,s[m+0],7,-680876936),p=f(p,l,u,d,s[m+1],12,-389564586),d=f(d,p,l,u,s[m+2],17,606105819),u=f(u,d,p,l,s[m+3],22,-1044525330),l=f(l,u,d,p,s[m+4],7,-176418897),p=f(p,l,u,d,s[m+5],12,1200080426),d=f(d,p,l,u,s[m+6],17,-1473231341),u=f(u,d,p,l,s[m+7],22,-45705983),l=f(l,u,d,p,s[m+8],7,1770035416),p=f(p,l,u,d,s[m+9],12,-1958414417),d=f(d,p,l,u,s[m+10],17,-42063),u=f(u,d,p,l,s[m+11],22,-1990404162),l=f(l,u,d,p,s[m+12],7,1804603682),p=f(p,l,u,d,s[m+13],12,-40341101),d=f(d,p,l,u,s[m+14],17,-1502002290),u=f(u,d,p,l,s[m+15],22,1236535329),l=h(l,u,d,p,s[m+1],5,-165796510),p=h(p,l,u,d,s[m+6],9,-1069501632),d=h(d,p,l,u,s[m+11],14,643717713),u=h(u,d,p,l,s[m+0],20,-373897302),l=h(l,u,d,p,s[m+5],5,-701558691),p=h(p,l,u,d,s[m+10],9,38016083),d=h(d,p,l,u,s[m+15],14,-660478335),u=h(u,d,p,l,s[m+4],20,-405537848),l=h(l,u,d,p,s[m+9],5,568446438),p=h(p,l,u,d,s[m+14],9,-1019803690),d=h(d,p,l,u,s[m+3],14,-187363961),u=h(u,d,p,l,s[m+8],20,1163531501),l=h(l,u,d,p,s[m+13],5,-1444681467),p=h(p,l,u,d,s[m+2],9,-51403784),d=h(d,p,l,u,s[m+7],14,1735328473),u=h(u,d,p,l,s[m+12],20,-1926607734),l=b(l,u,d,p,s[m+5],4,-378558),p=b(p,l,u,d,s[m+8],11,-2022574463),d=b(d,p,l,u,s[m+11],16,1839030562),u=b(u,d,p,l,s[m+14],23,-35309556),l=b(l,u,d,p,s[m+1],4,-1530992060),p=b(p,l,u,d,s[m+4],11,1272893353),d=b(d,p,l,u,s[m+7],16,-155497632),u=b(u,d,p,l,s[m+10],23,-1094730640),l=b(l,u,d,p,s[m+13],4,681279174),p=b(p,l,u,d,s[m+0],11,-358537222),d=b(d,p,l,u,s[m+3],16,-722521979),u=b(u,d,p,l,s[m+6],23,76029189),l=b(l,u,d,p,s[m+9],4,-640364487),p=b(p,l,u,d,s[m+12],11,-421815835),d=b(d,p,l,u,s[m+15],16,530742520),u=b(u,d,p,l,s[m+2],23,-995338651),l=g(l,u,d,p,s[m+0],6,-198630844),p=g(p,l,u,d,s[m+7],10,1126891415),d=g(d,p,l,u,s[m+14],15,-1416354905),u=g(u,d,p,l,s[m+5],21,-57434055),l=g(l,u,d,p,s[m+12],6,1700485571),p=g(p,l,u,d,s[m+3],10,-1894986606),d=g(d,p,l,u,s[m+10],15,-1051523),u=g(u,d,p,l,s[m+1],21,-2054922799),l=g(l,u,d,p,s[m+8],6,1873313359),p=g(p,l,u,d,s[m+15],10,-30611744),d=g(d,p,l,u,s[m+6],15,-1560198380),u=g(u,d,p,l,s[m+13],21,1309151649),l=g(l,u,d,p,s[m+4],6,-145523070),p=g(p,l,u,d,s[m+11],10,-1120210379),d=g(d,p,l,u,s[m+2],15,718787259),u=g(u,d,p,l,s[m+9],21,-343485551),l=l+v>>>0,u=u+C>>>0,d=d+w>>>0,p=p+y>>>0}return t.endian([l,u,d,p])};o._ff=function(e,t,r,a,i,n,o){var s=e+(t&r|~t&a)+(i>>>0)+o;return(s<<n|s>>>32-n)+t},o._gg=function(e,t,r,a,i,n,o){var s=e+(t&a|r&~a)+(i>>>0)+o;return(s<<n|s>>>32-n)+t},o._hh=function(e,t,r,a,i,n,o){var s=e+(t^r^a)+(i>>>0)+o;return(s<<n|s>>>32-n)+t},o._ii=function(e,t,r,a,i,n,o){var s=e+(r^(t|~a))+(i>>>0)+o;return(s<<n|s>>>32-n)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var a=t.wordsToBytes(o(e,r));return r&&r.asBytes?a:r&&r.asString?n.bytesToString(a):t.bytesToHex(a)}})()},"69fb":function(e,t,r){},7200:function(e,t,r){"use strict";r("5cb7")},"8b61":function(e,t,r){"use strict";r("69fb")},"9a634":function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},"9f60":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return l}));var a=r("365c"),i=r("b775");function n(e){return Object(i["b"])({url:a["b"].units.getUnitList,method:"get",params:e})}function o(e){return Object(i["b"])({url:a["b"].units.getUnitPage,method:"get",params:e})}function s(e){return Object(i["b"])({url:a["b"].units.addUnit,method:"post",data:e})}function c(e){return Object(i["b"])({url:a["b"].units.updateUnit,method:"patch",data:e})}function l(e){return Object(i["b"])({url:a["b"].units.deleteUnit+e,method:"delete"})}},bb49:function(e,t,r){"use strict";r("38a3")},d416:function(e,t,r){"use strict";r("080e")},d6b4:function(e,t,r){"use strict";var a=r("d4ec"),i=r("262e"),n=r("2caf"),o=(r("4ec9"),r("b64b"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("b85c")),s=r("2909"),c=r("53ca"),l=r("bee2"),u=r("2ef0"),d=function(){function e(){Object(a["a"])(this,e)}return Object(l["a"])(e,[{key:"setAttributes",value:function(e){var t=this,r=new Map,a=this.attributes();for(var i in a)r.set(a[i],i);for(var n in e)if(e.hasOwnProperty(n)&&r.get(n)){var o=this.getType;switch(o(t[n])){case"boolean":t[n]=!!e[n];break;case"string":t[n]="string"===o(e[n])?e[n]:t[n];break;case"object":t[n]="object"===o(e[n])?e[n]:t[n];break;case"array":t[n]="array"===o(e[n])?e[n]:t[n];break;case"number":e[n]=Object(u["toNumber"])(e[n]),t[n]="number"===o(e[n])?e[n]:t[n];break;default:t[n]=e[n]}}return t}},{key:"toObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={},a=this,i=a.resolveFields(0===e.length?null:Object(u["zipObject"])(e,e),0===t.length?null:Object(u["zipObject"])(t,t));for(var n in e){var o=Object(c["a"])(e[n]);if("string"===o)r[n]=a[e[n]];else if("function"===o){var s=e[n].apply();null!==s&&(r[n]=s)}}for(var l in i)if(i.hasOwnProperty(l)){var d=Object(c["a"])(i[l]);if("string"===d){if(a.hasOwnProperty(i[l])&&"number"===typeof a[i[l]]&&isNaN(a[i[l]]))continue;r[l]=a[i[l]]}else if("function"===d){var p=i[l].apply();null!==p&&(r[l]=p)}}return r}},{key:"resolveFields",value:function(e){var t={},r=this.fields();for(var a in r)(r.hasOwnProperty(a)&&null===e||e.hasOwnProperty(a))&&(t[a]=r[a]);return t}},{key:"fields",value:function(){var e=this.attributes();return Object(u["zipObject"])(e,e)}},{key:"attributes",value:function(){var e=this,t=[];return t.push.apply(t,Object(s["a"])(Object.keys(e))),t}},{key:"delFields",value:function(e,t){var r,a=Object(o["a"])(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(n){a.e(n)}finally{a.f()}}},{key:"getType",value:function(e){var t=Object.prototype.toString.apply(e);switch(t){case"[object String]":t="string";break;case"[object Number]":t="number";break;case"[object Boolean]":t="boolean";break;case"[object Undefined]":t="undefined";break;case"[object Null]":t="null";break;case"[object Object]":t="object";break;case"[object Array]":t="array";break;case"[object Function]":t="function";break}return t}}]),e}(),p=function(e){Object(i["a"])(r,e);var t=Object(n["a"])(r);function r(){var e;return Object(a["a"])(this,r),e=t.call(this),e.images="",e.barCode="",e.originPrice=0,e.costPrice=0,e.memberPrice=0,e.salePrice=0,e.stockNumber=0,e.specSnap="",e.weight=0,e}return r}(d);t["a"]=p},da71:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"f",(function(){return d}));var a=r("365c"),i=r("b775"),n=a["b"].config;function o(e){return Object(i["b"])({url:n.getFreightTemplateList,method:"get",params:e})}function s(e){return Object(i["b"])({url:n.addFreightTemplate,method:"post",data:e})}function c(e){return Object(i["b"])({url:n.delFreightTemplateById+e,method:"delete"})}function l(e){return Object(i["b"])({url:n.updateFreightTemplateById,method:"patch",data:e})}function u(e){return Object(i["b"])({url:n.getTaskPage,method:"get",params:e})}function d(e){return Object(i["b"])({url:n.updateTaskPage,method:"patch",data:e})}},e3e7:function(e,t,r){"use strict";r("0151")},e4a3:function(e,t,r){"use strict";r("59c8")},e9a1:function(e,t,r){"use strict";r("06c8")},f985:function(e,t,r){"use strict";r("3e17")}}]);