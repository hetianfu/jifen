(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc4478da"],{"8d1f":function(e,t,n){"use strict";n("ffe0")},eeee:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role-permission"},[e.loading?n("div",{staticClass:"example"},[n("a-spin")],1):e._e(),n("a-card",{staticClass:"role-card",style:{height:"100%"},attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{md:24}},e._l(e.menuList,(function(t,a){return n("div",{key:a,staticClass:"margin-bottom-24 width-percent-100"},[n("a-divider",{attrs:{orientation:"left"}},[n("span",{staticClass:"font-size-twenty"},[e._v(" "+e._s(t.meta.title)+" ")])]),e._l(t.children,(function(t,a){return n("a-row",{key:a,staticClass:"margin-top-24",attrs:{gutter:16}},[n("a-col",{attrs:{xl:2,lg:24}}),n("a-col",{attrs:{xl:3,lg:24}},[e._v(" "+e._s(t.meta.title)+"： ")]),n("a-col",{attrs:{xl:18,lg:24}},[t.children?n("a-checkbox",{staticClass:"margin-right-8",attrs:{indeterminate:t.indeterminate,checked:t.checked},on:{change:function(n){return e.changeAll(n,t)}}},[e._v("全选 ")]):e._e(),t.children?n("a-checkbox-group",{attrs:{options:t.children},on:{change:function(n){return e.changeOne(n,t)}},model:{value:t.meta.btnSelected,callback:function(n){e.$set(t.meta,"btnSelected",n)},expression:"childrenItem.meta.btnSelected"}}):e._e()],1)],1)}))],2)})),0)],1)],1),n("footer-tool-bar",{staticClass:"display-flex justify-content-center",style:{width:e.isSideMenu()&&e.isDesktop()?"calc(100% - "+(e.sidebarOpened?256:80)+"px)":"100%"}},[n("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")]),n("a-button",{staticClass:"margin-left-10",on:{click:e.handleGoBack}},[e._v("取消")])],1)],1)},i=[],c=(n("4160"),n("a630"),n("b0c0"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("2909")),r=(n("96cf"),n("1da1")),s=n("ac0d"),d=n("ed08"),l=n("0feb"),o=n("5a70"),u={name:"RolePermission",mixins:[s["b"],s["c"]],components:{FooterToolBar:o["a"]},data:function(){return{mdl:{},roles:[],permissions:[],menuList:[],btnList:[],getBtnList:[],btnPermissionArr:[],indeterminate:!1,title:"",selected:[],arrTemp:[],loading:!0,id:0}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["f"])().then((function(t){e.arrTemp=Object(c["a"])(t.data);var n=t.data;n.forEach((function(e){0===e.isMenu&&(e.label=e.meta.title,e.value=e.id),e.meta.btnSelected=[],e.indeterminate=!1,e.checked=!1})),e.menuList=Object(d["u"])(t.data)}));case 2:e.getRoleInfo();case 3:case"end":return t.stop()}}),t)})))()},methods:{getRoleInfo:function(){var e=this,t=this.$route.params.id;Object(l["h"])(t).then((function(t){e.title=t.data,e.id=t.data.id})),Object(l["k"])({roleList:t}).then((function(t){var n=[];t.data.forEach((function(e){0!==e.parentId&&n.push(e)}));var a=Object(d["u"])(n);setTimeout((function(){a.forEach((function(t){var n=Object(d["b"])(e.menuList,["id",t.parentId]);if(n){var a=Object(d["b"])(n.children,["name",t.name]);t.children.forEach((function(e){a.meta.btnSelected.push(e.id)})),Object(d["b"])(n.children,["name",t.name]).meta.btnSelected=a.meta.btnSelected,Object(d["b"])(n.children,["name",t.name]).checked=a.meta.btnSelected.length===a.children.length,Object(d["b"])(n.children,["name",t.name]).indeterminate=a.meta.btnSelected.length>0&&a.meta.btnSelected.length!==a.children.length}}))}),0),e.loading=!1}))},changeAll:function(e,t){e.target.checked?t.children.forEach((function(e){t.meta.btnSelected.push(e.id)})):t.meta.btnSelected=[],t.indeterminate=!1,t.checked=e.target.checked},changeOne:function(e,t){for(var n=0;n<e.length-1;n++)t.meta.btnSelected=e;t.indeterminate=e.length>0&&e.length!==t.children.length,t.checked=e.length===t.children.length},handleSubmit:function(){var e=this,t=this.id,n=this.$notification.success,a=[],i=[],r=Object(c["a"])(this.menuList);r.forEach((function(e){e.children.forEach((function(e){e.meta.btnSelected&&e.meta.btnSelected.forEach((function(e){a.push(e)}))}))}));var s="",o=[];a.forEach((function(t){s=Object(d["b"])(e.arrTemp,["id",t]).parentId===s?void 0:Object(d["b"])(e.arrTemp,["id",t]).parentId;var n=Object(d["b"])(e.arrTemp,["id",t]);if(i.push({id:n.id,name:n.meta.title,isMenu:n.isMenu}),s){var a=Object(d["b"])(e.arrTemp,["id",s]);o.push(a.parentId),i.push({id:a.id,name:a.meta.title,isMenu:a.isMenu})}}));var u=Array.from(new Set(o));u.forEach((function(t){var n=Object(d["b"])(e.arrTemp,["id",t]);i.push({id:n.id,name:n.meta.title,isMenu:n.isMenu})})),Object(l["c"])({itemList:i,id:t}).then((function(t){n({message:"成功",description:"添加成功"}),e.$router.go(-1)}))},handleGoBack:function(){this.$router.go(-1)}}},h=u,m=(n("8d1f"),n("2877")),b=Object(m["a"])(h,a,i,!1,null,null,null);t["default"]=b.exports},ffe0:function(e,t,n){}}]);