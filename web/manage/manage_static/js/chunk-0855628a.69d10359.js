(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0855628a"],{"0237":function(e,t,a){},"2eab":function(e,t,a){"use strict";a("3e5f")},"3b92":function(e,t,a){"use strict";a("0237")},"3e5f":function(e,t,a){},"6c45":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"page-header-index-wide"},[r("a-card",{style:{height:"100%"},attrs:{bordered:!1,bodyStyle:{padding:"16px 0",height:"100%"}}},[r("div",{staticClass:"account-settings-info-main",class:t.device},[r("div",{staticClass:"account-settings-info-left"},[r("a-menu",{style:{border:"0",width:"mobile"==t.device?"560px":"auto"},attrs:{mode:"mobile"==t.device?"horizontal":"inline",multiple:!1,type:"inner"},on:{click:t.onOpenChange},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}},[r("a-menu-item",{key:"BasicInfo"},[t._v("基本信息")]),r("a-menu-item",{key:"Tinymce"},[t._v("资讯详情")])],1)],1),r("div",{staticClass:"account-settings-info-right"},[r("div",{staticClass:"account-settings-info-title"},[r("span",[t._v(t._s(t.textMap[t.currentComponet]))])]),r("a-form",{attrs:{form:t.basicForm}},[r("basic-info",{directives:[{name:"show",rawName:"v-show",value:"BasicInfo"===t.currentComponet,expression:"currentComponet === 'BasicInfo'"}],attrs:{form:t.basicForm,temp:t.temp}}),r("tinymce",{directives:[{name:"show",rawName:"v-show",value:"Tinymce"===t.currentComponet,expression:"currentComponet === 'Tinymce'"}]})],1)],1)])]),r("footer-tool-bar",{staticClass:"display-flex justify-content-center",style:{width:t.isSideMenu()&&t.isDesktop()?"calc(100% - "+(t.sidebarOpened?200:80)+"px)":"100%"}},[r("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("编辑")]),r("a-button",{staticClass:"margin-left-10",on:{click:function(){return e.$router.go(-1)}}},[t._v("取消")])],1)],1)},o=[],i=(a("d81d"),a("b64b"),a("d3b7"),a("ade3")),n=(a("96cf"),a("1da1")),s=a("88bc"),l=a.n(s),c=a("ba41"),m=a("5a70"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"资讯标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入标题！"}]}],expression:"['title', {rules: [{ required: true, message: '请输入标题！'}]}]"}],attrs:{placeholder:"请输入资讯标题"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"资讯分类"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["cid",{rules:[{required:!0,message:"请选择分类"}]}],expression:"['cid', {rules: [{ required: true, message: '请选择分类'}]}]"}],staticClass:"width-percent-100",attrs:{placeholder:"请选择分类"}},e._l(e.cid,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"资讯封面图"}},[a("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["coverImg"],expression:"['coverImg']"}]})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"视频封面图"}},[a("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["videoCoverImg"],expression:"['videoCoverImg']"}]})],1),a("a-form-item",{staticClass:"margin-bottom-0",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"上传视频"}},[a("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["video"],expression:"['video']"}]})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"简介"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["subTitle"],expression:"['subTitle']"}],attrs:{placeholder:"请输入简介"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["showOrder",{initialValue:0}],expression:"['showOrder', { initialValue: 0 }]"}],attrs:{min:0,max:1e4}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否展示"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isShow",{initialValue:1}],expression:"['isShow', { initialValue: 1 }]"}]},[a("a-radio",{attrs:{value:1}},[e._v("展示")]),a("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1)],1)},u=[],p=a("365c"),v=a("ed08"),f={props:{temp:Object},data:function(){var e=Object(v["i"])();return{labelCol:{span:5},wrapperCol:{span:16},cid:[],headers:e,action:p["b"].uploadImgs.addCategoryImage}},created:function(){this.getCategoryList()},methods:{getCategoryList:function(){var e=this;Object(c["e"])().then((function(t){e.cid=Object(v["v"])(t.data)}))},beforeUploadVideo:function(e){var t="video/mp4"===e.type;t||this.$message.error("你只能上传 mp4 文件！");var a=e.size/1024/1024<10;return a||this.$message.error("图像必须小于10MB！"),t&&a},handleChangeCoverImg:function(e){var t=this.$attrs.form.setFieldsValue;t({coverImg:e})},handleChangeVideoCoverImg:function(e){var t=this.$attrs.form.setFieldsValue;t({videoCoverImg:e})},handleVideoChange:function(e){var t=e.file;if("done"===t.status){this.$message.success("视频上传成功");var a=t.response.data.accessUrl;this.$attrs.form.setFieldsValue({video:a})}}}},b=f,h=a("2877"),C=Object(h["a"])(b,d,u,!1,null,null,null),g=C.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form-item",{attrs:{label:""}},[a("tinymce",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:" "}],expression:"['content', { initialValue: ' ' }]"}],ref:"tinymce",attrs:{config:{height:800}}})],1)},y=[],I=a("8256"),x={name:"informationTinymce",components:{Tinymce:I["a"]},props:{info:{type:Object}},model:{prop:"info",event:"change"},data:function(){return{}},created:function(){},methods:{}},O=x,_=Object(h["a"])(O,w,y,!1,null,null,null),F=_.exports,j=a("ac0d"),k={components:{FooterToolBar:m["a"],BasicInfo:g,Tinymce:F},mixins:[j["b"],j["c"]],data:function(){var e=this.$route.params.id;return{id:e,currentComponet:"",selectedKeys:["BasicInfo"],textMap:{BasicInfo:"基本信息",Tinymce:"资讯详情"},basicForm:null,info:{},temp:{},content:""}},created:function(){this.currentComponet="BasicInfo",this.createForm(),this.getNewsInfo()},methods:{getNewsInfo:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])(e.id).then((function(t){e.setInfo(t.data),new Promise((function(e){setTimeout(e,0)})).then((function(){e.basicForm.setFieldsValue(l()(t.data,["title","cid","coverImg","videoCoverImg","video","subTitle","showOrder","isShow","content"])),e.temp={coverImg:e.info.coverImg,videoCoverImg:e.info.videoCoverImg},e.content=e.info.content}))}));case 2:case"end":return t.stop()}}),t)})))()},onOpenChange:function(e){var t=e.key;this.currentComponet=t},setInfo:function(e){this.info=Object.assign(this.info,e)},createForm:function(){var e=this;this.basicForm=this.$form.createForm(this,{onFieldsChange:function(t,a){Object.keys(a).map((function(t){var r=a[t]["value"],o=Object(i["a"])({},t,r);e.setInfo(o)}))}})},handleSubmit:function(){var e=this,t=this.basicForm,a=this.$notification.success,r=this.info,o=!1;t.validateFields((function(t,a){t&&(e.selectedKeys=["BasicInfo"],e.currentComponet="BasicInfo",o=!0)})),o||Object(c["i"])(r).then((function(t){a({message:"成功",description:"编辑成功"}),e.$router.go(-1)}))}}},$=k,N=(a("2eab"),a("3b92"),Object(h["a"])($,r,o,!1,null,"4bb7ed04",null));t["default"]=N.exports}}]);