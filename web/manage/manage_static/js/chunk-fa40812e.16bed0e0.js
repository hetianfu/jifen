(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa40812e"],{1553:function(t,e,a){"use strict";a("2780")},"1d0f":function(t,e,a){"use strict";a("5be6")},2780:function(t,e,a){},"5be6":function(t,e,a){},c9d9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",[a("a-button",{staticClass:"margin-bottom-16",attrs:{type:"primary"},on:{click:t.handleAdd}},[a("a-icon",{attrs:{type:"plus"}}),t._v("添加数据")],1),a("a-table",{ref:"table",attrs:{rowKey:function(t,e){return e},columns:t.columns,"data-source":t.data},scopedSlots:t._u([{key:"input",fn:function(t){return[a("s-table-text",{attrs:{text:String(t.value)}})]}},{key:"text",fn:function(t){return[a("s-table-text",{attrs:{text:t.value}})]}},{key:"textarea",fn:function(t){return[a("s-table-text",{attrs:{text:t.value}})]}},{key:"checkbox",fn:function(t){return[a("s-table-text",{attrs:{text:t.title}})]}},{key:"radio",fn:function(t){return[a("s-table-text",{attrs:{text:t.title}})]}},{key:"select",fn:function(t){return[a("s-table-text",{attrs:{text:t.title}})]}},{key:"upload",fn:function(t){return t.value?[a("s-table-avatar",{attrs:{src:t.value}})]:void 0}},{key:"images",fn:function(e){return e.value?[a("viewer",{staticClass:"image-box",attrs:{images:e.value}},t._l(e.value,(function(t,e){return a("img",{key:e,staticStyle:{width:"45px","margin-left":"5px"},attrs:{src:t}})})),0)]:void 0}},{key:"file",fn:function(t){return[a("s-table-text",{attrs:{text:t.value}})]}},{key:"status",fn:function(e,n){return[a("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:!!n.status,loading:n.loading},on:{change:function(e){return t.onChangeStatus(n,e)}}})]}},{key:"showOrder",fn:function(e,n){return[a("edit-name",{attrs:{text:String(n.showOrder),scope:n},on:{change:function(e){return t.onEditChange(n.id,"showOrder",e)}}})]}},{key:"action",fn:function(e,n){return[a("a",{on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"color-red",on:{click:function(e){return t.handleDel(n)}}},[t._v("删除")])]}}],null,!0)})],1),a("a-modal",{attrs:{title:t.normal.title,width:"800px"},on:{ok:function(e){"add"===t.normal.status?t.handleAddSubmit():t.handleEditSubmit()}},model:{value:t.normal.visible,callback:function(e){t.$set(t.normal,"visible",e)},expression:"normal.visible"}},[a("a-form",{staticClass:"addArrMal",attrs:{form:t.normal.form,"label-col":{span:4},"wrapper-col":{span:19}}},[t._l(t.title,(function(e,n){return a("div",{key:n},[a("a-form-item",{staticClass:"display-none"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+e.title+".type",{initialValue:e.type}],expression:"[`value.${item.title}.type`, { initialValue: item.type }]"}]})],1),a("a-form-item",{attrs:{label:e.name}},["input"===e.type||"text"===e.type?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+e.title+".value",{rules:[{required:!1,message:"请输入"+e.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请输入${item.name}` }] }]"}],attrs:{placeholder:"请输入"+e.name}}):t._e(),"textarea"===e.type?a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+e.title+".value",{rules:[{required:!1,message:"请输入"+e.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请输入${item.name}` }] }]"}],attrs:{placeholder:"请输入"+e.name}}):t._e(),"select"===e.type?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+e.title+".value",{rules:[{required:!1,message:"请选择"+e.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请选择${item.name}` }] }]"}],staticStyle:{width:"220px"},attrs:{placeholder:"请选择"+e.name}},t._l(e.options,(function(e,n){return a("a-select-option",{key:n,attrs:{value:n}},[t._v(t._s(e))])})),1):t._e(),"radio"===e.type?a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+e.title+".value",{rules:[{required:!0,message:"请选择"+e.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: true, message: `请选择${item.name}` }] }]"}]},t._l(e.options,(function(e,n){return a("a-radio",{key:n,attrs:{value:n}},[t._v(t._s(e))])})),1):t._e(),"checkbox"===e.type?a("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+e.title+".value",{rules:[{required:!1,message:"请选择"+e.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请选择${item.name}` }] }]"}]},t._l(e.options,(function(e,n){return a("a-checkbox",{key:n,attrs:{value:n}},[t._v(t._s(e))])})),1):t._e(),"upload"===e.type?a("upload-img",{model:{value:t.formData[e.title],callback:function(a){t.$set(t.formData,e.title,a)},expression:"formData[item.title]"}}):t._e(),"images"===e.type?a("upload-img",{attrs:{multiple:"",max:7},model:{value:t.formData[e.title],callback:function(a){t.$set(t.formData,e.title,a)},expression:"formData[item.title]"}}):t._e(),"file"===e.type?a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+e.title+".value",{rules:[{required:!0,message:"请选择"+e.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: true, message: `请选择${item.name}` }] }]"}],attrs:{multiple:!0,name:"file",action:t.action,headers:t.headers}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 文件上传 ")],1)],1):t._e()],1)],1)})),a("div",[a("a-form-item",{attrs:{label:"排序："}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["showOrder",{rules:[{required:!1,message:"请输入排序"}]}],expression:"['showOrder', { rules: [{ required: false, message: '请输入排序' }] }]"}],staticStyle:{width:"20%"},attrs:{min:0,max:1e3,placeholder:"请输入排序"}})],1),a("a-form-item",{attrs:{label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1},{rules:[{required:!1,message:"请选择状态"}]}],expression:"['status', {initialValue: 1}, { rules: [{ required: false, message: '请选择状态' }] }]"}]},[a("a-radio",{attrs:{value:1}},[t._v("开启")]),a("a-radio",{attrs:{value:0}},[t._v("关闭")])],1)],1)],1)],2)],1)],1)},i=[],r=(a("c740"),a("a15b"),a("d81d"),a("a434"),a("b0c0"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("1276"),a("5530")),s=a("ade3"),o=a("2af9"),l=a("365c"),u=a("2ef0"),c=a("f955"),d=a("8cd7"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"s-table-text"},[a("a-popover",{attrs:{placement:"topLeft",arrowPointAtCenter:"",overlayStyle:t.textStyle}},[a("template",{slot:"content"},[t._v(t._s(t.text))]),a("span",[t._v(t._s(t._f("textOverflowEllipsis")(t.text,0,15)))])],2)],1)},f=[],p={props:{text:{required:!0}},watch:{text:function(t){this.text=t}},data:function(){return{textStyle:{"max-width":"400px"}}}},v=p,h=a("2877"),b=Object(h["a"])(v,m,f,!1,null,"e8be56f0",null),g=b.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editable-cell"},[t.editable?a("div",{staticClass:"editable-cell-input-wrapper"},[a("a-input",{staticClass:"input-class",attrs:{value:t.value},on:{change:t.handleChange,pressEnter:t.check}}),a("a-icon",{staticClass:"editable-cell-icon-check",attrs:{type:"check"},on:{click:t.check}})],1):a("div",{staticClass:"editable-cell-text-wrapper input-class"},[a("a-popover",{attrs:{placement:"topLeft",arrowPointAtCenter:""}},[a("template",{slot:"content"},[t._v(t._s(t.value))]),a("span",[t._v(t._s(t._f("textOverflowEllipsis")(t.value,0,10)))])],2),a("a-icon",{staticClass:"editable-cell-icon",attrs:{type:"edit"},on:{click:t.edit}})],1)])},x=[],k={props:{text:{type:String,required:!0},scope:{type:Object,required:!0}},data:function(){return{value:this.text,row:this.scope,editable:!1}},watch:{text:function(t){this.value=t},scope:function(t){this.row=t}},methods:{handleChange:function(t){var e=t.target.value;this.value=e},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}},O=k,w=(a("1d0f"),Object(h["a"])(O,y,x,!1,null,"b804e316",null)),_=w.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"s-table-avatar cursor-pointer",on:{click:t.parseImg}},[a("div",{staticClass:"image-curtain"},[t._m(0),a("a-avatar",{attrs:{src:t.src,size:38}})],1),a("a-modal",{attrs:{footer:null,width:"300px"},on:{click:t.handleImgCancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("img",{staticClass:"width-percent-100",attrs:{src:t.src}})])],1)},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"curtain"},[a("div",{staticClass:"eye"},[a("div",{staticClass:"super-icon-font font-size-fourteen"})])])}],j={props:{src:{type:String,default:""},name:{type:String,default:""}},data:function(){return{visible:!1}},methods:{parseImg:function(){this.visible=!0},handleImgCancel:function(){this.visible=!1}}},$=j,q=(a("1553"),Object(h["a"])($,S,C,!1,null,null,null)),D=q.exports,I=a("ed08"),N={components:{STable:o["p"],STableText:g,EditName:_,STableAvatar:D},watch:{$route:function(){this.getCommonSonConfig()}},data:function(){var t=Object(I["i"])();return{loading:!1,gid:"",columns:[],title:[],formData:{},pagination:{pageSize:10,current:1},normal:{id:null,form:null,visible:!1,status:"",title:""},data:[],headers:t,action:l["b"].uploadImgs.addSystemImage}},created:function(){this.getCommonSonConfig()},methods:{getCommonSonConfig:function(){var t=this,e=this.$route.path.split("/").splice(-2),a={title:e[0],son:e[1]};Object(d["c"])(a).then((function(e){var a=e.data.groupValue;t.gid=a.id;var n=a.list,i=Object(u["cloneDeep"])(a.fields),r=[];t.title=i,i.map((function(t){var e={title:t.name,dataIndex:"value.".concat(t.title),scopedSlots:{customRender:"".concat(t.type)}};r.push(e),t.configParameter&&(t.options=t.configParameter.split(","))})),r.push({title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"showOrder",scopedSlots:{customRender:"showOrder"}},{title:"操作",scopedSlots:{customRender:"action"}}),n.map((function(t){t.loading=!1;var e=Object.keys(t.value);i.length>=e.length&&i.map((function(e){t.value[e.title]=t.value[e.title]?t.value[e.title]:{type:e.type,value:""}}))})),t.data=n,t.columns=r}))},setNormal:function(t){this.normal=Object.assign(this.normal,t)},onEditChange:function(t,e,a){var n=this;void 0===a&&(a=null),Object(c["q"])(Object(s["a"])({id:t},e,a)).then((function(t){n.$message.success("修改成功")}))},handleAdd:function(){this.formData={},this.setNormal({visible:!0,status:"add",title:"添加数据",form:this.$form.createForm(this)})},handleAddSubmit:function(){var t=this,e=this.normal.form.validateFields,a=this.$notification.success,n=this.gid;e((function(e,i){i=t.getFieldsValue(i),e||Object(c["c"])(Object(r["a"])(Object(r["a"])({},i),{},{gid:n})).then((function(e){a({message:"成功",description:"添加成功"}),t.normal.visible=!1,t.getCommonSonConfig()}))}))},handleEdit:function(t){var e=this,a=this.title,n=t.value,i={};a.map((function(t){i[t.title]=n[t.title]["value"],t.value=n[t.title]["value"]})),this.formData=i,this.setNormal({id:t.id,visible:!0,status:"edit",title:"编辑数据",form:this.$form.createForm(this)}),new Promise((function(t){setTimeout(t,0)})).then((function(){e.normal.form.setFieldsValue(Object(u["pick"])(t,["value","status","showOrder"]))}))},handleEditSubmit:function(){var t=this,e=this.normal,a=e.form.validateFields,n=e.id,i=this.$notification.success;a((function(e,a){if(a=t.getFieldsValue(a),!e){var s=Object(r["a"])(Object(r["a"])({},a),{},{id:n});Object(c["q"])(s).then((function(e){i({message:"成功",description:"修改成功"}),t.normal.visible=!1,t.getCommonSonConfig()}))}}))},getFieldsValue:function(t){var e=this.title,a=this.formData,n=function(n){var i=t.value[n],r=e[e.findIndex((function(t){return t.title===n}))];switch(i.type){case"upload":i.value=a[n];break;case"images":i.value=a[n];break;case"file":i.value=[];break;case"radio":i.title=r.options[i.value];break;case"select":i.title=r.options[i.value];break;case"checkbox":i.title=i.value.map((function(t){return r.options[t]})).join(",");break}};for(var i in t.value)n(i);return t},handleDel:function(t){var e=this,a=this.$notification.success;this.$confirm({title:"警告",content:"是否确认删除",onOk:function(){Object(c["g"])(t.id).then((function(t){a({message:"成功",description:"删除成功"}),e.getCommonSonConfig()}))}})},onChangeStatus:function(t,e){var a=this;t.status=Number(e),t.loading=!0,Object(c["q"])({id:t.id,status:Number(e)}).then((function(e){setTimeout((function(){t.loading=!1,a.$message.success("修改成功")}),500)})).catch((function(){t.status=Number(!e),t.loading=!1}))}}},E=N,P=Object(h["a"])(E,n,i,!1,null,null,null);e["default"]=P.exports},f955:function(t,e,a){"use strict";a.d(e,"n",(function(){return s})),a.d(e,"l",(function(){return o})),a.d(e,"r",(function(){return l})),a.d(e,"o",(function(){return u})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"h",(function(){return m})),a.d(e,"e",(function(){return f})),a.d(e,"m",(function(){return p})),a.d(e,"b",(function(){return v})),a.d(e,"p",(function(){return h})),a.d(e,"f",(function(){return b})),a.d(e,"i",(function(){return g})),a.d(e,"k",(function(){return y})),a.d(e,"j",(function(){return x})),a.d(e,"c",(function(){return k})),a.d(e,"g",(function(){return O})),a.d(e,"q",(function(){return w}));a("99af");var n=a("365c"),i=a("b775"),r=n["b"].maintain;function s(t){return Object(i["b"])({url:r.getTabPage,method:"get",params:t})}function o(t){return Object(i["b"])({url:r.getSystemConfigPage,method:"get",params:t})}function l(t){return Object(i["b"])({url:r.updateTabById,method:"patch",data:t})}function u(t){return Object(i["b"])({url:r.updateSystemConfigById,method:"patch",data:t})}function c(t){return Object(i["b"])({url:r.addTab,method:"post",data:t})}function d(t){return Object(i["b"])({url:r.addSystemConfig,method:"post",data:t})}function m(t){return Object(i["b"])({url:"".concat(r.delTabById).concat(t),method:"delete"})}function f(t){return Object(i["b"])({url:"".concat(r.delSystemConfigById).concat(t),method:"delete"})}function p(t){return Object(i["b"])({url:r.getSystemGroupPage,method:"get",params:t})}function v(t){return Object(i["b"])({url:r.addSystemGroup,method:"post",data:t})}function h(t){return Object(i["b"])({url:r.updateSystemGroupById,method:"patch",data:t})}function b(t){return Object(i["b"])({url:"".concat(r.delSystemGroupById).concat(t),method:"delete"})}function g(t){return Object(i["b"])({url:r.getNormalGroupDataPag,method:"get",params:t})}function y(t){return Object(i["b"])({url:r.getStrategyGroupDataPag,method:"get",params:t})}function x(t){return Object(i["b"])({url:r.getProductGroupDataPag,method:"get",params:t})}function k(t){return Object(i["b"])({url:r.addSystemGroupData,method:"post",data:t})}function O(t){return Object(i["b"])({url:"".concat(r.delSystemGroupDataById).concat(t),method:"delete"})}function w(t){return Object(i["b"])({url:r.updateSystemGroupDataById,method:"patch",data:t})}}}]);