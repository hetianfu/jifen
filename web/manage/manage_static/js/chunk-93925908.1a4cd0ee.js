(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93925908"],{"030c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",[a("a-row",{staticClass:"margin-bottom-16",attrs:{gutter:10}},[a("a-col",{attrs:{span:4}},[a("a-input",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"模板编号"},model:{value:t.queryParam.smsCode,callback:function(e){t.$set(t.queryParam,"smsCode",e)},expression:"queryParam.smsCode"}})],1),a("a-col",{attrs:{span:5}},[a("a-input",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"联系电话"},model:{value:t.queryParam.telephone,callback:function(e){t.$set(t.queryParam,"telephone",e)},expression:"queryParam.telephone"}})],1),a("a-col",{attrs:{span:3}},[a("a-select",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"状态"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("成功")]),a("a-select-option",{attrs:{value:"0"}},[t._v("失败")])],1)],1),a("a-col",{attrs:{span:3}},[a("a-select",{staticClass:"width-percent-100",attrs:{allowClear:"",placeholder:"类型"},model:{value:t.queryParam.smsType,callback:function(e){t.$set(t.queryParam,"smsType",e)},expression:"queryParam.smsType"}},t._l(t.SMS_TEMPLATE_TYPE,(function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])})),1)],1),a("a-col",{attrs:{span:8}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")])],1)],1),a("div",{staticClass:"margin-bottom-10"},[a("a-button",{attrs:{type:"primary"},on:{click:t.handleBatch}},[t._v("批量发送")])],1),a("s-table",{ref:"table",attrs:{rowKey:"id",columns:t.columns,data:t.loadData,rowSelection:{columnWidth:50,selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},pagination:t.pagination},scopedSlots:t._u([{key:"status",fn:function(e){return a("span",{},[e.status?t._e():a("a-tag",{attrs:{color:"#f50"}},[t._v("失败")]),e.status?a("a-tag",{attrs:{color:"#87d068"}},[t._v("成功")]):t._e()],1)}},{key:"smsType",fn:function(e){return a("span",{},t._l(t.SMS_TEMPLATE_TYPE,(function(s){return s.key===e.smsType?a("span",{key:s.key},[t._v(t._s(s.value))]):t._e()})),0)}},{key:"createdAt",fn:function(e){return a("span",{},[t._v(t._s(t._f("parseTime")(e.createdAt,"YYYY-MM-DD HH:mm")))])}}])})],1)},n=[],r=(a("a15b"),a("2af9")),o=a("30e1"),c=a("f121"),l={components:{STable:r["p"]},data:function(){var t=this;return{selectedRowKeys:[],queryParam:{},SMS_TEMPLATE_TYPE:c["s"],columns:[{title:"编码",dataIndex:"smsCode"},{title:"类型",scopedSlots:{customRender:"smsType"}},{title:"短信内容",dataIndex:"content",width:240},{title:"发送状态",scopedSlots:{customRender:"status"}},{title:"接收电话",dataIndex:"telephone"},{title:"发送时间",scopedSlots:{customRender:"createdAt"},width:150},{title:"流水号",dataIndex:"aliRequestId",width:200,ellipsis:!0}],pagination:{pageSize:10,current:1},loadData:function(e){var a=e.pageNo,s=e.pageSize,n=t.queryParam,r=n.smsCode,c=n.telephone,l=n.smsType,u=n.status,i={page:a,limit:s,smsCode:r||void 0,telephone:c||void 0,smsType:l,status:u};return Object(o["c"])(i).then((function(t){var e=t.data,n=e.list,r=e.totalCount;return{pageNo:a,pageSize:s,data:n,totalCount:r}}))}}},created:function(){},methods:{onSelectChange:function(t){this.selectedRowKeys=t},handleBatch:function(){var t=this,e=this.selectedRowKeys,a=this.$refs.table,s=this.$notification.success;this.$confirm({title:"提示",content:"已选择".concat(e.length,"条记录，是否确认批量发送？"),onOk:function(){Object(o["f"])({id:e.join(",")}).then((function(e){t.selectedRowKeys=[],s({message:"成功",description:"成功"}),a.refresh()}))}})}}},u=l,i=a("2877"),d=Object(i["a"])(u,s,n,!1,null,null,null);e["default"]=d.exports},"30e1":function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return c})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return i})),a.d(e,"f",(function(){return d}));a("99af");var s=a("365c"),n=a("b775"),r=s["a"].smsManage;function o(t){return Object(n["b"])({url:r.smsManageGetPage,method:"get",params:t})}function c(t){return Object(n["b"])({url:r.smsManageAdd,method:"post",data:t})}function l(t){return Object(n["b"])({url:r.smsManageUpdateById,method:"patch",data:t})}function u(t){return Object(n["b"])({url:"".concat(r.smsManageDelById).concat(t),method:"delete"})}function i(t){return Object(n["b"])({url:r.smsManageGetLogPage,method:"get",params:t})}function d(t){return Object(n["b"])({url:s["c"]+"/sms-template/log-re-send",method:"post",data:t})}}}]);