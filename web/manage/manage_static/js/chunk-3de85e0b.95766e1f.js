(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3de85e0b"],{"4a57":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-button",{staticClass:"margin-bottom-16",attrs:{type:"primary"},on:{click:e.handleAdd}},[a("a-icon",{attrs:{type:"plus"}}),e._v("添加数据")],1),a("s-table",{ref:"table",attrs:{rowKey:function(e,t){return t},columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:"input",fn:function(e){return[a("s-table-text",{attrs:{text:String(e.value)}})]}},{key:"text",fn:function(e){return[a("s-table-text",{attrs:{text:e.value}})]}},{key:"textarea",fn:function(e){return[a("s-table-text",{attrs:{text:e.value}})]}},{key:"checkbox",fn:function(e){return[a("s-table-text",{attrs:{text:e.title}})]}},{key:"radio",fn:function(e){return[a("s-table-text",{attrs:{text:e.title}})]}},{key:"select",fn:function(e){return[a("s-table-text",{attrs:{text:e.title}})]}},{key:"upload",fn:function(e){return[a("s-table-avatar",{attrs:{src:e.value}})]}},{key:"images",fn:function(t){return[a("viewer",{staticClass:"image-box",attrs:{images:t.value}},e._l(t.value,(function(e,t){return a("img",{key:t,staticStyle:{width:"45px","margin-left":"5px"},attrs:{src:e}})})),0)]}},{key:"file",fn:function(e){return[a("s-table-text",{attrs:{text:e.value}})]}},{key:"status",fn:function(t,i){return[a("a-switch",{attrs:{"checked-children":"开启","un-checked-children":"关闭",checked:1===i.status,loading:i.loading},on:{change:function(t){return e.onChangeStatus(i,t)}}})]}},{key:"showOrder",fn:function(t,i){return[a("edit-name",{attrs:{text:String(i.showOrder),scope:i},on:{change:function(t){return e.onEditChange(i.id,"showOrder",t)}}})]}},{key:"action",fn:function(t,i){return[a("a",{on:{click:function(t){return e.handleEdit(i)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"color-red",on:{click:function(t){return e.handleDel(i)}}},[e._v("删除")])]}}])})],1),a("a-modal",{attrs:{title:e.normal.title,width:"800px"},on:{ok:function(t){"add"===e.normal.status?e.handleAddSubmit():e.handleEditSubmit()}},model:{value:e.normal.visible,callback:function(t){e.$set(e.normal,"visible",t)},expression:"normal.visible"}},[a("a-form",{staticClass:"addArrMal",attrs:{form:e.normal.form,"label-col":{span:4},"wrapper-col":{span:19}}},[e._l(e.title,(function(t,i){return a("div",{key:i},[a("a-form-item",{staticClass:"display-none"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".type",{initialValue:t.type}],expression:"[`value.${item.title}.type`, { initialValue: item.type }]"}]})],1),a("a-form-item",{attrs:{label:t.name}},["input"===t.type||"text"===t.type?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value",{rules:[{required:!1,message:"请输入"+t.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请输入${item.name}` }] }]"}],attrs:{placeholder:"请输入"+t.name}}):e._e(),"textarea"===t.type?a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value",{rules:[{required:!1,message:"请输入"+t.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请输入${item.name}` }] }]"}],attrs:{placeholder:"请输入"+t.name}}):e._e(),"select"===t.type?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value",{rules:[{required:!1,message:"请选择"+t.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请选择${item.name}` }] }]"}],staticStyle:{width:"220px"},attrs:{placeholder:"请选择"+t.name}},e._l(t.options,(function(t,i){return a("a-select-option",{key:i,attrs:{value:i}},[e._v(e._s(t))])})),1):e._e(),"radio"===t.type?a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value",{rules:[{required:!0,message:"请选择"+t.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: true, message: `请选择${item.name}` }] }]"}]},e._l(t.options,(function(t,i){return a("a-radio",{key:i,attrs:{value:i}},[e._v(e._s(t))])})),1):e._e(),"checkbox"===t.type?a("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value",{rules:[{required:!1,message:"请选择"+t.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: false, message: `请选择${item.name}` }] }]"}]},e._l(t.options,(function(t,i){return a("a-checkbox",{key:i,attrs:{value:i}},[e._v(e._s(t))])})),1):e._e(),"upload"===t.type?a("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value"],expression:"[`value.${item.title}.value`]"}]}):e._e(),"images"===t.type?a("upload-img",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value"],expression:"[`value.${item.title}.value`]"}],attrs:{multiple:"",max:7}}):e._e(),"file"===t.type?a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["value."+t.title+".value",{rules:[{required:!0,message:"请选择"+t.name}]}],expression:"[`value.${item.title}.value`, { rules: [{ required: true, message: `请选择${item.name}` }] }]"}],attrs:{multiple:!0,name:"file",action:e.action,headers:e.headers}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 文件上传 ")],1)],1):e._e()],1)],1)})),a("div",[a("a-form-item",{attrs:{label:"排序："}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["showOrder",{rules:[{required:!1,message:"请输入排序"}]}],expression:"['showOrder', { rules: [{ required: false, message: '请输入排序' }] }]"}],staticStyle:{width:"20%"},attrs:{min:0,max:1e3,placeholder:"请输入排序"}})],1),a("a-form-item",{attrs:{label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1},{rules:[{required:!1,message:"请选择状态"}]}],expression:"['status', {initialValue: 1}, { rules: [{ required: false, message: '请选择状态' }] }]"}]},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1)],1)],2)],1)],1)},n=[],r=(a("c740"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("1276"),a("5530")),s=a("ade3"),o=a("2af9"),l=a("365c"),u=a("2ef0"),c=a("f955"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"s-table-text"},[a("a-popover",{attrs:{placement:"topLeft",arrowPointAtCenter:"",overlayStyle:e.textStyle}},[a("template",{slot:"content"},[e._v(e._s(e.text))]),a("span",[e._v(e._s(e._f("textOverflowEllipsis")(e.text,0,15)))])],2)],1)},m=[],p={props:{text:{required:!0}},watch:{text:function(e){this.text=e}},data:function(){return{textStyle:{"max-width":"400px"}}}},f=p,v=a("2877"),h=Object(v["a"])(f,d,m,!1,null,"5488b6d8",null),g=h.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editable-cell"},[e.editable?a("div",{staticClass:"editable-cell-input-wrapper"},[a("a-input",{staticClass:"input-class",attrs:{value:e.value},on:{change:e.handleChange,pressEnter:e.check}}),a("a-icon",{staticClass:"editable-cell-icon-check",attrs:{type:"check"},on:{click:e.check}})],1):a("div",{staticClass:"editable-cell-text-wrapper input-class"},[a("a-popover",{attrs:{placement:"topLeft",arrowPointAtCenter:""}},[a("template",{slot:"content"},[e._v(e._s(e.value))]),a("span",[e._v(e._s(e._f("textOverflowEllipsis")(e.value,0,10)))])],2),a("a-icon",{staticClass:"editable-cell-icon",attrs:{type:"edit"},on:{click:e.edit}})],1)])},y=[],x={props:{text:{type:String,required:!0},scope:{type:Object,required:!0}},data:function(){return{value:this.text,row:this.scope,editable:!1}},watch:{text:function(e){this.value=e},scope:function(e){this.row=e}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}},w=x,_=(a("db9c"),Object(v["a"])(w,b,y,!1,null,"1e7bdce9",null)),O=_.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"s-table-avatar cursor-pointer",on:{click:e.parseImg}},[a("div",{staticClass:"image-curtain"},[e._m(0),a("a-avatar",{attrs:{src:e.src,size:38}})],1),a("a-modal",{attrs:{footer:null,width:"300px"},on:{click:e.handleImgCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("img",{staticClass:"width-percent-100",attrs:{src:e.src}})])],1)},j=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"curtain"},[a("div",{staticClass:"eye"},[a("div",{staticClass:"super-icon-font font-size-fourteen"})])])}],$={props:{src:{type:String,default:""},name:{type:String,default:""}},data:function(){return{visible:!1}},methods:{parseImg:function(){this.visible=!0},handleImgCancel:function(){this.visible=!1}}},S=$,C=(a("9bd7"),Object(v["a"])(S,k,j,!1,null,null,null)),q=C.exports,U=a("ed08"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showUploadList?a("a-upload",{staticClass:"avatar-uploader",attrs:{action:e.action,headers:e.headers,"file-list":e.images,"show-upload-list":e.showUploadList,beforeUpload:e.onBeforeUpload,"list-type":"picture-card"},on:{change:e.onChangeUpload}},[e.images.length<5?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传")])],1):e._e()]):e._e(),e.showUploadList?e._e():a("a-upload",{staticClass:"avatar-uploader",attrs:{action:e.action,headers:e.headers,"show-upload-list":e.showUploadList,beforeUpload:e.onBeforeUpload,"list-type":"picture-card"},on:{change:e.onChangeUpload}},[a("div",[e.image&&"loading"!==e.image?a("img",{staticStyle:{width:"102px",height:"102px"},attrs:{src:e.image,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.image?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.image?"文件上传中":"上传"))])],1)])])],1)},N=[],D=(a("a434"),function(e,t){return{uid:"vc-uid-".concat(e),url:t,name:"vc-name-".concat(e),key:"vc-key-".concat(e)}}),E={props:{value:{},action:{type:String,required:!0},showUploadList:{type:Boolean,default:!0}},model:{prop:"value",event:"change"},watch:{value:function(e){this.initUpload(e)}},data:function(){var e=Object(U["i"])();return{headers:e,image:"",images:[]}},created:function(){this.initUpload(this.value)},methods:{initUpload:function(e){this.showUploadList?this.images=(e||[]).map((function(e,t){return D(t,e)})):this.image=e},onBeforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("你只能上传 JPG或PNG 文件！");var a=e.size/1024/1024<2;return a||this.$message.error("图像必须小于2MB！"),t&&a},onChangeUpload:function(e){var t=e.file,a=e.fileList;if(this.showUploadList){if("uploading"===t.status&&(this.images=a),"removed"===t.status){var i=Object(u["cloneDeep"])(this.images),n=i.findIndex((function(e){return e.uid===t.uid}));i.splice(n,1),this.images=i,this.$emit("change",i.map((function(e){return e.url})))}if("done"===t.status){var r=(this.images||[]).map((function(e,t){return void 0!==e.response?D(t,e.response.data.accessUrl):e}));this.images=r,this.$emit("change",r.map((function(e){return e.url})))}}else if("uploading"===t.status&&(this.image="loading"),"done"===t.status){var s=t.response.data.accessUrl;this.image=s,this.$emit("change",s)}}}},P=E,B=Object(v["a"])(P,I,N,!1,null,"74731906",null),G=B.exports,L={components:{STable:o["p"],STableText:g,EditName:O,STableAvatar:q,UploadImages:G},data:function(){var e=this,t=this.$route.params.gid,a=this.$store.getters.groupData,i=Object(U["i"])();return{loading:!1,gid:t,groupData:a,columns:[],title:[],formData:{},pagination:{pageSize:10,current:1},normal:{id:null,form:null,visible:!1,status:"",title:""},headers:i,action:l["b"].uploadImgs.addSystemImage,loadData:function(i){var n=i.pageNo,r=i.pageSize,s=i.sortOrder,o=void 0===s?"ascend":s,l={gid:t,page:n,limit:r,orders:{show_order:"ascend"===o?"asc":"desc"}};return Object(c["i"])(l).then((function(t){var i=t.data,s=i.list,o=i.totalCount,l=Object(u["cloneDeep"])(a.fields),c=[];return e.title=l,l.map((function(e){var t={title:e.name,dataIndex:"value.".concat(e.title),scopedSlots:{customRender:"".concat(e.type)}};c.push(t),e.configParameter&&(e.options=e.configParameter.split(","))})),c.push({title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"showOrder",scopedSlots:{customRender:"showOrder"}},{title:"操作",scopedSlots:{customRender:"action"}}),s.map((function(e){e.loading=!1;var t=Object.keys(e.value);l.length>=t.length&&l.map((function(t){e.value[t.title]=e.value[t.title]?e.value[t.title]:{type:t.type,value:""}}))})),e.columns=c,{pageNo:n,pageSize:r,data:s,totalCount:o}})).catch((function(t){e.$message.warning("获取数据列表失败"),e.$router.go(-1)}))}}},created:function(){},methods:{setNormal:function(e){this.normal=Object.assign(this.normal,e)},onEditChange:function(e,t,a){var i=this;void 0===a&&(a=null),Object(c["q"])(Object(s["a"])({id:e},t,a)).then((function(e){i.$message.success("修改成功")}))},handleAdd:function(){this.formData={},this.setNormal({visible:!0,status:"add",title:"添加数据",form:this.$form.createForm(this)})},handleAddSubmit:function(){var e=this,t=this.normal.form.validateFields,a=this.$refs.table,i=this.$notification.success,n=this.gid;t((function(t,s){s=e.getFieldsValue(s),t||Object(c["c"])(Object(r["a"])(Object(r["a"])({},s),{},{gid:n})).then((function(t){i({message:"成功",description:"添加成功"}),e.normal.visible=!1,a.refresh()}))}))},handleEdit:function(e){var t=this,a=this.title,i=e.value,n={};a.map((function(e){n[e.title]=i[e.title]["value"],e.value=i[e.title]["value"]})),this.formData=n,this.setNormal({id:e.id,visible:!0,status:"edit",title:"编辑数据",form:this.$form.createForm(this)}),new Promise((function(e){setTimeout(e,0)})).then((function(){t.normal.form.setFieldsValue(Object(u["pick"])(e,["value","status","showOrder"]))}))},handleEditSubmit:function(){var e=this,t=this.normal,a=t.form.validateFields,i=t.id,n=this.$refs.table,s=this.$notification.success;a((function(t,a){if(a=e.getFieldsValue(a),!t){var o=Object(r["a"])(Object(r["a"])({},a),{},{id:i});Object(c["q"])(o).then((function(t){s({message:"成功",description:"修改成功"}),e.normal.visible=!1,n.refresh()}))}}))},getFieldsValue:function(e){var t=this.title,a=function(a){var i=e.value[a],n=t[t.findIndex((function(e){return e.title===a}))];switch(i.type){case"file":i.value=[];break;case"radio":i.title=n.options[i.value];break;case"select":i.title=n.options[i.value];break;case"checkbox":i.title=i.value.map((function(e){return n.options[e]})).join(",");break}};for(var i in e.value)a(i);return e},handleDel:function(e){var t=this.$notification.success,a=this.$refs.table;this.$confirm({title:"警告",content:"是否确认删除",onOk:function(){Object(c["g"])(e.id).then((function(e){t({message:"成功",description:"删除成功"}),a.refresh()}))}})},onChangeStatus:function(e,t){var a=this,i=e.id;e.status,e.loading;var n=this.$refs.table;Object(c["q"])({id:i,status:Number(t)}).then((function(e){n.refresh(),a.$message.success("修改成功"),!1}))}}},T=L,A=Object(v["a"])(T,i,n,!1,null,null,null);t["default"]=A.exports},"888e":function(e,t,a){},"9bd7":function(e,t,a){"use strict";a("ca70")},ca70:function(e,t,a){},db9c:function(e,t,a){"use strict";a("888e")},f955:function(e,t,a){"use strict";a.d(t,"n",(function(){return s})),a.d(t,"l",(function(){return o})),a.d(t,"r",(function(){return l})),a.d(t,"o",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"m",(function(){return f})),a.d(t,"b",(function(){return v})),a.d(t,"p",(function(){return h})),a.d(t,"f",(function(){return g})),a.d(t,"i",(function(){return b})),a.d(t,"k",(function(){return y})),a.d(t,"j",(function(){return x})),a.d(t,"c",(function(){return w})),a.d(t,"g",(function(){return _})),a.d(t,"q",(function(){return O}));a("99af");var i=a("365c"),n=a("b775"),r=i["b"].maintain;function s(e){return Object(n["b"])({url:r.getTabPage,method:"get",params:e})}function o(e){return Object(n["b"])({url:r.getSystemConfigPage,method:"get",params:e})}function l(e){return Object(n["b"])({url:r.updateTabById,method:"patch",data:e})}function u(e){return Object(n["b"])({url:r.updateSystemConfigById,method:"patch",data:e})}function c(e){return Object(n["b"])({url:r.addTab,method:"post",data:e})}function d(e){return Object(n["b"])({url:r.addSystemConfig,method:"post",data:e})}function m(e){return Object(n["b"])({url:"".concat(r.delTabById).concat(e),method:"delete"})}function p(e){return Object(n["b"])({url:"".concat(r.delSystemConfigById).concat(e),method:"delete"})}function f(e){return Object(n["b"])({url:r.getSystemGroupPage,method:"get",params:e})}function v(e){return Object(n["b"])({url:r.addSystemGroup,method:"post",data:e})}function h(e){return Object(n["b"])({url:r.updateSystemGroupById,method:"patch",data:e})}function g(e){return Object(n["b"])({url:"".concat(r.delSystemGroupById).concat(e),method:"delete"})}function b(e){return Object(n["b"])({url:r.getNormalGroupDataPag,method:"get",params:e})}function y(e){return Object(n["b"])({url:r.getStrategyGroupDataPag,method:"get",params:e})}function x(e){return Object(n["b"])({url:r.getProductGroupDataPag,method:"get",params:e})}function w(e){return Object(n["b"])({url:r.addSystemGroupData,method:"post",data:e})}function _(e){return Object(n["b"])({url:"".concat(r.delSystemGroupDataById).concat(e),method:"delete"})}function O(e){return Object(n["b"])({url:r.updateSystemGroupDataById,method:"patch",data:e})}}}]);