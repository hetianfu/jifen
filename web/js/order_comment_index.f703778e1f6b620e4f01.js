(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"308":function(e,t,n){"use strict";n.d(t,"b",(function(){return asyncCalcOrder})),n.d(t,"p",(function(){return submitOrder})),n.d(t,"c",(function(){return asyncCalcScoresOrder})),n.d(t,"q",(function(){return submitScoresOrder})),n.d(t,"k",(function(){return goH5ToPay})),n.d(t,"a",(function(){return afterToPay})),n.d(t,"l",(function(){return goToPayInMp})),n.d(t,"m",(function(){return goToWalletPay})),n.d(t,"i",(function(){return getOrderPage})),n.d(t,"h",(function(){return getOrderInfo})),n.d(t,"g",(function(){return getOrderExpress})),n.d(t,"j",(function(){return getQrCode})),n.d(t,"e",(function(){return confirmReceipt})),n.d(t,"d",(function(){return cancelOrderInfo})),n.d(t,"o",(function(){return refundOrder})),n.d(t,"f",(function(){return getConnectUser})),n.d(t,"n",(function(){return postComplainAdd}));var o=n(9),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function asyncCalcOrder(e){return o.a.post("/order-pays/calculate-order",e)}function submitOrder(e){var t=new(n(45))(navigator.userAgent);return o.a.post("/order-pays/submit-order",r({},e,{"phoneMode":t.mobile()}))}function asyncCalcScoresOrder(e){return o.a.post("/order-scores/calculate-order",e)}function submitScoresOrder(e){return o.a.post("/order-scores/submit-order",e)}function goH5ToPay(e){return o.a.get("/order-pays/h5-to-pay/"+e)}function afterToPay(e){return o.a.get("/order-pays/after-to-pay/"+e)}function goToPayInMp(e){return o.a.request({"url":"/order-pays/go-to-pay-in-mp/"+e})}function goToWalletPay(e){return o.a.get("/order-pays/wallet-to-pay/"+e)}function getOrderPage(e){return o.a.get("/orders/get-page",{"params":e})}function getOrderInfo(e){return o.a.get("/orders/get-by-id/"+e)}function getOrderExpress(e){return o.a.get("/order/query-kdi?expressNo="+e)}function getQrCode(e){return o.a.get("/orders/get-qr-code/"+e)}function confirmReceipt(e){return o.a.put("/orders/receive-by-id",{"id":e})}function cancelOrderInfo(e){return o.a.put("/orders/cancel-by-id/"+e)}function refundOrder(e){return o.a.post("/orders/refund-by-id",e)}function getConnectUser(){return o.a.get("/orders/get-connect-user")}function postComplainAdd(e){return o.a.post("/complain/add",e)}},"313":function(e,t,n){"use strict";n.d(t,"a",(function(){return addGoodsComment})),n.d(t,"d",(function(){return getCommentPage})),n.d(t,"c",(function(){return getCommentInfo})),n.d(t,"e",(function(){return getRecommendPage})),n.d(t,"b",(function(){return getByOrderIdPage}));var o=n(9);function addGoodsComment(e){return o.a.post("/product-replies/add",e)}function getCommentPage(e){return o.a.get("/product-replies/get-page",{"params":e})}function getCommentInfo(e){return o.a.get("/product-replies/get-by-id/"+e)}function getRecommendPage(e){return o.a.get("/product-replies/get-recommend-page",{"params":e})}function getByOrderIdPage(e){return o.a.get("/product-replies/get-by-order-id/"+e)}},"559":function(e,t,n){},"628":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var o=n(1),r=n(131),a=n(3),c=n(43),s=n(613),i=n(615),d=(n(559),n(668)),u=n(2),l=n(308),p=n(313),m=n(306),f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),g=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));e.config={"navigationBarTitleText":"评价"};var t=e.$router.params;return e.state={"id":t.id,"loading":!0,"cartList":[],"imageList":[],"goodsRate":{},"goodsComment":{},"goodsImages":{}},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),f(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getOrderInfo()}},{"key":"getOrderInfo","value":function getOrderInfo(){var e=this,t=this.state.id;Object(l.h)(t).then((function(t){var n=t.data,o=n.isReply,c=n.cartSnap;if(o)Object(r.c)({"title":"提示","content":"您已经评论过了！","showCancel":!1,"success":function success(){a.a.navigateBack()}});else{for(var s={},i=0;i<c.length;i++)s[i]=5;e.setState({"cartList":c,"goodsRate":s},(function(){e.setState({"loading":!1})}))}}))}},{"key":"onChangeGoodsRate","value":function onChangeGoodsRate(e,t){var n=this.state.goodsRate;n[e]=t,this.setState({"goodsRate":n})}},{"key":"onChangeGoodsImg","value":function onChangeGoodsImg(e,t){var n=this.state.goodsImages;n[e]=t,this.setState({"goodsImages":n})}},{"key":"onInputGoodsComment","value":function onInputGoodsComment(e,t){var n=t.detail.value,o=this.state.goodsComment;o[e]=n,this.setState({"goodsComment":o})}},{"key":"onSubmitComment","value":function onSubmitComment(){for(var e=this.state,t=e.id,n=e.cartList,o=e.goodsRate,c=e.goodsImages,s=e.goodsComment,i=[],d=0;d<n.length;d++)i.push({"pics":c[d],"shopId":n[d].shopId,"comment":s[d],"productScore":o[d],"productId":n[d].id,"productSnap":n[d]});Object(r.b)({"title":"请稍后","mask":!0}),Object(p.a)({"orderId":t,"list":i}).then((function(){Object(r.a)(),Object(r.d)({"title":"评价成功"}),a.a.navigateBack()}))}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.loading,r=t.cartList,a=t.goodsImages,l=t.goodsRate;return o.l.createElement(c.a,{"className":"comment-page"},n&&o.l.createElement(m.J,{"isCover":!0}),o.l.createElement(c.a,{"className":"comment-scroll"},o.l.createElement(c.a,{"className":"comment-card"},o.l.createElement(c.a,{"className":"card-title"},"请对你购买的商品进行评价~"),o.l.createElement(c.a,{"className":"goods-list"},r.map((function(t,n){return o.l.createElement(c.a,{"key":t.id,"className":"goods-item d-f f-d-c"},o.l.createElement(c.a,{"className":"goods-info d-f"},o.l.createElement(s.a,{"src":Object(u.q)(t.images),"className":"goods-img"}),o.l.createElement(c.a,{"className":"goods-box d-f f-d-c j-c-b"},o.l.createElement(c.a,{"className":"goods-name t-o-e"},t.name),t.specSnap&&o.l.createElement(c.a,{"className":"goods-sku t-o-e-2"},t.specSnap))),o.l.createElement(c.a,{"className":"goods-rate d-f a-i-c"},o.l.createElement(c.a,{"className":"rate-left"},"评分"),o.l.createElement(d.a,{"value":l[n],"size":28,"margin":20,"onChange":e.onChangeGoodsRate.bind(e,n)}),o.l.createElement(c.a,{"className":"rate-right"},function getRateText(e){return["非常差","差","一般","好","非常好"][e-1]}(l[n]))),o.l.createElement(c.a,{"className":"goods-comment"},o.l.createElement(i.a,{"className":"comment-text","onInput":e.onInputGoodsComment.bind(e,n)}),o.l.createElement(m.g,{"list":a[n],"onChange":e.onChangeGoodsImg.bind(e,n)})))})))),o.l.createElement(c.a,{"className":"comment-foot f-g-5"},o.l.createElement(c.a,{"className":"submit-btn f-g-5","hoverClass":"hover-class--btn","onClick":this.onSubmitComment.bind(this)},"提交评价"))))}},{"key":"componentDidMount","value":function componentDidMount(){g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}(a.a.Component)}}]);