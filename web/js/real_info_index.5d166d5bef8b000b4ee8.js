(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"304":function(e,t,n){"use strict";n.d(t,"x",(function(){return getUserInfo})),n.d(t,"w",(function(){return getUserCommissions})),n.d(t,"f",(function(){return asyncWechatInfo})),n.d(t,"q",(function(){return getMemberCount})),n.d(t,"r",(function(){return getMemberPermanent})),n.d(t,"m",(function(){return getCartPage})),n.d(t,"b",(function(){return addCart})),n.d(t,"l",(function(){return getCartInfo})),n.d(t,"i",(function(){return delBatchCart})),n.d(t,"C",(function(){return updateCart})),n.d(t,"D",(function(){return updateCartNumber})),n.d(t,"k",(function(){return getAddressList})),n.d(t,"a",(function(){return addAddress})),n.d(t,"B",(function(){return updateAddress})),n.d(t,"j",(function(){return getAddressInfo})),n.d(t,"A",(function(){return setDefaultAddress})),n.d(t,"h",(function(){return delAddressInfo})),n.d(t,"z",(function(){return getWalletPage})),n.d(t,"E",(function(){return userCharges})),n.d(t,"g",(function(){return buyMember})),n.d(t,"t",(function(){return getScoreConfig})),n.d(t,"v",(function(){return getSignScore})),n.d(t,"d",(function(){return addSignScore})),n.d(t,"u",(function(){return getScorePage})),n.d(t,"y",(function(){return getUserScore})),n.d(t,"s",(function(){return getMyCouponPage})),n.d(t,"n",(function(){return getCouponPage})),n.d(t,"c",(function(){return addCoupon})),n.d(t,"e",(function(){return applyDrawToWallet})),n.d(t,"p",(function(){return getGisciplePage})),n.d(t,"o",(function(){return getGiscipleDetailPage}));var o=n(9);n(4),Object.assign;function getUserInfo(){return o.a.get("/users/get-info",{},{"isAuth":!1})}function getUserCommissions(){return o.a.get("/user-commissions/get",{},{"isAuth":!1})}function asyncWechatInfo(e){return o.a.put("/users/async-wechat-info",e)}function getMemberCount(){return o.a.get("/users/count-vip-pay")}function getMemberPermanent(){return o.a.get("/users/permanent-vip-pay")}function getCartPage(e){return o.a.get("/users/get-shop-cart-page",{"params":e},{"isAuth":!1})}function addCart(e){return o.a.post("/users/add-shop-cart",e)}function getCartInfo(e){return o.a.get("/users/get-shop-cart-by-id/"+e)}function delBatchCart(e){return o.a.delete("/users/del-shop-cart",e)}function updateCart(e){return o.a.put("/users/update-shop-cart-by-id",e)}function updateCartNumber(e){return o.a.put("/users/update-shop-cart-number",e)}function getAddressList(){return o.a.get("/users/get-address-list")}function addAddress(e){return o.a.post("/users/add-address",e)}function updateAddress(e){return o.a.put("/users/update-address-by-id",e)}function getAddressInfo(e){return o.a.get("/users/get-address-by-id/"+e)}function setDefaultAddress(e){return o.a.put("/users/set-default-address",e)}function delAddressInfo(e){return o.a.delete("/users/del-address-by-id/"+e)}function getWalletPage(e){return o.a.request({"url":"/users/get-wallet-detail-page","data":e})}function userCharges(e){return o.a.post("/user-charges/charge",e)}function buyMember(e){return o.a.post("/user-charges/buy-vip",e)}function getScoreConfig(){return o.a.get("/user-scores/get-score-config")}function getSignScore(){return o.a.get("/user-scores/get-sign-score")}function addSignScore(){return o.a.post("/user-scores/sign-score")}function getScorePage(e){return o.a.get("/user-scores/get-detail-page",{"params":e})}function getUserScore(){return o.a.get("/user-scores/user-score")}function getMyCouponPage(e){return o.a.get("/users/get-my-coupon-page",{"params":e})}function getCouponPage(e){return o.a.get("/users/get-coupon-page",{"params":e})}function addCoupon(e){return o.a.post("/users/add-coupon",e)}function applyDrawToWallet(e){return o.a.post("/users/apply-draw-to-wallet",e)}function getGisciplePage(e){return o.a.get("/users/get-disciple-page",{"params":e})}function getGiscipleDetailPage(e){return o.a.get("/user-commissions/get-disciple-detail-page",{"params":e})}},"309":function(e,t,n){"use strict";n.d(t,"b",(function(){return filterStyles})),n.d(t,"a",(function(){return filterGoodsInfo}));var o=n(308),r=n(10),a=n(305),s=n(14);function filterStyles(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[null,void 0,"","px","rpx","0rpx",!1],n={};return Object.keys(e).filter((function(o){-1==t.indexOf(e[o])&&(n[o]=e[o])})),n}function filterGoodsInfo(e){switch(e.shareAmount=r.a.head(e.sharedAmount),e.saveMoney=o.a.Sub(Number(e.salePrice),Number(e.memberPrice)),e.unitName=e.unitSnap&&e.unitSnap.name||"件",e.isActivity=!!e.strategy,e.description=e.description&&Object(s.e)(e.description),e.shareAmount=e.shareAmount&&Object(s.d)(e.shareAmount),e.type){case a.b.REAL:case a.b.VIRTUAL:case a.b.SCORE:e.disabled=!(e.isOnSale&&e.stockNumber),e.disabledText=e.isOnSale?e.stockNumber?"":"已售罄":"已下架"}var t=e.strategy;switch(t&&e.saleStrategy){case a.b.SECKILL:e.seconds=t.status?t.endSeconds:t.startSeconds,e.status=t.status,e.statusName={"-1":"已结束","0":"未开始"}[t.status],e.limitNumber=t.limitNumber,e.disabled=t.status<1,e.disabledText={"-1":"已结束","0":"未开始"}[t.status]}return e}},"357":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(1),r=n(352),a=n(40),s=n(404),c=(n(358),n(14)),i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var u=function(e){function SeckillCountdown(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SeckillCountdown);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(SeckillCountdown.__proto__||Object.getPrototypeOf(SeckillCountdown)).call(this));return e.state={"time":Object(c.b)()},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SeckillCountdown,e),i(SeckillCountdown,[{"key":"onIntervalCallBack","value":function onIntervalCallBack(e){this.setState({"time":e})}},{"key":"render","value":function render(){var e=this.state.time;return o.l.createElement(a.a,{"className":"goods-count-down bnn-number "},!!e.hours&&o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.hours)),!!e.hours&&":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.minutes)),":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.seconds)),":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.millisecond)))}}]),SeckillCountdown}(r.a)},"358":function(e,t,n){},"523":function(e,t,n){},"524":function(e,t,n){e.exports=n.p+"static/images/time-limit-exchange.png"},"588":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var o=n(1),r=n(2),a=n(126),s=n(122),c=n(40),i=n(404),u=n(339),l=n(364),d=(n(523),n(315),n(322)),m=n.n(d),f=n(309),p=n(304),g=n(306),b=n(302),h=n(320),y=n(303),E=n(316),N=n(357),_=n(524),S=n.n(_),v=n(17),w=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),C=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var P=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationStyle":"custom"},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),w(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getGoodsInfo(),this.getGoodsPage(),this.getCommentPage()}},{"key":"onPageScroll","value":function onPageScroll(e){this.onScroll(e)}},{"key":"getGoodsInfo","value":function getGoodsInfo(){var e=this,t=this.$router.params,n=m()().endOf("day").valueOf(),o=Number(new Date),a=Math.floor((n-o)/1e3);Object(g.b)(t.id).then((function(t){var n=t.data;n.seconds=a,n.timestamp=Number(new Date),e.setState({"goodsInfo":Object(f.a)(n),"comboList":n.skuDetail||[],"goodsImages":n.images},(function(){e.setState({"loadingStatus":!1}),setTimeout((function(){e.getNodeLocation()}),200)}))})).catch((function(e){console.log(e),setTimeout((function(){r.a.navigateBack()}),800)}))}},{"key":"setShowSelect","value":function setShowSelect(e){this.setState({"showSelect":e})}},{"key":"onConfirm","value":function onConfirm(e,t,n){"cart"===e?Object(p.b)({"productId":t.productId,"skuId":t.skuId,"number":n}).then((function(){Object(a.d)({"title":"添加成功"})})):Object(b.e)({"cartList":[{"id":t.productId,"skuId":t.skuId,"number":n}]}),this.setState({"showSelect":!1})}},{"key":"render","value":function render(){var e=this.state,t=e.opacity,n=e.nodeKey,r=e.nodeList,a=(e.userInfo,e.goodsInfo),s=e.goodsList,d=e.showSelect,m=(e.showShareImg,e.shareImg,e.commentRes),f=e.loadingStatus;return o.l.createElement(c.a,{"className":"goods-page"},f&&o.l.createElement(y.E,null),o.l.createElement(y.s,{"opacity":t,"nodeKey":n,"nodeList":r,"onSwitchNode":this.onSwitchNode.bind(this)}),o.l.createElement(c.a,{"className":"goods-scroll"},o.l.createElement(c.a,{"id":"goods-info","className":"goods-card"},o.l.createElement(y.o,{"images":a.images,"video":{"url":a.video,"poster":a.videoCoverImg}}),o.l.createElement(c.a,{"className":"goods-activity d-f a-i-s"},o.l.createElement(c.a,{"className":"activity-left f-g-2 f-d-c"},o.l.createElement(i.a,{"className":"left-title"},"库存告急"),o.l.createElement(i.a,{"className":"activity-desc p-t-10"},a.limitNumber?"每人限购 "+a.limitNumber+a.unitName:"限时兑换")),o.l.createElement(c.a,{"className":"activity-right f-g-8 f-d-c"},o.l.createElement(i.a,{"className":"activity-desc p-b-10"},"距结束"),o.l.createElement(N.a,{"seconds":a.seconds}))),o.l.createElement(c.a,{"className":"goods-head"},o.l.createElement(c.a,{"className":"d-f a-i-c j-c-b"},o.l.createElement(c.a,{"className":"price d-f a-i-b"},o.l.createElement(y.G,{"goods":a,"priceSize":44,"className":"m-r-10"}),o.l.createElement(y.L,{"goods":a,"priceSize":32}),100*a.originPrice>100*a.salePrice&&o.l.createElement(c.a,{"style":"color: #333","className":"origin-price bnn-number m-l-10"},"￥",a.originPrice)),o.l.createElement(c.a,{"className":"user-like f-g-5"},o.l.createElement(i.a,{"className":"like-icon bnn-icon m-r-10"},""),a.storeCount,"人喜欢")),o.l.createElement(c.a,{"className":"goods-name"},a.name),o.l.createElement(c.a,{"className":"stock-box d-f a-i-c j-c-b"},o.l.createElement(c.a,{"className":""},"已兑换",a.salesNumber,a.unitName),o.l.createElement(c.a,{"className":"integral-save d-f a-i-c"},o.l.createElement(c.a,{"className":"save-icon bnn-icon"},""),o.l.createElement(c.a,{"className":"save-box d-f f-d-c"},o.l.createElement(c.a,{"className":"save-text"},Object(v.e)(),"已省"),o.l.createElement(c.a,{"className":"save-price bnn-number"},a.originPrice-a.salePrice,"元")))),o.l.createElement(c.a,{"className":"tip-list d-f f-w-w"},a.tips&&a.tips.map((function(e,t){return o.l.createElement(c.a,{"key":t,"className":"tip-item d-f a-i-c"},o.l.createElement(c.a,{"className":"bnn-icon tip-icon"},""),o.l.createElement(c.a,{"className":"tip-text l-h-o"},e))})))),o.l.createElement(c.a,{"className":"sdasd"},o.l.createElement("img",{"src":S.a}))),m.list&&!!m.list.length&&o.l.createElement(c.a,{"id":"goods-comment","className":"goods-card goods-card__body comment-card"},o.l.createElement(c.a,{"className":"goods-card__head"},o.l.createElement(y.R,null,"用户评论")),o.l.createElement(c.a,{"className":"comment-list"},m.list.map((function(e){return o.l.createElement(y.e,{"key":e.id,"info":e,"className":"comment-item"})})),o.l.createElement(c.a,{"className":"see-more f-g-5","onClick":function onClick(){return Object(b.h)(a.id)}},"查看更多好评（",m.totalCount,"）"))),o.l.createElement(c.a,{"className":"goods-body"},a.description&&o.l.createElement(c.a,{"id":"goods-desc","className":"goods-card"},o.l.createElement(c.a,{"className":"goods-card__head"},o.l.createElement(y.R,null,"商品详情")),o.l.createElement(c.a,{"className":"rich-text-wrap goods-card__body"},o.l.createElement(u.a,{"nodes":a.description}))),o.l.createElement(c.a,{"id":"goods-hot","className":"goods-card"},o.l.createElement(c.a,{"className":"goods-card__head"},o.l.createElement(y.R,null,"更多美好生活")),o.l.createElement(y.q,{"list":s}))),o.l.createElement(c.a,{"className":"goods-foot--height"})),o.l.createElement(E.a,{"menus":["home","user"]},o.l.createElement(l.a,{"disabled":a.disabled,"className":"goods-foot__btns-btn xf-btn xf-btn-primary","onClick":this.setState.bind(this,{"showSelect":"buy"})},a.disabledText||"立即兑换")),o.l.createElement(y.w,{"goods":a,"isOpened":d,"onClose":this.setState.bind(this,{"showSelect":!1}),"onConfirm":this.onConfirm.bind(this,d)}),o.l.createElement(y.c,{"top":134}))}},{"key":"componentDidMount","value":function componentDidMount(){C(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&C(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){C(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&C(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this),this._offPageScroll=Object(s.a)({"callback":this.onPageScroll,"ctx":this})}},{"key":"componentDidHide","value":function componentDidHide(){C(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&C(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this),this._offPageScroll&&this._offPageScroll()}}]),Index}(h.a)}}]);