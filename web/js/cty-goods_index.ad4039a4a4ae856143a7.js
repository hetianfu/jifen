(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"306":function(t,e,n){"use strict";n.d(e,"a",(function(){return getPage})),n.d(e,"b",(function(){return infoById})),n.d(e,"c",(function(){return skuById}));var o=n(9);function getPage(t){return o.a.get("/products/get-page",{"params":t})}function infoById(t,e){return o.a.get("/products/get-by-id/"+t,e)}function skuById(t){return o.a.get("/products/get-sku-by-id/"+t)}},"354":function(t,e,n){"use strict";n.d(e,"a",(function(){return getCategoryList}));var o=n(9);function getCategoryList(){return o.a.get("/categories/get-list")}},"542":function(t,e,n){},"602":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return b}));var o=n(1),a=n(2),r=n(40),i=n(410),c=n(8),l=n.n(c),s=n(306),u=n(302),d=n(20),p=n(354),y=n(303),f=(n(542),n(14)),g=n(310),m=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}(),h=function get(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:get(a,e,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var b=function(t){function Index(){_classCallCheck(this,Index);var t=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return t.config={"backgroundTextStyle":"dark","navigationBarTitleText":"商品分类"},t.state={"page":1,"limit":10,"ctyKey":0,"ctyList":[],"loading":!1,"dataList":[],"loadStatus":"loading"},t}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Index,t),m(Index,[{"key":"componentDidMount","value":function componentDidMount(){this.getList()}},{"key":"getList","value":function getList(){var t=this;Object(p.a)().then((function(e){var n=e.data;t.setState({"ctyList":n},(function(){t.getGoods()}))}))}},{"key":"getGoods","value":function getGoods(){var t=this,e=this.state,n=e.page,o=e.limit,a=e.ctyKey,r=e.ctyList,i=e.dataList;"noMore"!==e.loadStatus&&Object(s.a)({"page":n,"limit":o,"categoryId":r[a].id}).then((function(e){var a=e.data,r=a.list,c=a.totalCount;t.setState({"page":n+1,"dataList":1===n?r:i.concat(r),"loadStatus":n*o>=c?"noMore":"loading"},(function(){t.setState({"loading":!1})}))}))}},{"key":"onSwitchCty","value":function onSwitchCty(t){var e=this;document.getElementById("dataScroll").scrollIntoView(),this.setState({"page":1,"limit":10,"ctyKey":t,"dataList":[],"loadStatus":"loading"},(function(){e.getGoods()}))}},{"key":"render","value":function render(){var t=this,e=this.state,n=e.loading,a=e.ctyKey,c=e.ctyList,s=e.dataList;return o.l.createElement(r.a,{"className":"ctyGoods-page xf-page"},n&&o.l.createElement(y.E,null),o.l.createElement(r.a,{"className":"page-body","style":{"paddingBottom":d.m+"px"}},o.l.createElement(i.a,{"scrollY":!0,"className":"cty-list","style":{"height":"calc(100vh - "+d.m+"px)"}},c.map((function(e,n){return o.l.createElement(r.a,{"key":e.id,"className":l()("cty-item",{"cty-active":a===n}),"onClick":t.onSwitchCty.bind(t,n)},e.name)}))),o.l.createElement(r.a,{"className":"cty-right"},o.l.createElement(r.a,{"id":"dataScroll","className":"cty-box"},s.map((function(t,e){return o.l.createElement(r.a,{"key":e,"className":"cty-goods","onClick":function onClick(){return Object(u.k)(t)}},o.l.createElement(r.a,{"className":"cty-goods_img"},o.l.createElement(g.a,{"info":t,"lazyLoad":!0}),t.salesNumber&&o.l.createElement(r.a,{"className":"salesNumber"},"兑换热度 ",Object(f.n)(t.salesNumber,"+"))),o.l.createElement(r.a,{"className":"cty-goods_name t-o-e-2"},t.name),o.l.createElement(r.a,{"className":"d-f a-i-b m-t-10"},o.l.createElement(y.G,{"goods":t,"priceSize":30,"className":"m-r-10"}),o.l.createElement(y.L,{"goods":t,"priceSize":28})))}))))),o.l.createElement(y.P,null))}},{"key":"componentDidShow","value":function componentDidShow(){h(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&h(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){h(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&h(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}(a.a.Component)}}]);