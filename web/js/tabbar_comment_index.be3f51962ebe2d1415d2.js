(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"313":function(e,t,n){"use strict";n.d(t,"a",(function(){return addGoodsComment})),n.d(t,"d",(function(){return getCommentPage})),n.d(t,"c",(function(){return getCommentInfo})),n.d(t,"e",(function(){return getRecommendPage})),n.d(t,"b",(function(){return getByOrderIdPage}));var r=n(9);function addGoodsComment(e){return r.a.post("/product-replies/add",e)}function getCommentPage(e){return r.a.get("/product-replies/get-page",{"params":e})}function getCommentInfo(e){return r.a.get("/product-replies/get-by-id/"+e)}function getRecommendPage(e){return r.a.get("/product-replies/get-recommend-page",{"params":e})}function getByOrderIdPage(e){return r.a.get("/product-replies/get-by-order-id/"+e)}},"314":function(e,t,n){var r=n(315);"string"==typeof r&&(r=[[e.i,r,""]]);var o={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};n(70)(r,o);r.locals&&(e.exports=r.locals)},"315":function(e,t,n){(t=n(69)(!1)).push([e.i,".rmc-pull-to-refresh-content {\r\n  transform-origin: left top 0px;\r\n}\r\n.rmc-pull-to-refresh-content-wrapper {\r\n  overflow: hidden;\r\n}\r\n\r\n.rmc-pull-to-refresh-transition {\r\n  transition: transform 0.3s;\r\n}\r\n\r\n\r\n@keyframes rmc-pull-to-refresh-indicator {\r\n  50% {\r\n    opacity: 0.2;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.rmc-pull-to-refresh-indicator {\r\n  text-align: center;\r\n  height: 30px;\r\n  line-height: 10px;\r\n}\r\n\r\n.rmc-pull-to-refresh-indicator > div {\r\n  background-color: grey;\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 100%;\r\n  margin: 3px;\r\n  animation-fill-mode: both;\r\n  display: inline-block;\r\n  animation: rmc-pull-to-refresh-indicator 0.5s 0s infinite linear;\r\n}\r\n.rmc-pull-to-refresh-indicator > div:nth-child(0) {\r\n  animation-delay: -0.1s !important;\r\n}\r\n.rmc-pull-to-refresh-indicator > div:nth-child(1) {\r\n  animation-delay: -0.2s !important;\r\n}\r\n.rmc-pull-to-refresh-indicator > div:nth-child(2) {\r\n  animation-delay: -0.3s !important;\r\n}\r\n.rmc-pull-to-refresh-down .rmc-pull-to-refresh-indicator {\r\n  margin-top: -25px;\r\n}\r\n",""]),e.exports=t},"319":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(1),o=n(660),a=n(3),i=n(43),s=n(422),c=n(668),l=n(12),u=n.n(l),f=n(2),d=n(68),p=n(317),h=n.n(p),m=(n(320),n(306)),g=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function Index(e){_classCallCheck(this,Index);var t=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return t.state={"info":e.info},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),g(Index,[{"key":"onSeeImg","value":function onSeeImg(e,t,n){n.stopPropagation(),Object(o.a)({"current":t,"urls":e})}},{"key":"render","value":function render(){var e=this,t="comment-item",n=this.state.info,o=void 0===n?{}:n,a=this.props,l=a.showGoods,p=a.className,g=Object.assign(o.productInfo||{},o.productSnap||{}),_=o.userInfo||{};return r.l.createElement(i.a,{"className":u()(t,p)},r.l.createElement(i.a,{"className":t+"__head","onClick":function onClick(){return Object(d.j)(o.id)}},r.l.createElement(i.a,{"className":t+"__user"},r.l.createElement(i.a,{"className":t+"__user-avatar"},r.l.createElement("img",{"src":_.headImg||h.a})),r.l.createElement(i.a,{"className":t+"__user-info d-f f-d-c"},r.l.createElement(i.a,{"className":t+"__user-name t-o-e"},function hideName(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.length>2){var t=e.substr(0,1),n=e.substr(-1,1);return t+"**"+n}return e}(_.nickName)),r.l.createElement(i.a,{"className":t+"__grade"},r.l.createElement(c.a,{"value":o.productScore,"size":16}))),r.l.createElement(i.a,{"className":t+"__user-time"},Object(f.g)(o.createdAt,"YYYY-MM-DD"))),r.l.createElement(i.a,{"className":t+"__content"},o.comment||"这家伙很懒，什么也没有留下。"),o.pics&&o.pics.length&&r.l.createElement(i.a,{"className":t+"__photo d-f f-w-w"},o.pics.map((function(n,a){return r.l.createElement(i.a,{"key":a,"className":t+"__photo-item","onClick":e.onSeeImg.bind(e,o.pics,n)},r.l.createElement("img",{"src":n}))})))),l&&r.l.createElement(i.a,{"className":t+"__goods","onClick":function onClick(){return Object(d.m)(g)}},r.l.createElement(i.a,{"className":t+"__goods-img"},r.l.createElement("img",{"src":Object(f.q)(g.images)})),r.l.createElement(i.a,{"className":t+"__goods-info d-f f-d-c j-c-b"},r.l.createElement(i.a,{"className":t+"__goods-name t-o-e"},g.name),g.specSnap&&r.l.createElement(i.a,{"className":t+"__goods-attr t-o-e-2"},g.specSnap),r.l.createElement(i.a,{"className":t+"__goods-other d-f j-c-b"},r.l.createElement(i.a,{"className":t+"__price d-f a-i-b"},r.l.createElement(m.L,{"goods":g,"priceSize":32,"className":"m-r-10"}),r.l.createElement(m.Q,{"goods":g,"priceSize":28,"isNumber":!0})),r.l.createElement(s.a,{"disabled":!g.isOnSale,"className":t+"__goods-btn xf-btn xf-btn-round xf-btn-danger"},g.isOnSale?"立即抢购":"已下架")))))}}]),Index}(a.a.Component);_.options={"addGlobalClass":!0}},"320":function(e,t,n){},"333":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),o=function stopPullDownRefresh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var o=e.success,a=e.fail,i=e.complete,s={};r.a.eventCenter.trigger("__taroStopPullDownRefresh",{"successHandler":function successHandler(){o&&o(s),i&&i(s),t(s)},"errorHandler":function errorHandler(){a&&a(s),i&&i(s),n(s)}})}))}},"347":function(e,t,n){"use strict";var r,o,a=n(12),i=n.n(a),s=n(1),c=n(3),l=(n(314),function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function StaticRenderer(){return _classCallCheck(this,StaticRenderer),_possibleConstructorReturn(this,(StaticRenderer.__proto__||Object.getPrototypeOf(StaticRenderer)).apply(this,arguments))}return _inherits(StaticRenderer,e),f(StaticRenderer,[{"key":"shouldComponentUpdate","value":function shouldComponentUpdate(e){return e.shouldUpdate}},{"key":"render","value":function render(){return s.l.createElement("div",null,this.props.render())}}]),StaticRenderer}(s.l.Component);function setTransform(e,t){e.transform=t,e.webkitTransform=t,e.MozTransform=t}var p="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),h=!1;try{var m=Object.defineProperty({},"passive",{"get":function get(){h=!0}});window.addEventListener("test",null,m)}catch(e){}var g=!!h&&{"passive":!1},_=(o=r=function(e){function PullToRefresh(){var e,t,n;_classCallCheck(this,PullToRefresh);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=PullToRefresh.__proto__||Object.getPrototypeOf(PullToRefresh)).call.apply(e,[this].concat(o))),n.state={"currSt":"deactivate","dragOnEdge":!1},n.containerRef=null,n.contentRef=null,n._to=null,n._ScreenY=null,n._startScreenY=null,n._lastScreenY=null,n._isMounted=!1,n.shouldUpdateChildren=!1,n.scrollContainer=document.querySelector(".taro-tabbar__panel")||document.body,n.triggerPullDownRefresh=function(){!n.state.dragOnEdge&&n._isMounted&&(n.props.refreshing?(n._lastScreenY=n.props.distanceToRefresh+1,n.setState({"currSt":"release"},(function(){return n.setContentStyle(n._lastScreenY)}))):n.setState({"currSt":"finish"},(function(){return n.reset()})))},n.init=function(){var e=n.scrollContainer;n._to={"touchstart":n.onTouchStart.bind(n,e),"touchmove":n.onTouchMove.bind(n,e),"touchend":n.onTouchEnd.bind(n,e),"touchcancel":n.onTouchEnd.bind(n,e)},Object.keys(n._to).forEach((function(t){e.addEventListener(t,n._to[t],g)}))},n.destroy=function(){var e=n.scrollContainer;Object.keys(n._to).forEach((function(t){e.removeEventListener(t,n._to[t])}))},n.onTouchStart=function(e,t){n._ScreenY=n._startScreenY=t.touches[0].screenY,n._lastScreenY=n._lastScreenY||0},n.isEdge=function(e){var t=n.scrollContainer;return t&&t===document.body?(document.scrollingElement?document.scrollingElement:document.body).scrollTop<=0:e.scrollTop<=0},n.damping=function(e){return Math.abs(n._lastScreenY)>n.props.damping?0:e*=.6*(1-Math.abs(n._ScreenY-n._startScreenY)/window.screen.height)},n.onTouchMove=function(e,t){var r=t.touches[0].screenY;if(!(n._startScreenY>r)&&n.isEdge(e)){n.state.dragOnEdge||(n._ScreenY=n._startScreenY=t.touches[0].screenY,n.setState({"dragOnEdge":!0})),t.cancelable&&t.preventDefault();var o=Math.round(r-n._ScreenY);n._ScreenY=r,n._lastScreenY+=n.damping(o),n.setContentStyle(n._lastScreenY),Math.abs(n._lastScreenY)<n.props.distanceToRefresh?"deactivate"!==n.state.currSt&&n.setState({"currSt":"deactivate"}):"deactivate"===n.state.currSt&&n.setState({"currSt":"activate"}),p&&t.changedTouches[0].clientY<0&&n.onTouchEnd()}},n.onTouchEnd=function(){n.state.dragOnEdge&&n.setState({"dragOnEdge":!1}),"activate"===n.state.currSt?(n.setState({"currSt":"release"}),n.props.onRefresh()):"release"===n.state.currSt?(n._lastScreenY=n.props.distanceToRefresh+1,n.setContentStyle(n._lastScreenY)):n.reset()},n.reset=function(){n._lastScreenY=0,n.setContentStyle(0)},n.setContentStyle=function(e){n.contentRef&&setTransform(n.contentRef.style,e?"translate3d(0px,"+e+"px,0)":"none")},_possibleConstructorReturn(n,t)}return _inherits(PullToRefresh,e),f(PullToRefresh,[{"key":"shouldComponentUpdate","value":function shouldComponentUpdate(e){return this.shouldUpdateChildren=this.props.children!==e.children,!0}},{"key":"componentDidUpdate","value":function componentDidUpdate(e){e!==this.props&&e.refreshing!==this.props.refreshing&&this.triggerPullDownRefresh()}},{"key":"componentDidMount","value":function componentDidMount(){this.triggerPullDownRefresh(),this._isMounted=!0}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"render","value":function render(){var e=this,t=u({},this.props);delete t.damping;var n=t.className,r=t.prefixCls,o=t.children,a=(t.onRefresh,t.refreshing,t.indicator,t.distanceToRefresh,function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["className","prefixCls","children","onRefresh","refreshing","indicator","distanceToRefresh"])),c=s.l.createElement(d,{"shouldUpdate":this.shouldUpdateChildren,"render":function render(){return o}}),l=function renderRefresh(t){var n=e.state,o=n.currSt,a=n.dragOnEdge,l=i()(t,!a&&r+"-transition"),u="activate"===o||"release"===o;return s.l.createElement("div",{"className":r+"-content-wrapper"},s.l.createElement("div",{"className":l,"ref":function ref(t){e.contentRef=t}},u&&s.l.createElement("div",{"className":r+"-indicator"},s.l.createElement("div",null),s.l.createElement("div",null),s.l.createElement("div",null)),c))};return this.scrollContainer?l(r+"-content "+r+"-down"):s.l.createElement("div",u({"ref":function ref(t){e.containerRef=t},"className":i()(n,r,r+"-down")},a),l(r+"-content"))}}]),PullToRefresh}(s.l.Component),r.defaultProps={"prefixCls":"rmc-pull-to-refresh","distanceToRefresh":50,"damping":100,"indicator":{"activate":"release","deactivate":"pull","release":"loading","finish":"finish"}},o),v=function(e){function PullDownRefresh(){var e,t,n;_classCallCheck(this,PullDownRefresh);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=PullDownRefresh.__proto__||Object.getPrototypeOf(PullDownRefresh)).call.apply(e,[this].concat(o))),n.state={"refreshing":!1},n.isBound=!1,n.listeners=[],n.startPullDownRefresh=function(){n.props.onRefresh(),n.setState({"refreshing":!0})},n.stopPullDownRefresh=function(){n.setState({"refreshing":!1})},n.getPtrRef=function(e){n.ptrRef=e},n.bindEvent=function(){n.isBound||(n.isBound=!0,n.ptrRef&&n.ptrRef.init(),n.listeners=[["__taroStartPullDownRefresh",function(e){var t=e.successHandler,r=e.errorHandler;try{n.startPullDownRefresh(),t({"errMsg":"startPullDownRefresh: ok"})}catch(e){r({"errMsg":"startPullDownRefresh: fail"})}}],["__taroStopPullDownRefresh",function(e){var t=e.successHandler,r=e.errorHandler;try{n.stopPullDownRefresh(),t({"errMsg":"stopPullDownRefresh: ok"})}catch(e){r({"errMsg":"stopPullDownRefresh: fail"})}}]],n.listeners.forEach((function(e){var t=l(e,2),n=t[0],r=t[1];c.a.eventCenter.on(n,r)})))},n.unbindEvent=function(){n.isBound=!1,n.ptrRef&&n.ptrRef.destroy(),n.listeners.forEach((function(e){var t=l(e,2),n=t[0],r=t[1];c.a.eventCenter.off(n,r)}))},_possibleConstructorReturn(n,t)}return _inherits(PullDownRefresh,e),f(PullDownRefresh,[{"key":"componentDidMount","value":function componentDidMount(){this.bindEvent()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.unbindEvent()}},{"key":"render","value":function render(){var e={"distanceToRefresh":100,"damping":200,"refreshing":this.state.refreshing,"onRefresh":this.startPullDownRefresh,"ref":this.getPtrRef};return s.l.createElement(_,e,this.props.children)}}]),PullDownRefresh}(s.l.Component);t.a=v},"538":function(e,t,n){},"620":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var r=n(1),o=n(333),a=n(128),i=n(3),s=n(43),c=n(347),l=n(306),u=(n(538),n(2)),f=n(16),d=n(313),p=n(8),h=n(319),m=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),g=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"backgroundColor":"#FFDD00","backgroundTextStyle":"dark","enablePullDownRefresh":!0,"navigationBarTitleText":"口碑好评","navigationBarTextStyle":"black","navigationBarBackgroundColor":"#FFDD00"},e.state={"page":1,"limit":10,"loading":!0,"dataList":[],"goodsList":[],"loadStatus":"loading"},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),m(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getPage()}},{"key":"onShareAppMessage","value":function onShareAppMessage(){return{"title":f.c,"path":Object(p.m)()}}},{"key":"onPullDownRefresh","value":function onPullDownRefresh(){var e=this;this.setState({"page":1,"limit":10,"loadStatus":"loading"},(function(){e.getPage()}))}},{"key":"onReachBottom","value":function onReachBottom(){this.getPage()}},{"key":"getPage","value":function getPage(){var e=this,t=this.state,n=t.page,r=t.limit,a=t.dataList;"noMore"!==t.loadStatus&&Object(d.e)({"page":n,"limit":r}).then((function(t){var i=t.data,s=i.list,c=i.totalCount;e.setState({"page":n+1,"dataList":1===n?s:a.concat(s),"loadStatus":n*r>=c?"noMore":"loading"},(function(){Object(o.a)(),e.setState({"loading":!1})}))}))}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.dataList,o=t.loadStatus,a=t.loading,i=r.l.createElement(s.a,{"className":"comment-page"},a&&r.l.createElement(l.J,null),r.l.createElement(s.a,{"className":"comment-list"},n.map((function(e){return r.l.createElement(s.a,{"key":e.id,"className":"comment-box"},r.l.createElement(h.a,{"key":e.id,"info":e,"showGoods":!0}))}))),!Object(u.y)(n,o)&&r.l.createElement(l.I,{"status":o}),Object(u.y)(n,o)&&r.l.createElement(s.a,{"className":"list-empty"},r.l.createElement(l.n,null)),r.l.createElement(s.a,{"style":{"height":f.f.tabBarHeight+"px"}}),r.l.createElement(l.U,null));return r.l.createElement(c.a,{"onRefresh":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),"ref":function ref(t){t&&(e.pullDownRefreshRef=t)}},i)}},{"key":"componentDidMount","value":function componentDidMount(){g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this),this._offReachBottom=Object(a.a)({"callback":this.onReachBottom,"ctx":this,"onReachBottomDistance":void 0}),this.pullDownRefreshRef&&this.pullDownRefreshRef.bindEvent()}},{"key":"componentDidHide","value":function componentDidHide(){g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&g(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this),this._offReachBottom&&this._offReachBottom(),this.pullDownRefreshRef&&this.pullDownRefreshRef.unbindEvent()}}]),Index}(i.a.Component)}}]);