(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"304":function(e,t,n){"use strict";n.d(t,"x",(function(){return getUserInfo})),n.d(t,"w",(function(){return getUserCommissions})),n.d(t,"f",(function(){return asyncWechatInfo})),n.d(t,"q",(function(){return getMemberCount})),n.d(t,"r",(function(){return getMemberPermanent})),n.d(t,"m",(function(){return getCartPage})),n.d(t,"b",(function(){return addCart})),n.d(t,"l",(function(){return getCartInfo})),n.d(t,"i",(function(){return delBatchCart})),n.d(t,"C",(function(){return updateCart})),n.d(t,"D",(function(){return updateCartNumber})),n.d(t,"k",(function(){return getAddressList})),n.d(t,"a",(function(){return addAddress})),n.d(t,"B",(function(){return updateAddress})),n.d(t,"j",(function(){return getAddressInfo})),n.d(t,"A",(function(){return setDefaultAddress})),n.d(t,"h",(function(){return delAddressInfo})),n.d(t,"z",(function(){return getWalletPage})),n.d(t,"E",(function(){return userCharges})),n.d(t,"g",(function(){return buyMember})),n.d(t,"t",(function(){return getScoreConfig})),n.d(t,"v",(function(){return getSignScore})),n.d(t,"d",(function(){return addSignScore})),n.d(t,"u",(function(){return getScorePage})),n.d(t,"y",(function(){return getUserScore})),n.d(t,"s",(function(){return getMyCouponPage})),n.d(t,"n",(function(){return getCouponPage})),n.d(t,"c",(function(){return addCoupon})),n.d(t,"e",(function(){return applyDrawToWallet})),n.d(t,"p",(function(){return getGisciplePage})),n.d(t,"o",(function(){return getGiscipleDetailPage}));var r=n(9);n(4),Object.assign;function getUserInfo(){return r.a.get("/users/get-info",{},{"isAuth":!1})}function getUserCommissions(){return r.a.get("/user-commissions/get",{},{"isAuth":!1})}function asyncWechatInfo(e){return r.a.put("/users/async-wechat-info",e)}function getMemberCount(){return r.a.get("/users/count-vip-pay")}function getMemberPermanent(){return r.a.get("/users/permanent-vip-pay")}function getCartPage(e){return r.a.get("/users/get-shop-cart-page",{"params":e},{"isAuth":!1})}function addCart(e){return r.a.post("/users/add-shop-cart",e)}function getCartInfo(e){return r.a.get("/users/get-shop-cart-by-id/"+e)}function delBatchCart(e){return r.a.delete("/users/del-shop-cart",e)}function updateCart(e){return r.a.put("/users/update-shop-cart-by-id",e)}function updateCartNumber(e){return r.a.put("/users/update-shop-cart-number",e)}function getAddressList(){return r.a.get("/users/get-address-list")}function addAddress(e){return r.a.post("/users/add-address",e)}function updateAddress(e){return r.a.put("/users/update-address-by-id",e)}function getAddressInfo(e){return r.a.get("/users/get-address-by-id/"+e)}function setDefaultAddress(e){return r.a.put("/users/set-default-address",e)}function delAddressInfo(e){return r.a.delete("/users/del-address-by-id/"+e)}function getWalletPage(e){return r.a.request({"url":"/users/get-wallet-detail-page","data":e})}function userCharges(e){return r.a.post("/user-charges/charge",e)}function buyMember(e){return r.a.post("/user-charges/buy-vip",e)}function getScoreConfig(){return r.a.get("/user-scores/get-score-config")}function getSignScore(){return r.a.get("/user-scores/get-sign-score")}function addSignScore(){return r.a.post("/user-scores/sign-score")}function getScorePage(e){return r.a.get("/user-scores/get-detail-page",{"params":e})}function getUserScore(){return r.a.get("/user-scores/user-score")}function getMyCouponPage(e){return r.a.get("/users/get-my-coupon-page",{"params":e})}function getCouponPage(e){return r.a.get("/users/get-coupon-page",{"params":e})}function addCoupon(e){return r.a.post("/users/add-coupon",e)}function applyDrawToWallet(e){return r.a.post("/users/apply-draw-to-wallet",e)}function getGisciplePage(e){return r.a.get("/users/get-disciple-page",{"params":e})}function getGiscipleDetailPage(e){return r.a.get("/user-commissions/get-disciple-detail-page",{"params":e})}},"306":function(e,t,n){"use strict";n.d(t,"a",(function(){return getPage})),n.d(t,"b",(function(){return infoById})),n.d(t,"c",(function(){return skuById}));var r=n(9);function getPage(e){return r.a.get("/products/get-page",{"params":e})}function infoById(e,t){return r.a.get("/products/get-by-id/"+e,t)}function skuById(e){return r.a.get("/products/get-sku-by-id/"+e)}},"308":function(e,t,n){"use strict";var r={"Mul":function Mul(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.toString(),o=t.toString(),a=void 0,s=void 0;return a=(r.split(".")[1]?r.split(".")[1].length:0)+(o.split(".")[1]?o.split(".")[1].length:0),s=Number(r.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,a),Number(s.toFixed(n))},"Div":function Div(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.toString(),o=t.toString(),a=void 0,s=void 0;return a=(o.split(".")[1]?o.split(".")[1].length:0)-(r.split(".")[1]?r.split(".")[1].length:0),s=Number(r.replace(".",""))/Number(o.replace(".",""))*Math.pow(10,a),Number(s.toFixed(n))},"Add":function Add(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.toString(),o=t.toString(),a=r.split("."),s=o.split("."),i=2==a.length?a[1]:"",c=2==s.length?s[1]:"",l=Math.max(i.length,c.length),u=Math.pow(10,l),d=Number(((e*u+t*u)/u).toFixed(l));return Number(d.toFixed(n))},"Sub":function Sub(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return r.Add(e,-Number(t),n)}};t.a=r},"312":function(e,t,n){var r=n(313);"string"==typeof r&&(r=[[e.i,r,""]]);var o={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};n(65)(r,o);r.locals&&(e.exports=r.locals)},"313":function(e,t,n){(t=n(64)(!1)).push([e.i,".rmc-pull-to-refresh-content {\r\n  transform-origin: left top 0px;\r\n}\r\n.rmc-pull-to-refresh-content-wrapper {\r\n  overflow: hidden;\r\n}\r\n\r\n.rmc-pull-to-refresh-transition {\r\n  transition: transform 0.3s;\r\n}\r\n\r\n\r\n@keyframes rmc-pull-to-refresh-indicator {\r\n  50% {\r\n    opacity: 0.2;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.rmc-pull-to-refresh-indicator {\r\n  text-align: center;\r\n  height: 30px;\r\n  line-height: 10px;\r\n}\r\n\r\n.rmc-pull-to-refresh-indicator > div {\r\n  background-color: grey;\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 100%;\r\n  margin: 3px;\r\n  animation-fill-mode: both;\r\n  display: inline-block;\r\n  animation: rmc-pull-to-refresh-indicator 0.5s 0s infinite linear;\r\n}\r\n.rmc-pull-to-refresh-indicator > div:nth-child(0) {\r\n  animation-delay: -0.1s !important;\r\n}\r\n.rmc-pull-to-refresh-indicator > div:nth-child(1) {\r\n  animation-delay: -0.2s !important;\r\n}\r\n.rmc-pull-to-refresh-indicator > div:nth-child(2) {\r\n  animation-delay: -0.3s !important;\r\n}\r\n.rmc-pull-to-refresh-down .rmc-pull-to-refresh-indicator {\r\n  margin-top: -25px;\r\n}\r\n",""]),e.exports=t},"338":function(e,t,n){"use strict";var r,o,a=n(8),s=n.n(a),i=n(1),c=n(2),l=(n(312),function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function StaticRenderer(){return _classCallCheck(this,StaticRenderer),_possibleConstructorReturn(this,(StaticRenderer.__proto__||Object.getPrototypeOf(StaticRenderer)).apply(this,arguments))}return _inherits(StaticRenderer,e),d(StaticRenderer,[{"key":"shouldComponentUpdate","value":function shouldComponentUpdate(e){return e.shouldUpdate}},{"key":"render","value":function render(){return i.l.createElement("div",null,this.props.render())}}]),StaticRenderer}(i.l.Component);function setTransform(e,t){e.transform=t,e.webkitTransform=t,e.MozTransform=t}var p="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),h=!1;try{var m=Object.defineProperty({},"passive",{"get":function get(){h=!0}});window.addEventListener("test",null,m)}catch(e){}var g=!!h&&{"passive":!1},b=(o=r=function(e){function PullToRefresh(){var e,t,n;_classCallCheck(this,PullToRefresh);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=PullToRefresh.__proto__||Object.getPrototypeOf(PullToRefresh)).call.apply(e,[this].concat(o))),n.state={"currSt":"deactivate","dragOnEdge":!1},n.containerRef=null,n.contentRef=null,n._to=null,n._ScreenY=null,n._startScreenY=null,n._lastScreenY=null,n._isMounted=!1,n.shouldUpdateChildren=!1,n.scrollContainer=document.querySelector(".taro-tabbar__panel")||document.body,n.triggerPullDownRefresh=function(){!n.state.dragOnEdge&&n._isMounted&&(n.props.refreshing?(n._lastScreenY=n.props.distanceToRefresh+1,n.setState({"currSt":"release"},(function(){return n.setContentStyle(n._lastScreenY)}))):n.setState({"currSt":"finish"},(function(){return n.reset()})))},n.init=function(){var e=n.scrollContainer;n._to={"touchstart":n.onTouchStart.bind(n,e),"touchmove":n.onTouchMove.bind(n,e),"touchend":n.onTouchEnd.bind(n,e),"touchcancel":n.onTouchEnd.bind(n,e)},Object.keys(n._to).forEach((function(t){e.addEventListener(t,n._to[t],g)}))},n.destroy=function(){var e=n.scrollContainer;Object.keys(n._to).forEach((function(t){e.removeEventListener(t,n._to[t])}))},n.onTouchStart=function(e,t){n._ScreenY=n._startScreenY=t.touches[0].screenY,n._lastScreenY=n._lastScreenY||0},n.isEdge=function(e){var t=n.scrollContainer;return t&&t===document.body?(document.scrollingElement?document.scrollingElement:document.body).scrollTop<=0:e.scrollTop<=0},n.damping=function(e){return Math.abs(n._lastScreenY)>n.props.damping?0:e*=.6*(1-Math.abs(n._ScreenY-n._startScreenY)/window.screen.height)},n.onTouchMove=function(e,t){var r=t.touches[0].screenY;if(!(n._startScreenY>r)&&n.isEdge(e)){n.state.dragOnEdge||(n._ScreenY=n._startScreenY=t.touches[0].screenY,n.setState({"dragOnEdge":!0})),t.cancelable&&t.preventDefault();var o=Math.round(r-n._ScreenY);n._ScreenY=r,n._lastScreenY+=n.damping(o),n.setContentStyle(n._lastScreenY),Math.abs(n._lastScreenY)<n.props.distanceToRefresh?"deactivate"!==n.state.currSt&&n.setState({"currSt":"deactivate"}):"deactivate"===n.state.currSt&&n.setState({"currSt":"activate"}),p&&t.changedTouches[0].clientY<0&&n.onTouchEnd()}},n.onTouchEnd=function(){n.state.dragOnEdge&&n.setState({"dragOnEdge":!1}),"activate"===n.state.currSt?(n.setState({"currSt":"release"}),n.props.onRefresh()):"release"===n.state.currSt?(n._lastScreenY=n.props.distanceToRefresh+1,n.setContentStyle(n._lastScreenY)):n.reset()},n.reset=function(){n._lastScreenY=0,n.setContentStyle(0)},n.setContentStyle=function(e){n.contentRef&&setTransform(n.contentRef.style,e?"translate3d(0px,"+e+"px,0)":"none")},_possibleConstructorReturn(n,t)}return _inherits(PullToRefresh,e),d(PullToRefresh,[{"key":"shouldComponentUpdate","value":function shouldComponentUpdate(e){return this.shouldUpdateChildren=this.props.children!==e.children,!0}},{"key":"componentDidUpdate","value":function componentDidUpdate(e){e!==this.props&&e.refreshing!==this.props.refreshing&&this.triggerPullDownRefresh()}},{"key":"componentDidMount","value":function componentDidMount(){this.triggerPullDownRefresh(),this._isMounted=!0}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"render","value":function render(){var e=this,t=u({},this.props);delete t.damping;var n=t.className,r=t.prefixCls,o=t.children,a=(t.onRefresh,t.refreshing,t.indicator,t.distanceToRefresh,function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["className","prefixCls","children","onRefresh","refreshing","indicator","distanceToRefresh"])),c=i.l.createElement(f,{"shouldUpdate":this.shouldUpdateChildren,"render":function render(){return o}}),l=function renderRefresh(t){var n=e.state,o=n.currSt,a=n.dragOnEdge,l=s()(t,!a&&r+"-transition"),u="activate"===o||"release"===o;return i.l.createElement("div",{"className":r+"-content-wrapper"},i.l.createElement("div",{"className":l,"ref":function ref(t){e.contentRef=t}},u&&i.l.createElement("div",{"className":r+"-indicator"},i.l.createElement("div",null),i.l.createElement("div",null),i.l.createElement("div",null)),c))};return this.scrollContainer?l(r+"-content "+r+"-down"):i.l.createElement("div",u({"ref":function ref(t){e.containerRef=t},"className":s()(n,r,r+"-down")},a),l(r+"-content"))}}]),PullToRefresh}(i.l.Component),r.defaultProps={"prefixCls":"rmc-pull-to-refresh","distanceToRefresh":50,"damping":100,"indicator":{"activate":"release","deactivate":"pull","release":"loading","finish":"finish"}},o),v=function(e){function PullDownRefresh(){var e,t,n;_classCallCheck(this,PullDownRefresh);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=PullDownRefresh.__proto__||Object.getPrototypeOf(PullDownRefresh)).call.apply(e,[this].concat(o))),n.state={"refreshing":!1},n.isBound=!1,n.listeners=[],n.startPullDownRefresh=function(){n.props.onRefresh(),n.setState({"refreshing":!0})},n.stopPullDownRefresh=function(){n.setState({"refreshing":!1})},n.getPtrRef=function(e){n.ptrRef=e},n.bindEvent=function(){n.isBound||(n.isBound=!0,n.ptrRef&&n.ptrRef.init(),n.listeners=[["__taroStartPullDownRefresh",function(e){var t=e.successHandler,r=e.errorHandler;try{n.startPullDownRefresh(),t({"errMsg":"startPullDownRefresh: ok"})}catch(e){r({"errMsg":"startPullDownRefresh: fail"})}}],["__taroStopPullDownRefresh",function(e){var t=e.successHandler,r=e.errorHandler;try{n.stopPullDownRefresh(),t({"errMsg":"stopPullDownRefresh: ok"})}catch(e){r({"errMsg":"stopPullDownRefresh: fail"})}}]],n.listeners.forEach((function(e){var t=l(e,2),n=t[0],r=t[1];c.a.eventCenter.on(n,r)})))},n.unbindEvent=function(){n.isBound=!1,n.ptrRef&&n.ptrRef.destroy(),n.listeners.forEach((function(e){var t=l(e,2),n=t[0],r=t[1];c.a.eventCenter.off(n,r)}))},_possibleConstructorReturn(n,t)}return _inherits(PullDownRefresh,e),d(PullDownRefresh,[{"key":"componentDidMount","value":function componentDidMount(){this.bindEvent()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.unbindEvent()}},{"key":"render","value":function render(){var e={"distanceToRefresh":100,"damping":200,"refreshing":this.state.refreshing,"onRefresh":this.startPullDownRefresh,"ref":this.getPtrRef};return i.l.createElement(b,e,this.props.children)}}]),PullDownRefresh}(i.l.Component);t.a=v},"353":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),o=function stopPullDownRefresh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var o=e.success,a=e.fail,s=e.complete,i={};r.a.eventCenter.trigger("__taroStopPullDownRefresh",{"successHandler":function successHandler(){o&&o(i),s&&s(i),t(i)},"errorHandler":function errorHandler(){a&&a(i),s&&s(i),n(i)}})}))}},"502":function(e,t,n){},"573":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var r=n(1),o=n(353),a=n(126),s=n(2),i=n(40),c=n(569),l=n(404),u=n(364),d=n(338),f=(n(502),n(308)),p=n(10),h=n(306),m=n(17),g=n(302),b=n(304),v=n(14),S=n(303),y=n(20),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),w=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function filterCartInfo(e){var t=e.productInfo,n=t.skuInfo,r={"id":e.id,"name":t.name,"isSku":t.isSku,"images":t.images,"number":e.number,"productId":t.id};return t.isSku?Object.assign(r,{"skuId":n.id,"specSnap":n.specSnap,"salePrice":n.salePrice}):Object.assign(r,{"salePrice":t.salePrice}),r},_=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"backgroundColor":"#FFDD00","backgroundTextStyle":"dark","enablePullDownRefresh":!0,"navigationBarTitleText":"购物车","navigationBarTextStyle":"black","navigationBarBackgroundColor":"#FFDD00"},e.state={"page":1,"loading":!0,"isLogin":!1,"cartList":[],"checkList":[],"goodsList":[],"goodsInfo":{},"showSelect":!1,"cartStatus":!0,"totalAmount":0},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),k(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getUserLikePage()}},{"key":"componentDidShow","value":function componentDidShow(){var e=this;this.setState({"page":1},(function(){e.getShoppingCart()})),Object(m.q)({"success":function success(){e.setState({"isLogin":!0})},"fail":function fail(){e.setState({"isLogin":!1})}}),this.pullDownRefreshRef&&this.pullDownRefreshRef.bindEvent()}},{"key":"onPullDownRefresh","value":function onPullDownRefresh(){var e=this;this.setState({"page":1},(function(){e.getShoppingCart()}))}},{"key":"getUserLikePage","value":function getUserLikePage(){var e=this;Object(h.a)({"page":1,"limit":6}).then((function(t){var n=t.data.list;e.setState({"goodsList":n})}))}},{"key":"getShoppingCart","value":function getShoppingCart(){var e=this,t=this.state,n=t.page,r=t.cartList;Object(b.m)({"page":n,"limit":100}).then((function(t){var a=t.data,s=a.list,i=a.totalCount,c=s.map((function(e){return E(e)}));e.setCartCount(i),e.setState({"page":n+1,"cartList":1===n?c:r.concat(c)},(function(){e.setState({"loading":!1}),Object(o.a)()}))})).catch((function(){e.setCartCount(0),e.setState({"loading":!1,"cartList":[]})}))}},{"key":"onCheckGoods","value":function onCheckGoods(e,t){var n=this,r=this.state.checkList,o=r.indexOf(t);o>=0?r.splice(o,1):r.push(t),this.setState({"checkList":r},(function(){n.calcShoppingCart()}))}},{"key":"onCheckAll","value":function onCheckAll(){var e=this,t=this.state,n=t.cartList,r=t.checkList,o=[];n.length!==r.length&&n.map((function(e,t){return o.push(t),e})),this.setState({"checkList":o},(function(){e.calcShoppingCart()}))}},{"key":"onChangeNumber","value":function onChangeNumber(e,t,n){var r=this,o=this.state.cartList;Object(a.b)({"title":"请稍后","mask":!0}),Object(b.D)({"id":e.id,"number":n}).then((function(){e.number=n,o[t]=e,r.setState({"cartList":o},(function(){r.calcShoppingCart(),Object(a.a)()}))}))}},{"key":"calcShoppingCart","value":function calcShoppingCart(){var e=this.state,t=e.cartList,n=e.checkList,r={},o=0;n.map((function(e){var n=t[e],a=f.a.Mul(n.salePrice,n.number);o=f.a.Add(o,a),r[n.id]=C({},n,{"totalPrice":a})})),this.setState({"totalAmount":o})}},{"key":"setCartCount","value":function setCartCount(e){Object(m.o)({"cartCount":e})}},{"key":"onSwitchStatus","value":function onSwitchStatus(e){this.setState({"cartStatus":e})}},{"key":"onSubmitCart","value":function onSubmitCart(){var e=this.state,t=e.cartList,n=e.checkList.map((function(e){var n=t[e];return{"id":n.productId,"skuId":n.skuId,"cartId":n.id,"number":n.number}}));Object(g.e)({"cartList":n}),this.setState({"checkList":[],"totalAmount":0})}},{"key":"onDelCart","value":function onDelCart(){var e=this,t=this.state,n=t.cartList,r=t.checkList;if(r.length<=0)Object(a.d)({"title":"请选择商品","icon":"none"});else{Object(a.b)({"title":"请稍后","mask":!0});var o=[];p.a.remove(n,(function(e,t){var n=r.indexOf(t)>=0;return n&&o.push(e.id),n})),Object(b.i)({"ids":o}).then((function(){e.setState({"cartList":n,"checkList":[],"totalAmount":0},(function(){Object(a.a)()})),e.setCartCount(n.length)}))}}},{"key":"setShowSelect","value":function setShowSelect(e){this.setState({"showSelect":e})}},{"key":"onSelectSku","value":function onSelectSku(e,t){var n=this;Object(a.b)({"title":"请稍后","mask":!0}),Object(h.c)(e.productId).then((function(r){var o=r.data;o.key=t,o.skuId=e.skuId,o.cartId=e.id,o.number=e.number,o.specSnap=e.specSnap.split(","),o.timestamp=Number(new Date),n.setState({"goodsInfo":o,"showSelect":!0},(function(){Object(a.a)()}))}))}},{"key":"onConfirmSelect","value":function onConfirmSelect(e,t){var n=this,r=this.state,o=r.goodsInfo,s=r.cartList;Object(a.b)({"title":"请稍后","mask":!0}),Object(b.C)({"id":o.cartId,"productId":e.productId,"skuId":e.skuId,"number":t}).then((function(){Object(b.l)(o.cartId).then((function(e){s[o.key]=E(e.data),n.setState({"cartList":s,"showSelect":!1},(function(){n.calcShoppingCart(),Object(a.a)()}))}))}))}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.loading,o=t.isLogin,a=t.cartList,s=t.checkList,f=t.goodsInfo,p=t.goodsList,h=t.totalAmount,m=t.cartStatus,b=t.showSelect,C=!function isSubmit(e){return e.checkList.length>0}({"checkList":s}),k=r.l.createElement(i.a,{"className":"page d-f f-d-c"},n&&r.l.createElement(S.E,null),r.l.createElement(i.a,{"className":"cart-scroll"},!o&&r.l.createElement(i.a,{"className":"cart-status f-g-5 f-d-c"},r.l.createElement(i.a,{"className":"head-title"},"未登录"),r.l.createElement(i.a,{"className":"head-desc"},"查看不了购物车数据"),r.l.createElement(i.a,{"className":"head-btn f-g-5","hoverClass":"hover-class--btn","onClick":function onClick(){return Object(g.B)()}},"去登录")),o&&!a.length&&r.l.createElement(i.a,{"className":"cart-status f-g-5 f-d-c"},r.l.createElement(i.a,{"className":"head-title"},"购物车空空如也"),r.l.createElement(i.a,{"className":"head-desc"},"赶紧挑点宝贝"),r.l.createElement(i.a,{"className":"head-btn f-g-5","hoverClass":"hover-class--btn","onClick":function onClick(){return Object(g.l)()}},"去逛逛")),r.l.createElement(i.a,{"className":"cart-body"},r.l.createElement(i.a,{"className":"cart-list"},!!a.length&&r.l.createElement(i.a,{"className":"cart-operate d-f a-i-c j-c-b"},r.l.createElement(i.a,{"className":"total-num"},"共",a.length,"件商品"),m&&r.l.createElement(i.a,{"className":"total-num","onClick":this.onSwitchStatus.bind(this,!1)},"管理"),!m&&r.l.createElement(i.a,{"className":"total-num","onClick":this.onSwitchStatus.bind(this,!0)},"完成")),a.map((function(t,n){return r.l.createElement(i.a,{"key":t.id,"className":"goods-item d-f a-i-s"},r.l.createElement(i.a,{"className":"goods-checkbox d-f a-s-c","onClick":e.onCheckGoods.bind(e,t,n)},-1===s.indexOf(n)&&r.l.createElement(i.a,{"className":"unchecked-icon"}),s.indexOf(n)>=0&&r.l.createElement(i.a,{"className":"bnn-icon unchecked-icon check-icon"},"")),r.l.createElement(c.a,{"src":Object(v.m)(Object(v.o)(t.images),500,500,"fill"),"className":"goods-img","onClick":function onClick(){return Object(g.k)({"id":t.productId})}}),r.l.createElement(i.a,{"className":"other-info d-f f-d-c j-c-b"},r.l.createElement(i.a,{"className":"info-header"},r.l.createElement(i.a,{"className":"goods-name t-o-e-2"},t.name),!!t.isSku&&r.l.createElement(i.a,{"className":"goods-attr d-f a-i-c j-c-b","onClick":e.onSelectSku.bind(e,t,n)},r.l.createElement(i.a,{"className":"attr-text t-o-e"},t.specSnap),r.l.createElement(i.a,{"className":"bnn-icon attr-icon"},""))),r.l.createElement(i.a,{"className":"info-footer d-f j-c-b a-i-f-e"},r.l.createElement(i.a,{"className":"goods-price d-f f-d-c"},r.l.createElement(i.a,{"className":"sale-price bnn-number"},r.l.createElement(l.a,{"className":"price-unit"},"￥"),Object(v.d)(t.salePrice,""))),r.l.createElement(S.t,{"min":1,"max":99,"value":t.number,"onChange":e.onChangeNumber.bind(e,t,n)}))))}))),!!p.length&&r.l.createElement(i.a,{"className":"hot-goods"},r.l.createElement(S.R,null,"为您推荐"),r.l.createElement(S.v,null,p.map((function(e){return r.l.createElement(S.u,{"key":e.id,"info":e})})))))),!!a.length&&r.l.createElement(i.a,{"className":"cart-foot-height"}),!!a.length&&r.l.createElement(i.a,{"className":"cart-foot","style":{"bottom":y.d.tabBarHeight+"px"}},r.l.createElement(i.a,{"className":"footer-box d-f a-i-s"},r.l.createElement(i.a,{"className":"check-all d-f a-s-c a-i-c","onClick":this.onCheckAll.bind(this)},a.length===s.length?r.l.createElement(i.a,{"className":"bnn-icon unchecked-icon check-icon"},""):r.l.createElement(i.a,{"className":"unchecked-icon"}),r.l.createElement(i.a,{"className":"check-all-text m-l-10 l-h-1"},"全选")),r.l.createElement(i.a,{"className":"total-amount d-f a-s-c a-i-c j-c-e"},m&&r.l.createElement(i.a,{"className":"bnn-number"},"合计：",r.l.createElement(l.a,{"className":"amount-num"},"￥",h))),m&&r.l.createElement(u.a,{"disabled":C,"className":"submit-btn d-f a-i-c j-c-c","hoverClass":"hover-class--btn","onClick":this.onSubmitCart.bind(this)},"去结算"),!m&&r.l.createElement(u.a,{"className":"delete-btn d-f a-i-c j-c-c","hoverClass":"hover-class--btn","onClick":this.onDelCart.bind(this)},"删除"))),r.l.createElement(S.w,{"goods":f,"isOpened":b,"onClose":this.setShowSelect.bind(this,!1),"onConfirm":this.onConfirmSelect.bind(this)}),r.l.createElement(i.a,{"style":{"height":y.d.tabBarHeight+"px"}}),r.l.createElement(S.P,null));return r.l.createElement(d.a,{"onRefresh":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),"ref":function ref(t){t&&(e.pullDownRefreshRef=t)}},k)}},{"key":"componentDidMount","value":function componentDidMount(){w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this),this.pullDownRefreshRef&&this.pullDownRefreshRef.unbindEvent()}}]),Index}(s.a.Component)}}]);