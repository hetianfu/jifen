(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"310":function(e,t,n){"use strict";n.d(t,"b",(function(){return filterStyles})),n.d(t,"a",(function(){return filterGoodsInfo}));var o=n(311),a=n(6),r=n(17),s=n(2);function filterStyles(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[null,void 0,"","px","rpx","0rpx",!1],n={};return Object.keys(e).filter((function(o){-1==t.indexOf(e[o])&&(n[o]=e[o])})),n}function filterGoodsInfo(e){switch(e.shareAmount=a.a.head(e.sharedAmount),e.saveMoney=o.a.Sub(Number(e.salePrice),Number(e.memberPrice)),e.unitName=e.unitSnap&&e.unitSnap.name||"件",e.isActivity=!!e.strategy,e.description=e.description&&Object(s.e)(e.description),e.shareAmount=e.shareAmount&&Object(s.d)(e.shareAmount),e.type){case r.c.REAL:case r.c.VIRTUAL:case r.c.SCORE:e.disabled=!(e.isOnSale&&e.stockNumber),e.disabledText=e.isOnSale?e.stockNumber?"":"已售罄":"已下架"}var t=e.strategy;switch(t&&e.saleStrategy){case r.c.SECKILL:e.seconds=t.status?t.endSeconds:t.startSeconds,e.status=t.status,e.statusName={"-1":"已结束","0":"未开始"}[t.status],e.limitNumber=t.limitNumber,e.disabled=t.status<1,e.disabledText={"-1":"已结束","0":"未开始"}[t.status]}return e}},"339":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n(1),a=n(3),r=n(43),s=n(613),c=n(614),l=(n(340),n(12)),i=n.n(l),u=n(68),m=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function ShopInfoOne(){return _classCallCheck(this,ShopInfoOne),_possibleConstructorReturn(this,(ShopInfoOne.__proto__||Object.getPrototypeOf(ShopInfoOne)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShopInfoOne,e),m(ShopInfoOne,[{"key":"render","value":function render(){var e="shop-info-one",t=this.props,n=t.info,a=void 0===n?{}:n,l=t.className;return o.l.createElement(r.a,{"className":i()(e,l),"onClick":function onClick(){return Object(u.D)(a.id)}},o.l.createElement(s.a,{"src":a.logo,"className":e+"-logo"}),o.l.createElement(r.a,{"className":e+"-name t-o-e"},a.shopName),o.l.createElement(r.a,{"className":e+"-more bnn-icon d-f a-i-c"},o.l.createElement(c.a,{"className":e+"-more-text"},"进店逛逛"),o.l.createElement(c.a,{"className":e+"-more-icon"},"")))}}]),ShopInfoOne}(a.a.Component);f.options={"addGlobalClass":!0}},"340":function(e,t,n){},"341":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(1),a=n(3),r=n(43),s=n(614),c=(n(342),n(12)),l=n.n(c),i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function ShopInfoTwo(){return _classCallCheck(this,ShopInfoTwo),_possibleConstructorReturn(this,(ShopInfoTwo.__proto__||Object.getPrototypeOf(ShopInfoTwo)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShopInfoTwo,e),i(ShopInfoTwo,[{"key":"callPhone","value":function callPhone(e){var t=e.phone;if(!t)return!1;wx.makePhoneCall({"phoneNumber":t})}},{"key":"openMap","value":function openMap(e){var t=e.lat,n=e.lng,o=e.address,a=e.shopName;if(!t||!n)return!1;wx.openLocation({"name":a,"address":o,"latitude":Number(t),"longitude":Number(n)})}},{"key":"render","value":function render(){var e="shop-info-two",t=this.props,n=t.info,a=void 0===n?{}:n,c=t.className;return o.l.createElement(r.a,{"className":l()(e,c)},o.l.createElement(r.a,{"className":e+"-info"},o.l.createElement(r.a,{"className":e+"-info-left t-o-e"},a.shopName),o.l.createElement(r.a,{"className":e+"-info-right"},o.l.createElement(s.a,{"className":e+"-icon bnn-icon","onClick":this.callPhone.bind(this,a)},""),o.l.createElement(s.a,{"className":e+"-icon bnn-icon","onClick":this.openMap.bind(this,a)},""))),o.l.createElement(r.a,{"className":e+"-li"},a.businessTime),o.l.createElement(r.a,{"className":e+"-li"},a.address))}}]),ShopInfoTwo}(a.a.Component);u.options={"addGlobalClass":!0}},"342":function(e,t,n){},"408":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(1),a=n(331),r=n(43),s=n(614),c=(n(409),n(2)),l=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function SeckillCountdown(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SeckillCountdown);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(SeckillCountdown.__proto__||Object.getPrototypeOf(SeckillCountdown)).call(this));return e.state={"time":Object(c.b)()},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SeckillCountdown,e),l(SeckillCountdown,[{"key":"onIntervalCallBack","value":function onIntervalCallBack(e){this.setState({"time":e})}},{"key":"render","value":function render(){var e=this.state.time;return o.l.createElement(r.a,{"className":"goods-count-down bnn-number "},!!e.hours&&o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.hours)),!!e.hours&&":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.minutes)),":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.seconds)),":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.millisecond)))}}]),SeckillCountdown}(a.a)},"409":function(e,t,n){},"597":function(e,t,n){},"649":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var o=n(1),a=n(43),r=n(614),s=n(613),c=n(407),l=n(422),i=(n(597),n(321),n(17)),u=n(310),m=n(312),f=n(2),p=n(68),d=n(353),b=n.n(d),h=n(337),y=n(408),g=n(306),_=n(322),N=n(339),E=n(341),v=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),w=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationStyle":"custom"},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),v(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getGoodsInfo(),this.getGoodsPage(),this.getCommentPage()}},{"key":"getGoodsInfo","value":function getGoodsInfo(){var e=this,t=this.$router.params;Object(m.c)(t.id).then((function(t){var n=t.data;n.timestamp=Number(new Date),e.setState({"goodsInfo":Object(u.a)(n),"comboList":n.skuDetail||[],"goodsImages":n.images},(function(){e.setState({"loadingStatus":!1}),setTimeout((function(){e.getNodeLocation()}),200)}))})).catch((function(e){console.log(e),setTimeout((function(){wx.navigateBack()}),800)}))}},{"key":"onConfirm","value":function onConfirm(e,t){e.type===i.c.VIRTUAL?Object(p.g)({"id":e.productId,"skuId":e.skuId,"number":t,"shopId":e.shopId}):Object(p.f)({"cartList":[{"id":e.productId,"skuId":e.skuId,"number":t}]}),this.setState({"showSelect":!1})}},{"key":"render","value":function render(){var e=this.state,t=(e.opacity,e.nodeKey,e.nodeList),n=e.userInfo,u=e.goodsInfo,m=e.goodsList,d=e.showSelect,h=(e.showShareImg,e.shareImg,e.commentRes),v=e.loadingStatus;u.salesReport&&u.salesReport.map((function(e){return e.userInfo&&e.userInfo.headImg})),(100/t.length).toFixed(2);return o.l.createElement(a.a,{"className":"goods-page"},v&&o.l.createElement(g.J,null),o.l.createElement(a.a,{"className":"goods-scroll"},o.l.createElement(a.a,{"id":"goods-info","className":"goods-card"},o.l.createElement(g.r,{"fId":u.timestamp,"images":u.images,"video":{"url":u.video,"poster":u.videoCoverImg}}),o.l.createElement(a.a,{"className":"goods-activity d-f a-i-s"},o.l.createElement(a.a,{"className":"activity-left f-g-2 f-d-c"},o.l.createElement(r.a,{"className":"left-title"},"库存告急"),o.l.createElement(r.a,{"className":"activity-desc p-t-10"},u.limitNumber?"每人限购 "+u.limitNumber+u.unitName:"限时抢购")),o.l.createElement(a.a,{"className":"activity-right f-g-8 f-d-c"},o.l.createElement(r.a,{"className":"activity-desc p-b-10"},"距",u.status?"结束剩余":"开始"),o.l.createElement(y.a,{"seconds":u.seconds}))),o.l.createElement(a.a,{"className":"goods-head"},o.l.createElement(a.a,{"className":"d-f a-i-c j-c-b"},o.l.createElement(a.a,{"className":"price d-f a-i-b"},o.l.createElement(a.a,{"className":"sale-price bnn-number"},o.l.createElement(r.a,{"className":"price-unit"},"￥"),u.salePrice),100*u.originPrice>100*u.salePrice&&o.l.createElement(a.a,{"className":"origin-price bnn-number m-l-10"},"￥",u.originPrice)),o.l.createElement(a.a,{"className":"user-like f-g-5"},o.l.createElement(r.a,{"className":"like-icon bnn-icon m-r-10"},""),u.storeCount,"人喜欢")),o.l.createElement(a.a,{"className":"goods-name"},u.name),o.l.createElement(a.a,{"className":"stock-box d-f j-c-b"},o.l.createElement(a.a,{"className":""},"已兑换",u.salesNumber,u.unitName),o.l.createElement(a.a,{"className":""},"剩余库存",u.stockNumber,u.unitName)),Object(f.z)(u)&&o.l.createElement(a.a,{"className":"member-box d-f a-i-c j-c-b","onClick":function onClick(){return Object(p.r)()}},o.l.createElement(a.a,{"className":"member-left d-f a-i-c"},o.l.createElement(s.a,{"src":b.a,"className":"left-icon"}),o.l.createElement(a.a,{"className":"left-text"},"会员价",o.l.createElement(r.a,{"className":"member-price"},"￥",u.memberPrice),u.saveMoney?"省￥"+u.saveMoney:"")),o.l.createElement(a.a,{"className":"member-right d-f a-i-c"},o.l.createElement(a.a,{"className":"right-text"},n.isVip?"":"立即开通"),o.l.createElement(a.a,{"className":"right-icon bnn-icon"},""))),o.l.createElement(a.a,{"className":"tip-list d-f f-w-w"},u.tips&&u.tips.map((function(e,t){return o.l.createElement(a.a,{"key":t,"className":"tip-item d-f a-i-c"},o.l.createElement(a.a,{"className":"bnn-icon tip-icon"},""),o.l.createElement(a.a,{"className":"tip-text l-h-o"},e))}))))),u.type===i.c.VIRTUAL&&o.l.createElement(a.a,{"className":"goods-card goods-card__body shop-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(g.W,null,"商家信息")),o.l.createElement(N.a,{"info":u.shopSnap,"className":"shop-card__head"}),o.l.createElement(a.a,{"className":"thin-border__b"}),o.l.createElement(E.a,{"info":u.shopSnap,"className":"shop-card__foot"})),h.list&&h.list.length&&o.l.createElement(a.a,{"id":"goods-comment","className":"goods-card goods-card__body comment-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(g.W,null,"用户评论")),o.l.createElement(a.a,{"className":"comment-list"},h.list.map((function(e){return o.l.createElement(g.e,{"key":e.id,"info":e,"className":"comment-item"})})),o.l.createElement(a.a,{"className":"see-more f-g-5","onClick":function onClick(){return Object(p.i)(u.id)}},"查看更多好评（",h.totalCount,"）"))),o.l.createElement(a.a,{"className":"goods-body"},u.description&&o.l.createElement(a.a,{"id":"goods-desc","className":"goods-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(g.W,null,"商品详情")),o.l.createElement(a.a,{"className":"rich-text-wrap goods-card__body"},o.l.createElement(c.a,{"nodes":Object(f.e)(u.description)}))),o.l.createElement(a.a,{"id":"goods-hot","className":"goods-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(g.W,null,"更多美好生活")),o.l.createElement(g.A,{"list":m}))),o.l.createElement(a.a,{"className":"goods-foot--height"})),o.l.createElement(_.a,{"menus":["home","user"]},o.l.createElement(l.a,{"disabled":u.disabled,"className":"goods-foot__btns-btn xf-btn xf-btn-primary","onClick":this.setState.bind(this,{"showSelect":!0})},u.disabledText||"立即购买")),o.l.createElement(g.c,null),o.l.createElement(g.B,{"goods":u,"isOpened":d,"onClose":this.setState.bind(this,{"showSelect":!1}),"onConfirm":this.onConfirm.bind(this)}))}},{"key":"componentDidMount","value":function componentDidMount(){w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&w(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}(h.a)}}]);