(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"307":function(e,t,n){"use strict";n.d(t,"a",(function(){return asyncCalcOrder})),n.d(t,"l",(function(){return submitOrder})),n.d(t,"b",(function(){return asyncCalcScoresOrder})),n.d(t,"m",(function(){return submitScoresOrder})),n.d(t,"i",(function(){return goH5ToPay})),n.d(t,"j",(function(){return goToWalletPay})),n.d(t,"g",(function(){return getOrderPage})),n.d(t,"f",(function(){return getOrderInfo})),n.d(t,"h",(function(){return getQrCode})),n.d(t,"d",(function(){return confirmReceipt})),n.d(t,"c",(function(){return cancelOrderInfo})),n.d(t,"k",(function(){return refundOrder})),n.d(t,"e",(function(){return getConnectUser}));var r=n(9);function asyncCalcOrder(e){return r.a.post("/order-pays/calculate-order",e)}function submitOrder(e){return r.a.post("/order-pays/submit-order",e)}function asyncCalcScoresOrder(e){return r.a.post("/order-scores/calculate-order",e)}function submitScoresOrder(e){return r.a.post("/order-scores/submit-order",e)}function goH5ToPay(e){return r.a.get("/order-pays/h5-to-pay/"+e)}function goToWalletPay(e){return r.a.get("/order-pays/wallet-to-pay/"+e)}function getOrderPage(e){return r.a.get("/orders/get-page",{"params":e})}function getOrderInfo(e){return r.a.get("/orders/get-by-id/"+e)}function getQrCode(e){return r.a.get("/orders/get-qr-code/"+e)}function confirmReceipt(e){return r.a.put("/orders/receive-by-id",{"id":e})}function cancelOrderInfo(e){return r.a.put("/orders/cancel-by-id/"+e)}function refundOrder(e){return r.a.post("/orders/refund-by-id",e)}function getConnectUser(){return r.a.get("/orders/get-connect-user")}},"514":function(e,t,n){},"582":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var r=n(1),o=n(2),i=n(40),a=n(410),c=n(364),u=(n(514),n(307)),s=n(305),l=n(303),d=n(302),p=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),f=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=[{"title":"全部","val":""},{"title":"待付款","val":s.e.UNPAID},{"title":"待发货","val":s.e.UN_SEND},{"title":"待收货","val":s.e.SENDING},{"title":"已完成","val":s.e.CLOSED}],b=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));e.config={"navigationBarTitleText":"我的订单"};var t=e.$router.params;return e.state={"page":1,"limit":10,"orderList":[],"loadStatus":"loading","typeKey":isNaN(Number(t.status))?0:Number(t.status),"typeList":y},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),p(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getOrderListPage()}},{"key":"onClickType","value":function onClickType(e){var t=this;this.setState({"page":1,"typeKey":e,"orderList":[],"loadStatus":"loading"},(function(){setTimeout((function(){t.getOrderListPage()}),500)}))}},{"key":"getOrderListPage","value":function getOrderListPage(){var e=this,t=this.state,n=t.page,r=t.limit,o=t.typeKey,i=t.typeList,a=t.orderList;"noMore"!==t.loadStatus&&Object(u.g)({"page":n,"limit":r,"status":i[o].val}).then((function(t){var o=t.data,i=o.list,c=o.totalCount;e.setState({"page":n+1,"orderList":1===n?i:a.concat(i),"loadStatus":n*r>=c?"noMore":"loading"})}))}},{"key":"render","value":function render(){var e=this.state,t=e.typeKey,n=e.typeList,o=e.orderList,u=e.loadStatus;return r.l.createElement(i.a,{"className":"order-page"},r.l.createElement(l.Q,{"list":n,"current":t,"className":"thin-border__b","onClick":this.onClickType.bind(this)}),r.l.createElement(a.a,{"scrollY":!0,"className":"list-body","onScrollToLower":this.getOrderListPage.bind(this)},r.l.createElement(i.a,{"className":"order-list"},o.map((function(e){return r.l.createElement(i.a,{"key":e.id,"className":"order-item"},r.l.createElement(l.I,{"order":e}),r.l.createElement(l.H,{"order":e,"onClick":e.status==s.e.PINKING?function(){return Object(d.D)(e.id)}:function(){return Object(d.u)(e.id)}}),r.l.createElement(i.a,{"className":"order-foot"},e.status==s.e.PINKING?r.l.createElement(c.a,{"className":"order-btn xf-btn xf-btn-primary xf-btn-round","onClick":function onClick(){return Object(d.D)(e.id)}},"查看详情"):r.l.createElement(c.a,{"className":"order-btn xf-btn xf-btn-round","onClick":function onClick(){return Object(d.u)(e.id)}},"查看详情"),e.status==s.e.UNPAID&&r.l.createElement(c.a,{"className":"order-btn xf-btn xf-btn-danger xf-btn-round","onClick":function onClick(){return Object(d.w)(e.id)}},"待支付"),e.status==s.e.UN_CHECK&&r.l.createElement(c.a,{"className":"order-btn xf-btn xf-btn-primary xf-btn-round","onClick":function onClick(){return Object(d.x)(e.id)}},"电子凭证"),e.status==s.e.CLOSED&&!e.isReply&&r.l.createElement(c.a,{"className":"order-btn xf-btn xf-btn-danger xf-btn-round","onClick":function onClick(){return Object(d.t)(e.id)}},"评论"),e.status==s.e.CLOSED&&!!e.isReply&&r.l.createElement(c.a,{"className":"order-btn xf-btn xf-btn-round","onClick":function onClick(){return Object(d.j)(e.id)}},"查看评价")))}))),o.length||"noMore"!=u?r.l.createElement(l.D,{"status":u}):r.l.createElement(l.C,{"className":"h-p-100"})))}},{"key":"componentDidMount","value":function componentDidMount(){f(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&f(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){f(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&f(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){f(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&f(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}(o.a.Component);b.options={"addGlobalClass":!0}}}]);