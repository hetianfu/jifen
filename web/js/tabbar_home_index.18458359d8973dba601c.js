(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"304":function(e,t,n){"use strict";n.d(t,"x",(function(){return getUserInfo})),n.d(t,"w",(function(){return getUserCommissions})),n.d(t,"f",(function(){return asyncWechatInfo})),n.d(t,"q",(function(){return getMemberCount})),n.d(t,"r",(function(){return getMemberPermanent})),n.d(t,"m",(function(){return getCartPage})),n.d(t,"b",(function(){return addCart})),n.d(t,"l",(function(){return getCartInfo})),n.d(t,"i",(function(){return delBatchCart})),n.d(t,"C",(function(){return updateCart})),n.d(t,"D",(function(){return updateCartNumber})),n.d(t,"k",(function(){return getAddressList})),n.d(t,"a",(function(){return addAddress})),n.d(t,"B",(function(){return updateAddress})),n.d(t,"j",(function(){return getAddressInfo})),n.d(t,"A",(function(){return setDefaultAddress})),n.d(t,"h",(function(){return delAddressInfo})),n.d(t,"z",(function(){return getWalletPage})),n.d(t,"E",(function(){return userCharges})),n.d(t,"g",(function(){return buyMember})),n.d(t,"t",(function(){return getScoreConfig})),n.d(t,"v",(function(){return getSignScore})),n.d(t,"d",(function(){return addSignScore})),n.d(t,"u",(function(){return getScorePage})),n.d(t,"y",(function(){return getUserScore})),n.d(t,"s",(function(){return getMyCouponPage})),n.d(t,"n",(function(){return getCouponPage})),n.d(t,"c",(function(){return addCoupon})),n.d(t,"e",(function(){return applyDrawToWallet})),n.d(t,"p",(function(){return getGisciplePage})),n.d(t,"o",(function(){return getGiscipleDetailPage}));var a=n(9);n(4),Object.assign;function getUserInfo(){return a.a.get("/users/get-info",{},{"isAuth":!1})}function getUserCommissions(){return a.a.get("/user-commissions/get",{},{"isAuth":!1})}function asyncWechatInfo(e){return a.a.put("/users/async-wechat-info",e)}function getMemberCount(){return a.a.get("/users/count-vip-pay")}function getMemberPermanent(){return a.a.get("/users/permanent-vip-pay")}function getCartPage(e){return a.a.get("/users/get-shop-cart-page",{"params":e},{"isAuth":!1})}function addCart(e){return a.a.post("/users/add-shop-cart",e)}function getCartInfo(e){return a.a.get("/users/get-shop-cart-by-id/"+e)}function delBatchCart(e){return a.a.delete("/users/del-shop-cart",e)}function updateCart(e){return a.a.put("/users/update-shop-cart-by-id",e)}function updateCartNumber(e){return a.a.put("/users/update-shop-cart-number",e)}function getAddressList(){return a.a.get("/users/get-address-list")}function addAddress(e){return a.a.post("/users/add-address",e)}function updateAddress(e){return a.a.put("/users/update-address-by-id",e)}function getAddressInfo(e){return a.a.get("/users/get-address-by-id/"+e)}function setDefaultAddress(e){return a.a.put("/users/set-default-address",e)}function delAddressInfo(e){return a.a.delete("/users/del-address-by-id/"+e)}function getWalletPage(e){return a.a.request({"url":"/users/get-wallet-detail-page","data":e})}function userCharges(e){return a.a.post("/user-charges/charge",e)}function buyMember(e){return a.a.post("/user-charges/buy-vip",e)}function getScoreConfig(){return a.a.get("/user-scores/get-score-config")}function getSignScore(){return a.a.get("/user-scores/get-sign-score")}function addSignScore(){return a.a.post("/user-scores/sign-score")}function getScorePage(e){return a.a.get("/user-scores/get-detail-page",{"params":e})}function getUserScore(){return a.a.get("/user-scores/user-score")}function getMyCouponPage(e){return a.a.get("/users/get-my-coupon-page",{"params":e})}function getCouponPage(e){return a.a.get("/users/get-coupon-page",{"params":e})}function addCoupon(e){return a.a.post("/users/add-coupon",e)}function applyDrawToWallet(e){return a.a.post("/users/apply-draw-to-wallet",e)}function getGisciplePage(e){return a.a.get("/users/get-disciple-page",{"params":e})}function getGiscipleDetailPage(e){return a.a.get("/user-commissions/get-disciple-detail-page",{"params":e})}},"340":function(e,t,n){"use strict";n.d(t,"a",(function(){return goodsShareImg})),n.d(t,"b",(function(){return shareInfoById}));var a=n(9),r=n(14),o=n(305);function goodsShareImg(e){var t=e.saleStrategy===o.a.NORMAL?e.type:e.saleStrategy,n={"REAL":o.h.REAL_GOODS,"PINK":o.h.PINK_GOODS,"SCORE":o.h.SCORE_GOODS,"VIRTUAL":o.h.VIRTUAL_GOODS,"SECKILL":o.h.SECKILL_GOODS};return a.a.post("/products/create-share-img",{"title":e.name,"price":e.salePrice,"keyType":n[t],"shareImg":e.shareImg,"firstImg":Object(r.o)(e.images),"productId":e.id})}function shareInfoById(e){return a.a.get("/user-shares/get-by-id/"+e)}},"353":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(7),r=function stopPullDownRefresh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var r=e.success,o=e.fail,c=e.complete,s={};a.a.eventCenter.trigger("__taroStopPullDownRefresh",{"successHandler":function successHandler(){r&&r(s),c&&c(s),t(s)},"errorHandler":function errorHandler(){o&&o(s),c&&c(s),n(s)}})}))}},"501":function(e,t,n){},"567":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Q}));var a=n(21),r=n.n(a),o=n(1),c=n(121),s=n(3),i=n(353),l=n(2),u=n(40),d=n(364),m=n(404),g=n(410),f=n(569),p=n(8),b=n.n(p),h=n(14),y=n(322),v=n.n(y),_=n(4),E=n(305),O=n(306),w=n(361),N=n(340),S=n(17),C=n(302),k=n(20),I=n(303),j=n(370),x=n(371),P=n(372),D=n(373),A=n(374),T=n(375),L=n(376),M=n(377),G=n(378),R=n(387),B=n(379),U=n(380),K=n(381),H=n(388),W=n(382),F=n(383),V=n(384),q=(n(501),n(304)),J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),z=function get(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var X=0,Q=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));e.config={"navigationStyle":"custom","backgroundTextStyle":"dark"};var t=v()().endOf("day").valueOf(),n=Number(new Date),a=Math.floor((t-n)/1e3);return e.state={"tabKey":"recommend","loading":!0,"customList":[],"page":1,"limit":10,"seconds":a,"goodsList":[],"signList":[],"dataList":[],"signScore":0,"scoreInfo":{},"loadStatus":"loading","showActivity":!1},e.pageConfig={},e}var t;return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),$(Index,[{"key":"componentDidMount","value":function componentDidMount(){this.getShareInfo(),this.getIndexData()}},{"key":"componentDidShow","value":function componentDidShow(){this.getScore(),this._offReachBottom=Object(c.a)({"callback":this.onReachBottom,"ctx":this,"onReachBottomDistance":void 0})}},{"key":"onReachBottom","value":function onReachBottom(){this.getGoods()}},{"key":"getScore","value":(t=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function step(a,r){try{var o=t[a](r),c=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(c).then((function(e){step("next",e)}),(function(e){step("throw",e)}));e(c)}("next")}))}}(r.a.mark((function _callee(){var e,t=this;return r.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(q.t)().then((function(e){return e.data}));case 2:return e=n.sent,n.next=5,Object(q.v)().then((function(n){var a=n.data,r=v()().subtract(a.currencyDay+(a.isSign?-1:0),"day"),o=e.map((function(e){var t=r.format("MM.DD");return r.add(1,"day"),J({},e,{"time":t})}));t.setState({"signList":o,"scoreInfo":a,"signScore":o[a.currencyDay].number}),setTimeout((function(){t.setState({"loading":!1})}),800)}));case 5:case"end":return n.stop()}}),_callee,this)}))),function getScore(){return t.apply(this,arguments)})},{"key":"onShareAppMessage","value":function onShareAppMessage(){return{"title":k.c,"path":Object(S.i)()}}},{"key":"getShareInfo","value":function getShareInfo(){var e=this.$router.params.scene;e&&(Object(s.f)(_.d,e),Object(N.b)(e).then((function(e){var t=e.data;[E.h.GOODS_INFO,E.h.NORMAL_GOODS,E.h.SCORE_GOODS,E.h.SECKILL_GOODS,E.h.PINK_GOODS,E.h.REAL_GOODS,E.h.VIRTUAL_GOODS].indexOf(t.keyType)>=0&&Object(C.k)({"id":t.keyId,"type":t.keyType,"saleStrategy":t.keyType},!0)})))}},{"key":"getIndexData","value":function getIndexData(){var e=this;Object(w.a)(k.f).then((function(t){var n=t.data,a=t.timestamp,r=(n.content||[]).map((function(t){switch(t.key){case"navGroup":for(var n=t.list,a=void 0===n?[]:n,r=t.colNumber,o=void 0===r?5:r,c=t.rowNumber,s=o*(void 0===c?2:c),i=Math.ceil(a.length/s),l=[],u=0;u<i;u++)l.push([]);for(var d=0;d<a.length;d++)l[Math.floor(d/s)].push(a[d]);t.list=l;break;case"carousel":X=t.height;break;case"navBar":e.navBar=t;break;case"tabNav":e.tabNav=t;break;case"pageConfig":e.pageConfig=t;break;case"activityGoods":e.activityInfo=t}return t}));e.setState({"customList":r},(function(){e.setState({"loading":!1}),setTimeout((function(){Object(i.a)()}),1500)})),e.activityInfo&&setTimeout((function(){e.showActivity(a,e.activityInfo)}),3e3)}))}},{"key":"showActivity","value":function showActivity(e,t){var n=Object(S.b)(t.id);(!n||n&&v()(e).isAfter(n.time))&&(Object(S.l)(t.id,{"id":t.id,"type":"goods","time":e+864e5}),this.setState({"showActivity":!0}))}},{"key":"closeActivity","value":function closeActivity(){this.setState({"showActivity":!1})}},{"key":"getGoods","value":function getGoods(){var e=this,t=this.state,n=t.page,a=t.limit,r=t.tabKey,o=t.goodsList,c={};"noMore"!==t.loadStatus&&("recommend"!==r&&(c.categoryId=r),Object(O.a)(J({"page":n,"limit":a},c)).then((function(t){var r=t.data,c=r.list,s=r.totalCount;e.setState({"page":n+1,"goodsList":1===n?c:o.concat(c),"loadStatus":n*a>=s?"noMore":"loading"},(function(){Object(i.a)()}))})))}},{"key":"onSwitchTab","value":function onSwitchTab(e){var t=this;this.setState({"page":1,"tabKey":e,"goodsList":[],"loadStatus":"loading"},(function(){t.getGoods()}))}},{"key":"render","value":function render(){var e=this,t=(this.navBar,this.tabNav),n=this.pageConfig,a=this.activityInfo,r=this.state,c=r.customList,s=r.tabKey,i=r.loading,l=r.goodsList,p=r.loadStatus,y=r.seconds,v=r.showActivity,_=r.signList,E=r.signScore,O=r.scoreInfo;return o.l.createElement(u.a,{"className":"index custom-page","style":{"--page-bg-img":"url("+n.bgImg+")"}},i&&o.l.createElement(I.E,{"isCover":!0}),o.l.createElement(I.A,{"top":0,"score":O.totalScore}),o.l.createElement(u.a,{"className":"integral-box"},o.l.createElement(u.a,{"className":"integral-info f-g-5 f-d-c"},o.l.createElement(u.a,{"className":"integral-title"},"我的",Object(S.e)()),o.l.createElement(u.a,{"className":"integral-number bnn-number"},O.totalScore),o.l.createElement(d.a,{"className":"checkin-btn xf-btn xf-btn-round xf-btn-primary","onClick":function onClick(){return Object(C.m)()}},"立即签到 + ",E)),o.l.createElement(u.a,{"className":"menu-list"},o.l.createElement(u.a,{"className":"menu-item","onClick":function onClick(){return Object(C.v)()}},"查询订单"),o.l.createElement(u.a,{"className":"menu-item","onClick":function onClick(){return Object(C.m)()}},"我的",Object(S.e)()),o.l.createElement(u.a,{"className":"menu-item","onClick":function onClick(){return Object(C.d)(Object(S.c)("integralRule"))}},Object(S.e)(),"规则")),o.l.createElement(u.a,{"className":"integral-prompt f-g-5"},Object(S.e)(),"可兑换商品，过期后清空，请尽快使用")),o.l.createElement(u.a,{"className":"sign-wrap"},o.l.createElement(u.a,{"className":"sign-left f-g-5 f-d-c"},o.l.createElement(u.a,{"className":"sign-title"},"已签到"),o.l.createElement(u.a,{"className":"sign-day bnn-number"},o.l.createElement(m.a,{"className":"sign-day-num"},O.currencyDay),"天")),o.l.createElement(u.a,{"className":"sign-right"},o.l.createElement(u.a,{"className":"sign-list"},_.map((function(e,t){return o.l.createElement(u.a,{"key":t,"className":"sign-item bnn-number"},o.l.createElement(u.a,{"className":"sign-name"},e.time),o.l.createElement(u.a,{"className":"sign-status"},t<O.currencyDay?o.l.createElement(u.a,{"className":"sign-circle sign-active bnn-icon"},""):o.l.createElement(u.a,{"className":"sign-circle"})),o.l.createElement(u.a,{"className":"sign-integral"},"+",e.number))})),o.l.createElement(u.a,{"className":"sign-line"})))),o.l.createElement(I.n,{"seconds":y}),n.showTabNav&&t&&o.l.createElement(u.a,{"className":"tab-nav"},o.l.createElement(u.a,{"className":b()("tab-nav__left tab-nav__cty-item",_defineProperty({},"tab-nav__cty-active","recommend"===s)),"onClick":this.onSwitchTab.bind(this,"recommend")},o.l.createElement(m.a,{"className":"tab-nav__cty-text"},"精选")),o.l.createElement(g.a,{"scrollX":!0,"enhanced":!0,"showScrollbar":!1,"className":"tab-nav__cty-scroll"},o.l.createElement(u.a,{"className":"tab-nav__cty-list"},t.list.map((function(t){return o.l.createElement(u.a,{"key":t.id,"className":b()("tab-nav__cty-item",_defineProperty({},"tab-nav__cty-active",s===t.id)),"onClick":e.onSwitchTab.bind(e,t.id)},t.img?o.l.createElement(f.a,{"src":t.img,"mode":"heightFix","className":"tab-nav__cty-img"}):o.l.createElement(m.a,{"className":"tab-nav__cty-text"},t.name))})))),o.l.createElement(u.a,{"className":"tab-nav__right","onClick":function onClick(){return Object(C.y)()}},"全部")),o.l.createElement(u.a,{"className":"index-custom","style":{"display":"recommend"===s?"block":"none"}},o.l.createElement(u.a,{"className":"index-custom__bg","style":{"paddingBottom":""+Object(h.t)(X)}}),c.map((function(e,t){var n=e.marginTop,a=void 0===n?0:n,r=e.pageMargin,c=void 0===r?0:r;return o.l.createElement(u.a,{"key":t,"className":"custom-item"},{"carousel":o.l.createElement(D.a,e),"navGroup":o.l.createElement(P.a,e),"newPeopleExclusive":o.l.createElement(U.a,e),"fightGroups":o.l.createElement(K.a,e),"newsService":o.l.createElement(x.a,e),"gridImg":o.l.createElement(W.a,e),"blankSpace":o.l.createElement(F.a,e),"auxiliaryLine":o.l.createElement(V.a,e)}[e.key],"seckill"===e.key&&o.l.createElement(u.a,{"className":"goods-wrap goods-wrap__one","style":{"marginTop":""+Object(h.t)(a)}},e.title&&o.l.createElement(u.a,{"className":"goods-wrap__head d-f a-i-b j-c-b","style":{"padding":"0 "+Object(h.t)(c)}},o.l.createElement(u.a,{"className":"goods-wrap__title"},e.title),o.l.createElement(u.a,{"className":"goods-wrap__more d-f a-i-c","onClick":function onClick(){return Object(C.d)(e.moreUrl)}},e.moreName,o.l.createElement(u.a,{"className":"bnn-icon"},""))),o.l.createElement(u.a,{"className":"goods-wrap__body"},o.l.createElement(H.a,J({},e,{"marginTop":c})))),"goodsList"===e.key&&[2,3,4,5,6,7].indexOf(Number(e.showMod))>=0&&o.l.createElement(u.a,{"className":"goods-wrap goods-wrap__one","style":{"marginTop":Object(h.t)(a)}},e.title&&o.l.createElement(u.a,{"className":"goods-wrap__head d-f a-i-b j-c-b","style":{"padding":"0 "+Object(h.t)(c)}},o.l.createElement(u.a,{"className":"goods-wrap__title"},e.title),o.l.createElement(u.a,{"className":"goods-wrap__more d-f a-i-c","onClick":function onClick(){return Object(C.d)(e.moreUrl)}},e.moreName,o.l.createElement(u.a,{"className":"bnn-icon"},""))),e.coverImg&&o.l.createElement(u.a,{"className":"goods-wrap__cover-img d-f","style":{"padding":"0 "+Object(h.t)(c),"marginTop":""+Object(h.t)(c)}},o.l.createElement(f.a,{"mode":"widthFix","src":e.coverImg,"style":{"width":"100%"},"onClick":function onClick(){return Object(C.d)(e.coverUrl)}})),o.l.createElement(u.a,{"className":"goods-wrap__body"},{"2":o.l.createElement(T.a,J({},e,{"marginTop":c})),"3":o.l.createElement(L.a,J({},e,{"marginTop":c})),"4":o.l.createElement(M.a,e),"5":o.l.createElement(G.a,e),"6":o.l.createElement(R.a,J({},e,{"marginTop":c})),"7":o.l.createElement(B.a,J({},e,{"marginTop":c}))}[e.showMod])),"goodsList"===e.key&&[1].indexOf(Number(e.showMod))>=0&&o.l.createElement(u.a,{"className":"goods-wrap goods-wrap__two","style":{"marginTop":Object(h.t)(a)}},e.coverImg&&o.l.createElement(f.a,{"mode":"widthFix","src":e.coverImg,"className":"goods-wrap__cover-img","style":{"width":"100%"},"onClick":function onClick(){return Object(C.d)(e.coverUrl)}}),o.l.createElement(u.a,{"className":"goods-wrap__box","style":{"margin":Object(h.t)(e.imgMarginTop)+" "+Object(h.t)(e.pageMargin)+" 0 "+Object(h.t)(e.pageMargin)}},e.title&&o.l.createElement(u.a,{"className":"goods-wrap__head d-f a-i-b j-c-b"},o.l.createElement(u.a,{"className":"goods-wrap__title"},e.title),o.l.createElement(u.a,{"className":"goods-wrap__more d-f a-i-c","onClick":function onClick(){return Object(C.d)(e.moreUrl)}},e.moreName,o.l.createElement(u.a,{"className":"bnn-icon"},""))),o.l.createElement(u.a,{"className":"goods-wrap__body"},1===e.showMod&&o.l.createElement(A.a,e)))))})),o.l.createElement(I.S,null)),o.l.createElement(u.a,{"className":"index-category","style":{"display":"recommend"!==s?"block":"none"}},o.l.createElement(T.a,{"id":"goods-list","list":l,"pageMargin":30,"marginTop":30}),o.l.createElement(I.D,{"status":p}),"noMore"===p&&o.l.createElement(I.S,null)),o.l.createElement(j.a,{"isOpened":v,"info":a,"onClose":this.closeActivity.bind(this)}),o.l.createElement(I.c,{"top":82,"infinite":!0}),o.l.createElement(I.l,{"isOpened":!0}),o.l.createElement(u.a,{"style":{"height":k.m+"px"}}),o.l.createElement(I.P,null))}},{"key":"componentDidHide","value":function componentDidHide(){z(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&z(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this),this._offReachBottom&&this._offReachBottom()}}]),Index}(l.a.Component)}}]);