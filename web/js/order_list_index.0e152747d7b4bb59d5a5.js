(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"308":function(e,t,n){"use strict";n.d(t,"b",(function(){return asyncCalcOrder})),n.d(t,"p",(function(){return submitOrder})),n.d(t,"c",(function(){return asyncCalcScoresOrder})),n.d(t,"q",(function(){return submitScoresOrder})),n.d(t,"k",(function(){return goH5ToPay})),n.d(t,"a",(function(){return afterToPay})),n.d(t,"l",(function(){return goToPayInMp})),n.d(t,"m",(function(){return goToWalletPay})),n.d(t,"i",(function(){return getOrderPage})),n.d(t,"h",(function(){return getOrderInfo})),n.d(t,"g",(function(){return getOrderExpress})),n.d(t,"j",(function(){return getQrCode})),n.d(t,"e",(function(){return confirmReceipt})),n.d(t,"d",(function(){return cancelOrderInfo})),n.d(t,"o",(function(){return refundOrder})),n.d(t,"f",(function(){return getConnectUser})),n.d(t,"n",(function(){return postComplainAdd}));var o=n(9),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function asyncCalcOrder(e){return o.a.post("/order-pays/calculate-order",e)}function submitOrder(e){var t=new(n(45))(navigator.userAgent);return o.a.post("/order-pays/submit-order",r({},e,{"phoneMode":t.mobile()}))}function asyncCalcScoresOrder(e){return o.a.post("/order-scores/calculate-order",e)}function submitScoresOrder(e){return o.a.post("/order-scores/submit-order",e)}function goH5ToPay(e){return o.a.get("/order-pays/h5-to-pay/"+e)}function afterToPay(e){return o.a.get("/order-pays/after-to-pay/"+e)}function goToPayInMp(e){return o.a.request({"url":"/order-pays/go-to-pay-in-mp/"+e})}function goToWalletPay(e){return o.a.get("/order-pays/wallet-to-pay/"+e)}function getOrderPage(e){return o.a.get("/orders/get-page",{"params":e})}function getOrderInfo(e){return o.a.get("/orders/get-by-id/"+e)}function getOrderExpress(e){return o.a.get("/order/query-kdi?expressNo="+e)}function getQrCode(e){return o.a.get("/orders/get-qr-code/"+e)}function confirmReceipt(e){return o.a.put("/orders/receive-by-id",{"id":e})}function cancelOrderInfo(e){return o.a.put("/orders/cancel-by-id/"+e)}function refundOrder(e){return o.a.post("/orders/refund-by-id",e)}function getConnectUser(){return o.a.get("/orders/get-connect-user")}function postComplainAdd(e){return o.a.post("/complain/add",e)}},"552":function(e,t,n){},"553":function(e,t,n){e.exports=n.p+"static/images/empty-image-search.png"},"672":function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(4),a=n(131),i=n(128),c=n(129),l=n(3),s=n(43),u=n(485),d=(n(27),n(12)),f=n.n(d),p=n(71),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var y=function Icon(e){var t=e.type,n=e.className,r=void 0===n?"":n,a=e.size,i=void 0===a?"23":a,c=e.color;t&&(t=t.replace(/_/g,"-"));var l=f()(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}({},"weui-icon-"+t,!0),r),s={"font-size":i+"px","color":c};return o.l.createElement("i",m({},Object(p.a)(e,["type","className"]),{"className":l,"style":s}))},g=n(454),h=n(422),b=(n(552),n(308)),v=n(17),O=n(306),C=n(68),P=n(332),_=n(394),x=n(327),k=n(553),S=n.n(k),E=n(5);n.d(t,"default",(function(){return R}));var N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},I=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),j=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=[{"title":"全部","val":""},{"title":"待付款","val":v.f.UNPAID},{"title":"待发货","val":v.f.UN_SEND},{"title":"待收货","val":v.f.SENDING},{"title":"已完成","val":v.f.CLOSED}],L={},T=function fun(){},D=Object(r.b)(E.f),R=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));e.config={"navigationBarTitleText":"我的订单"};var t=e.$router.params;return e.state={"page":1,"limit":2,"orderList":[],"loadStatus":"loading","typeKey":isNaN(Number(t.status))?0:Number(t.status),"typeList":w,"telephone":D.telephone||void 0,"carousel":{},"goodsList":{}},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),I(Index,[{"key":"componentWillMount","value":function componentWillMount(){var e=this;this.getOrderListPage(),Object(x.a)("goods_commend").then((function(t){var n=t.data,o=n.content.findIndex((function(e){return"goodsCategories"===e.key})),r=n.content.findIndex((function(e){return"carousel"===e.key}));o>=0&&e.setState({"goodsList":n.content[o],"carousel":n.content[r]})}))}},{"key":"onClickType","value":function onClickType(e){var t=this;this.setState({"page":1,"typeKey":e,"orderList":[],"loadStatus":"loading","telephone":void 0},(function(){setTimeout((function(){t.getOrderListPage()}),500)}))}},{"key":"onConfirmSearch","value":function onConfirmSearch(){var e=this,t=this.state.telephone;t&&t.length<10?Object(a.d)({"title":"请输入正确的电话号码","icon":"none"}):this.setState({"page":1,"orderList":[],"loadStatus":"loading"},(function(){setTimeout((function(){e.getOrderListPage()}),500)}))}},{"key":"onInput","value":function onInput(e){this.setState({"telephone":e.detail.value})}},{"key":"onRemoveTelephone","value":function onRemoveTelephone(){var e=this;this.setState({"page":1,"orderList":[],"loadStatus":"loading","telephone":void 0},(function(){setTimeout((function(){e.getOrderListPage()}),500)}))}},{"key":"getOrderListPage","value":function getOrderListPage(){var e=this,t=this.state,n=t.page,o=t.limit,r=t.typeKey,a=t.typeList,i=t.orderList,c=t.loadStatus,l=t.telephone;"noMore"!==c&&Object(b.i)({"page":n,"limit":o,"status":a[r].val||void 0,"addressSnap":l||void 0}).then((function(t){var r=t.data,a=r.list,c=r.totalCount;e.setState({"page":n+1,"orderList":1===n?a:i.concat(a),"loadStatus":n*o>=c?"noMore":"more"})}))}},{"key":"loadMore","value":function loadMore(){this.setState({"loadStatus":"loading"}),this.getOrderListPage()}},{"key":"onPageScroll","value":function onPageScroll(e){L.onPageScroll&&L.onPageScroll(e.scrollTop)}},{"key":"onReachBottom","value":function onReachBottom(){L.onReachBottom&&L.onReachBottom()}},{"key":"render","value":function render(){var e=this.state,t=e.typeKey,n=e.typeList,r=e.orderList,a=e.loadStatus,i=e.telephone,c=e.carousel,l=e.goodsList;return o.l.createElement(s.a,{"className":"order-page"},o.l.createElement(O.V,{"list":n,"current":t,"className":"thin-border__b","onClick":this.onClickType.bind(this)}),o.l.createElement(s.a,{"className":"d-f a-i-c"},o.l.createElement(s.a,{"className":"input-box d-f j-c-b a-i-c"},o.l.createElement(s.a,{"className":"bnn-icon search-icon"},""),o.l.createElement(u.a,{"value":i,"type":"number","className":"search-input","placeholder":"请输入手机号，查询您的订单","onInput":this.onInput.bind(this),"onConfirm":this.onConfirmSearch.bind(this)}),i&&o.l.createElement(y,{"className":"icon-small search-remove","type":"cancel","size":"16","onClick":this.onRemoveTelephone.bind(this)})),o.l.createElement(s.a,{"className":"search-btn f-g-5","onClick":this.onConfirmSearch.bind(this)},"搜索")),o.l.createElement(g.a,{"scrollY":!0,"className":"list-body","onScrollToLower":this.getOrderListPage.bind(this)},o.l.createElement(s.a,{"className":"order-list"},r.map((function(e){return o.l.createElement(s.a,{"key":e.id,"className":"order-item"},o.l.createElement(O.N,{"order":e}),o.l.createElement(O.M,{"order":e,"onClick":e.status==v.f.PINKING?function(){return Object(C.G)(e.id)}:function(){return Object(C.w)(e.id)}}),o.l.createElement(s.a,{"className":"order-foot"},e.status==v.f.PINKING?o.l.createElement(h.a,{"className":"order-btn xf-btn xf-btn-primary xf-btn-round","onClick":function onClick(){return Object(C.G)(e.id)}},"查看详情"):o.l.createElement(h.a,{"className":"order-btn xf-btn xf-btn-round","onClick":function onClick(){return Object(C.C)()}},"联系客服"),e.status==v.f.UNPAID&&o.l.createElement(h.a,{"className":"order-btn xf-btn xf-btn-danger xf-btn-round","onClick":function onClick(){return Object(C.y)(e.id)}},"去支付"),e.status==v.f.UN_CHECK&&o.l.createElement(h.a,{"className":"order-btn xf-btn xf-btn-primary xf-btn-round","onClick":function onClick(){return Object(C.z)(e.id)}},"电子凭证"),e.status==v.f.CLOSED&&!e.isReply&&o.l.createElement(h.a,{"className":"order-btn xf-btn xf-btn-danger xf-btn-round","onClick":function onClick(){return Object(C.v)(e.id)}},"评论"),e.status==v.f.CLOSED&&!!e.isReply&&o.l.createElement(h.a,{"className":"order-btn xf-btn xf-btn-round","onClick":function onClick(){return Object(C.k)(e.id)}},"查看评价")))}))),r.length||"noMore"!=a?o.l.createElement(s.a,{"onClick":"more"==a?this.loadMore.bind(this):T},o.l.createElement(O.I,{"status":a})):o.l.createElement(s.a,{"className":"empty-content"},o.l.createElement(O.p,{"src":S.a,"className":"empty-img"}),o.l.createElement(s.a,null,"请输入手机号查询您的订单信息"))),c&&o.l.createElement(s.a,{"className":"carousel"},o.l.createElement(P.a,c)),l.list&&o.l.createElement(_.a,N({},l,{"scroll":L})),o.l.createElement(O.U,null))}},{"key":"componentDidMount","value":function componentDidMount(){j(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&j(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){j(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&j(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this),this._offReachBottom=Object(i.a)({"callback":this.onReachBottom,"ctx":this,"onReachBottomDistance":void 0}),this._offPageScroll=Object(c.a)({"callback":this.onPageScroll,"ctx":this})}},{"key":"componentDidHide","value":function componentDidHide(){j(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&j(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this),this._offReachBottom&&this._offReachBottom(),this._offPageScroll&&this._offPageScroll()}}]),Index}(l.a.Component);R.options={"addGlobalClass":!0}}}]);