(window.webpackJsonp=window.webpackJsonp||[]).push([[25,4],{"325":function(e,t,o){"use strict";var n=o(1),r=o(3),a=o(43),s=o(613),c=(o(411),o(12)),i=o.n(c),l=o(2),u=o(17),d=o(345),p=o.n(d),f=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{"value":o,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function RecordList(){return _classCallCheck(this,RecordList),_possibleConstructorReturn(this,(RecordList.__proto__||Object.getPrototypeOf(RecordList)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(RecordList,e),f(RecordList,[{"key":"render","value":function render(){var e=this.props,t=e.list,o=void 0===t?[]:t,r=e.className;return n.l.createElement(a.a,{"className":i()("record-list",r)},o.map((function(e,t){var o;return n.l.createElement(a.a,{"key":t,"className":"record-item thin-border__b d-f a-i-c j-c-b"},n.l.createElement(a.a,{"className":"record-left"},n.l.createElement(a.a,{"className":"record-title"},u.e[e.type]),n.l.createElement(a.a,{"className":"record-time"},Object(l.g)(e.createdAt))),n.l.createElement(a.a,{"className":"record-right d-f"},n.l.createElement(a.a,{"className":i()("record-num bnn-number m-r-10",(o={},_defineProperty(o,"record-plus",e.score>0),_defineProperty(o,"record-minus",e.score<0),o))},e.score>0?"+"+e.score:""+e.score),n.l.createElement(s.a,{"src":p.a,"className":"record-icon"})))})))}}]),RecordList}(r.a.Component);m.options={"addGlobalClass":!0};o(412);var b=o(413),h=o.n(b),g=o(306),y=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();function cart_goods_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cart_goods_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function Index(){return cart_goods_classCallCheck(this,Index),cart_goods_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments))}return function cart_goods_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),y(Index,[{"key":"render","value":function render(){var e=this.props,t=e.className,o=e.info,r=e.onClick;return o&&n.l.createElement(a.a,{"className":i()(h.a.goods,"d-f",t),"onClick":function onClick(){return r&&r()}},n.l.createElement(s.a,{"src":Object(l.o)(Object(l.q)(o.images),320,320),"className":h.a["goods-img"],"lazyLoad":!0}),n.l.createElement(a.a,{"className":i()(h.a["goods-info"],"d-f f-d-c j-c-b")},n.l.createElement(a.a,{"className":h.a["goods-head"]},n.l.createElement(a.a,{"className":i()(h.a["goods-name"],"t-o-e-2")},o.name),o.specSnap&&n.l.createElement(a.a,{"className":i()(h.a["goods-attr"],"t-o-e")},o.specSnap)),n.l.createElement(a.a,{"className":i()(h.a["goods-foot"],"d-f a-i-b j-c-b")},n.l.createElement(a.a,{"className":i()(h.a["goods-price"],"bnn-number")},o.salePrice," ",n.l.createElement(g.G,null)),n.l.createElement(a.a,{"className":h.a["goods-number"]},"x",o.number))))}}]),Index}(r.a.Component),E=o(414),N=o.n(E),v=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();function body_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function body_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function IntegralOrderCardBody(){return body_classCallCheck(this,IntegralOrderCardBody),body_possibleConstructorReturn(this,(IntegralOrderCardBody.__proto__||Object.getPrototypeOf(IntegralOrderCardBody)).apply(this,arguments))}return function body_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(IntegralOrderCardBody,e),v(IntegralOrderCardBody,[{"key":"render","value":function render(){var e=this.props,t=e.className,o=e.order,r=void 0===o?{}:o,s=e.onClick;return r.id&&n.l.createElement(a.a,{"className":i()(N.a["order-body"],"thin-border__b",t),"onClick":function onClick(){return s&&s()}},n.l.createElement(a.a,{"className":N.a["order-body-goods-list"]},r.cartSnap.map((function(e){return n.l.createElement(_,{"key":e.id,"info":e,"className":N.a["order-body-goods-item"]})}))),n.l.createElement(a.a,{"className":N.a["order-body-item"]},n.l.createElement(a.a,{"className":N.a["order-body-item-time"]},"下单日期：",Object(l.g)(r.createdAt,"YYYY-MM-DD HH:mm")),n.l.createElement(a.a,{"className":N.a["order-body-item-amount"]},"共 ",r.cartSnap.length," 件商品 合计：",r.payAmount," ",n.l.createElement(g.G,null))))}}]),IntegralOrderCardBody}(r.a.Component),C=o(614),w=o(422),k=(o(415),o(6)),P=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};function select_goods_defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{"value":o,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=o,e}function select_goods_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function select_goods_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var I=function filterGoodsInfo(e){return{"skuId":"","isSku":e.isSku,"images":Object(l.q)(e.images),"productId":e.id,"costPrice":e.costPrice,"salePrice":e.salePrice,"memberPrice":e.memberPrice,"originPrice":e.originPrice,"stockNumber":e.stockNumber}},j=function initGoodsSku(e,t){var o={};return e.map((function(e,t){o[t]=[]})),t.map((function(e){e.skuId=e.id,e.attrList=e.specSnap.split(","),e.attrList.map((function(e,t){o[t].push(e)}))})),{"specList":e.map((function(e,t){var n=e.value,r=function _objectWithoutProperties(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(e,["value"]),a=[].concat(_toConsumableArray(new Set(o[t]))),s=n.split(",").filter((function(e){return a.indexOf(e)>=0}));return S({},r,{"list":s})})),"skuList":t}},x=function selectGoodsSku(e,t,o){var n=e.filter(Boolean),r=null,a=k.a.cloneDeep(t),s=[];return a.map((function(e){e.options=[],s=s.concat(e.list.filter((function(e){return-1==n.indexOf(e)})))})),o.map((function(t){var o=[].concat(_toConsumableArray(new Set([].concat(_toConsumableArray(t.attrList),_toConsumableArray(s)))));o.length===s.length+n.length&&(a.map((function(e,o){e.options.push(t.attrList[o])})),n.length===a.length&&(r=t)),o.length===s.length+n.length-1&&a.map((function(o,n){o.list.indexOf(e[n])>=0&&o.options.push(t.attrList[n])}))})),a.map((function(e){e.options=[].concat(_toConsumableArray(new Set(e.options)))})),{"specList":a,"goodsInfo":r}},R=function fun(){},L=function(e){function GoodsSelect(){select_goods_classCallCheck(this,GoodsSelect);var e=select_goods_possibleConstructorReturn(this,(GoodsSelect.__proto__||Object.getPrototypeOf(GoodsSelect)).apply(this,arguments));return e.state={"isShow":!1,"checked":[],"skuList":[],"specList":[],"goodsInfo":{}},e}return function select_goods_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(GoodsSelect,e),P(GoodsSelect,[{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){var t=e.goods;if(JSON.stringify(this.props.goods)!==JSON.stringify(t))if(t.isSku){var o=t.tagSnap,n=t.skuDetail,r=t.specSnap||[],a=j(o,n),s=x(r,a.specList,a.skuList);this.setState({"checked":r,"skuList":a.skuList,"specList":s.specList,"goodsNum":t.number||1,"goodsInfo":s.goodsInfo||I(t)})}else this.setState({"goodsNum":t.number||1,"goodsInfo":I(t)})}},{"key":"onConfirm","value":function onConfirm(){var e=this.props.goods,t=this.state,o=t.goodsInfo,n=t.goodsNum;this.props.onConfirm(S({},e,o),n)}},{"key":"changeGoodsNum","value":function changeGoodsNum(e){this.setState({"goodsNum":e})}},{"key":"selectGoods","value":function selectGoods(e,t){var o=this.props.goods,n=this.state,r=n.checked,a=n.specList,s=n.skuList;r[e]=r[e]==t?"":t;var c=x(r,a,s);this.setState({"checked":r,"specList":c.specList,"goodsInfo":c.goodsInfo||I(o)})}},{"key":"render","value":function render(){var e=this,t=this.props,o=t.goods,r=void 0===o?{}:o,c=t.isOpened,l=t.onClose,u=this.state,d=u.checked,p=u.goodsInfo,f=u.goodsNum,m=u.specList,b=c?"enter":"leave",h=d.filter(Boolean),y=r.isSku?f<=p.stockNumber&&h.length===m.length:f<=r.stockNumber,_=r.limitNumber?r.limitNumber:p.stockNumber||1;return n.l.createElement(a.a,{"catchtouchmove":!0},n.l.createElement(a.a,{"className":"xf-overlay xf-fade-"+b,"onClick":function onClick(){return l()}}),n.l.createElement(a.a,{"className":i()("xf-popup xf-popup--bottom xf-popup--round goods-select",select_goods_defineProperty({},"xf-slide-bottom xf-slide-"+b,!c))},n.l.createElement(a.a,{"className":"goods-select__goods"},n.l.createElement(s.a,{"src":p.images,"className":"goods-select__goods-img"}),n.l.createElement(a.a,{"className":"goods-select__goods-info"},n.l.createElement(a.a,{"className":"goods-select__goods-price d-f a-i-b"},n.l.createElement(a.a,{"className":"goods-select__goods-sale-price bnn-number"},Number(r.salePrice),n.l.createElement(g.G,null))),n.l.createElement(C.a,{"className":"goods-select__goods-num"},"仅剩余 ",p.stockNumber," 件"),h.length&&n.l.createElement(a.a,{"className":"goods-select__goods-attr t-o-e-2"},"已选：",n.l.createElement(C.a,{"className":"goods-select__goods-attr-text"},h.join("、"))))),m.length&&n.l.createElement(a.a,{"className":"goods-select__spec-list"},m.map((function(t,o){return n.l.createElement(a.a,{"key":o,"className":"goods-select__spec-item"},n.l.createElement(a.a,{"className":"title"},t.name),n.l.createElement(a.a,{"className":"goods-select__attr-list"},t.list.map((function(r,s){var c,l=-1==t.options.indexOf(r);return n.l.createElement(a.a,{"key":s,"className":i()("goods-select__attr-item f-g-5",(c={},select_goods_defineProperty(c,"goods-select__attr-active",d[o]===r),select_goods_defineProperty(c,"goods-select__attr-disabled",l),c)),"onClick":l?R:e.selectGoods.bind(e,o,r)},r)}))))}))),n.l.createElement(a.a,{"className":"goods-select__number"},n.l.createElement(a.a,{"className":"goods-select__number-text"},"数量"),n.l.createElement(g.y,{"min":1,"max":_,"value":f,"onChange":this.changeGoodsNum.bind(this)})),n.l.createElement(w.a,{"disabled":!y,"className":"goods-select__submit-btn","hoverClass":"hover-class--btn","onClick":this.onConfirm.bind(this)},r.isSku&&h.length!==m.length?"请选择":"确定")))}}]),GoodsSelect}(r.a.Component);L.options={"addGlobalClass":!0},o.d(t,"c",(function(){return m})),o.d(t,"a",(function(){return _})),o.d(t,"b",(function(){return O})),o.d(t,"d",(function(){return L}))},"339":function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var n=o(1),r=o(3),a=o(43),s=o(613),c=o(614),i=(o(340),o(12)),l=o.n(i),u=o(68),d=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function ShopInfoOne(){return _classCallCheck(this,ShopInfoOne),_possibleConstructorReturn(this,(ShopInfoOne.__proto__||Object.getPrototypeOf(ShopInfoOne)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShopInfoOne,e),d(ShopInfoOne,[{"key":"render","value":function render(){var e="shop-info-one",t=this.props,o=t.info,r=void 0===o?{}:o,i=t.className;return n.l.createElement(a.a,{"className":l()(e,i),"onClick":function onClick(){return Object(u.D)(r.id)}},n.l.createElement(s.a,{"src":r.logo,"className":e+"-logo"}),n.l.createElement(a.a,{"className":e+"-name t-o-e"},r.shopName),n.l.createElement(a.a,{"className":e+"-more bnn-icon d-f a-i-c"},n.l.createElement(c.a,{"className":e+"-more-text"},"进店逛逛"),n.l.createElement(c.a,{"className":e+"-more-icon"},"")))}}]),ShopInfoOne}(r.a.Component);p.options={"addGlobalClass":!0}},"340":function(e,t,o){},"341":function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var n=o(1),r=o(3),a=o(43),s=o(614),c=(o(342),o(12)),i=o.n(c),l=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function ShopInfoTwo(){return _classCallCheck(this,ShopInfoTwo),_possibleConstructorReturn(this,(ShopInfoTwo.__proto__||Object.getPrototypeOf(ShopInfoTwo)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShopInfoTwo,e),l(ShopInfoTwo,[{"key":"callPhone","value":function callPhone(e){var t=e.phone;if(!t)return!1;wx.makePhoneCall({"phoneNumber":t})}},{"key":"openMap","value":function openMap(e){var t=e.lat,o=e.lng,n=e.address,r=e.shopName;if(!t||!o)return!1;wx.openLocation({"name":r,"address":n,"latitude":Number(t),"longitude":Number(o)})}},{"key":"render","value":function render(){var e="shop-info-two",t=this.props,o=t.info,r=void 0===o?{}:o,c=t.className;return n.l.createElement(a.a,{"className":i()(e,c)},n.l.createElement(a.a,{"className":e+"-info"},n.l.createElement(a.a,{"className":e+"-info-left t-o-e"},r.shopName),n.l.createElement(a.a,{"className":e+"-info-right"},n.l.createElement(s.a,{"className":e+"-icon bnn-icon","onClick":this.callPhone.bind(this,r)},""),n.l.createElement(s.a,{"className":e+"-icon bnn-icon","onClick":this.openMap.bind(this,r)},""))),n.l.createElement(a.a,{"className":e+"-li"},r.businessTime),n.l.createElement(a.a,{"className":e+"-li"},r.address))}}]),ShopInfoTwo}(r.a.Component);u.options={"addGlobalClass":!0}},"342":function(e,t,o){},"411":function(e,t,o){},"412":function(e,t,o){},"413":function(e,t,o){e.exports={"goods-img":"goods-img_kQv2G0y6","goods-info":"goods-info_3acbKObo","goods-name":"goods-name_2s5nNvrz","goods-attr":"goods-attr_2-O94Igu","goods-price":"goods-price_3dcY68w3","goods-number":"goods-number_zIAknoE-"}},"414":function(e,t,o){e.exports={"order-body":"order-body_1FzI6_rg","order-body-goods-item":"order-body-goods-item_1oBEAw2B","order-body-item":"order-body-item_OsPdGRYo","order-body-item-time":"order-body-item-time_ScwFsy1o"}},"415":function(e,t,o){},"604":function(e,t,o){},"605":function(e,t,o){},"676":function(e,t,o){"use strict";o.r(t);var n=o(1),r=o(43),a=o(614),s=o(407),c=o(422),i=(o(604),o(321),o(311)),l=o(12),u=o.n(l),d=o(312),p=o(325),f=o(2),m=o(68),b=o(337),h=o(3),g=o(613),y=(o(605),o(345)),_=o.n(y),E=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N=function(e){function RecordList(){return _classCallCheck(this,RecordList),_possibleConstructorReturn(this,(RecordList.__proto__||Object.getPrototypeOf(RecordList)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(RecordList,e),E(RecordList,[{"key":"render","value":function render(){var e=this.props,t=e.sale,o=e.origin,a=e.isSku,s=e.saleSize,c=void 0===s?36:s,i=e.className;return n.l.createElement(r.a,{"className":u()("goods-price",i)},n.l.createElement(r.a,{"className":"sale-price"},n.l.createElement(g.a,{"src":_.a,"className":"sale-price__unit"}),n.l.createElement(r.a,{"className":"sale-price__num f-s-"+c},Object(f.f)(t)),!!a&&n.l.createElement(r.a,{"className":"sale-price__text"},"起")),!a&&o>t&&n.l.createElement(r.a,{"className":"origin-price"},"￥",Object(f.f)(o)))}}]),RecordList}(h.a.Component);N.options={"addGlobalClass":!0};var v=o(306),O=o(322),C=o(339),w=o(341),k=o(17);o.d(t,"default",(function(){return j}));var P=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),S=function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(o):void 0};function goods_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function goods_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=function filterGoodsInfo(e){return e.saveMoney=i.a.Sub(Number(e.salePrice),Number(e.memberPrice)),e.unitName=e.unitSnap&&e.unitSnap.name||"件",e.isActivity=e.strategy,Object(f.l)(e),e},j=function(e){function Index(){goods_classCallCheck(this,Index);var e=goods_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationStyle":"custom"},e}return function goods_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),P(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getGoodsInfo(),this.getGoodsPage(),this.getCommentPage()}},{"key":"getGoodsInfo","value":function getGoodsInfo(){var e=this,t=this.$router.params;Object(d.c)(t.id).then((function(t){var o=t.data;o.timestamp=Number(new Date),e.setState({"goodsInfo":I(o),"comboList":o.skuDetail||[],"goodsImages":o.images},(function(){e.setState({"loadingStatus":!1}),setTimeout((function(){e.getNodeLocation()}),200)}))})).catch((function(e){console.log(e),setTimeout((function(){wx.navigateBack()}),800)}))}},{"key":"setShowSelect","value":function setShowSelect(e){this.setState({"showSelect":e})}},{"key":"onConfirm","value":function onConfirm(e,t){console.log(e),this.setShowSelect(!1),Object(m.a)({"id":e.productId,"skuId":e.skuId,"number":t})}},{"key":"render","value":function render(){var e=this,t=this.state,o=t.opacity,i=t.nodeKey,l=t.nodeList,d=t.goodsInfo,b=t.goodsList,h=t.showSelect,g=t.showShareImg,y=t.shareImg,_=t.commentRes,E=t.loadingStatus,P=d.salesReport&&d.salesReport.map((function(e){return e.userInfo&&e.userInfo.headImg})),S=(100/l.length).toFixed(2);return n.l.createElement(r.a,{"className":"goods-page"},E&&n.l.createElement(v.J,null),n.l.createElement(v.x,{"opacity":o},n.l.createElement(r.a,{"className":"node-list"},l.map((function(t,o){return n.l.createElement(r.a,{"key":t.id,"className":u()("node-item f-g-5",i===o&&"node-item__active"),"onClick":e.onSwitchNode.bind(e,t,o)},t.name)})),n.l.createElement(r.a,{"className":"under-line","style":{"left":"calc("+i*S+"% + ("+S+"% / 2))"}}))),n.l.createElement(r.a,{"className":"goods-scroll"},n.l.createElement(r.a,{"id":"goods-info","className":"goods-card"},n.l.createElement(v.r,{"images":d.images,"video":{"url":d.video,"poster":d.videoCoverImg}}),n.l.createElement(r.a,{"className":"goods-head"},n.l.createElement(r.a,{"className":"d-f a-i-c j-c-b"},n.l.createElement(r.a,{"className":"price d-f a-i-b"},n.l.createElement(N,{"sale":d.salePrice,"origin":d.originPrice,"isSku":d.isSku,"saleSize":48})),n.l.createElement(r.a,{"className":"user-like f-g-5"},n.l.createElement(a.a,{"className":"like-icon bnn-icon m-r-10"},""),d.storeCount,"人喜欢")),n.l.createElement(r.a,{"className":"goods-name"},d.name),n.l.createElement(r.a,{"className":"stock-box d-f j-c-b"},n.l.createElement(r.a,{"className":""},"已兑换",d.salesNumber,d.unitName),n.l.createElement(r.a,{"className":""},"剩余库存",d.stockNumber,d.unitName)),n.l.createElement(r.a,{"className":"sales-record d-f j-c-b"},n.l.createElement(v.b,{"list":P,"showMore":!0}),n.l.createElement(r.a,{"className":"invite-btn d-f a-i-c","hoverClass":"hover-class--btn","onClick":this.showShareImg.bind(this)},"邀请好友一起抢")),n.l.createElement(r.a,{"className":"tip-list d-f f-w-w"},d.tips&&d.tips.map((function(e,t){return n.l.createElement(r.a,{"key":t,"className":"tip-item d-f a-i-c"},n.l.createElement(r.a,{"className":"bnn-icon tip-icon"},""),n.l.createElement(r.a,{"className":"tip-text l-h-o"},e))}))))),d.type===k.c.VIRTUAL&&n.l.createElement(r.a,{"className":"goods-card goods-card__body shop-card"},n.l.createElement(r.a,{"className":"goods-card__head"},n.l.createElement(v.W,null,"商家信息")),n.l.createElement(C.a,{"info":d.shopSnap,"className":"shop-card__head"}),n.l.createElement(r.a,{"className":"thin-border__b"}),n.l.createElement(w.a,{"info":d.shopSnap,"className":"shop-card__foot"})),_.list&&_.list.length&&n.l.createElement(r.a,{"id":"goods-comment","className":"goods-card goods-card__body comment-card"},n.l.createElement(r.a,{"className":"goods-card__head"},n.l.createElement(v.W,null,"用户评论")),n.l.createElement(r.a,{"className":"comment-list"},_.list.map((function(e){return n.l.createElement(v.e,{"key":e.id,"info":e,"className":"comment-item"})})),n.l.createElement(r.a,{"className":"see-more f-g-5","onClick":function onClick(){return Object(m.i)(d.id)}},"查看更多好评（",_.totalCount,"）"))),n.l.createElement(r.a,{"className":"goods-body"},d.description&&n.l.createElement(r.a,{"id":"goods-desc","className":"goods-card"},n.l.createElement(r.a,{"className":"goods-card__head"},n.l.createElement(v.W,null,"商品详情")),n.l.createElement(r.a,{"className":"rich-text-wrap goods-card__body"},n.l.createElement(s.a,{"nodes":Object(f.e)(d.description)}))),n.l.createElement(r.a,{"id":"goods-hot","className":"goods-card"},n.l.createElement(r.a,{"className":"goods-card__head"},n.l.createElement(v.W,null,"更多美好生活")),n.l.createElement(v.A,{"list":b}))),n.l.createElement(r.a,{"className":"goods-footer--height"})),n.l.createElement(O.a,{"menus":["home","share","user"],"onShare":this.showShareImg.bind(this)},n.l.createElement(c.a,{"disabled":d.disabled,"className":"goods-foot__btns-btn xf-btn xf-btn-primary","onClick":this.setShowSelect.bind(this)},d.disabledText||"立即兑换")),n.l.createElement(v.S,{"isOpened":g,"width":500,"height":890,"image":y,"onClose":this.showShareImg.bind(this,!1)}),n.l.createElement(p.d,{"goods":d,"isOpened":h,"onClose":this.setShowSelect.bind(this,!1),"onConfirm":this.onConfirm.bind(this)}),n.l.createElement(v.c,null))}},{"key":"componentDidMount","value":function componentDidMount(){S(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&S(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){S(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&S(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){S(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&S(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}(b.a)}}]);