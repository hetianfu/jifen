(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"307":function(e,t,r){"use strict";r.d(t,"a",(function(){return asyncCalcOrder})),r.d(t,"l",(function(){return submitOrder})),r.d(t,"b",(function(){return asyncCalcScoresOrder})),r.d(t,"m",(function(){return submitScoresOrder})),r.d(t,"i",(function(){return goH5ToPay})),r.d(t,"j",(function(){return goToWalletPay})),r.d(t,"g",(function(){return getOrderPage})),r.d(t,"f",(function(){return getOrderInfo})),r.d(t,"h",(function(){return getQrCode})),r.d(t,"d",(function(){return confirmReceipt})),r.d(t,"c",(function(){return cancelOrderInfo})),r.d(t,"k",(function(){return refundOrder})),r.d(t,"e",(function(){return getConnectUser}));var n=r(9);function asyncCalcOrder(e){return n.a.post("/order-pays/calculate-order",e)}function submitOrder(e){return n.a.post("/order-pays/submit-order",e)}function asyncCalcScoresOrder(e){return n.a.post("/order-scores/calculate-order",e)}function submitScoresOrder(e){return n.a.post("/order-scores/submit-order",e)}function goH5ToPay(e){return n.a.get("/order-pays/h5-to-pay/"+e)}function goToWalletPay(e){return n.a.get("/order-pays/wallet-to-pay/"+e)}function getOrderPage(e){return n.a.get("/orders/get-page",{"params":e})}function getOrderInfo(e){return n.a.get("/orders/get-by-id/"+e)}function getQrCode(e){return n.a.get("/orders/get-qr-code/"+e)}function confirmReceipt(e){return n.a.put("/orders/receive-by-id",{"id":e})}function cancelOrderInfo(e){return n.a.put("/orders/cancel-by-id/"+e)}function refundOrder(e){return n.a.post("/orders/refund-by-id",e)}function getConnectUser(){return n.a.get("/orders/get-connect-user")}},"517":function(e,t,r){},"584":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var n=r(1),a=r(2),o=r(126),c=r(40),s=r(364),i=(r(517),r(305)),l=r(307),d=r(14),u=r(303),m=r(319),f=r(302),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),y=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));e.config={"navigationBarTitleText":"订单详情"};var t=e.$router.params;return e.state={"id":t.id,"loading":!0,"cartList":[],"userInfo":{},"orderInfo":{},"isOpened":!1},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),b(Index,[{"key":"componentDidShow","value":function componentDidShow(){this.getOrderInfo()}},{"key":"getOrderInfo","value":function getOrderInfo(){var e=this;Object(l.f)(this.state.id).then((function(t){var r=t.data;e.setState({"cartList":r.cartSnap,"userInfo":r.addressSnap,"orderInfo":r,"storeInfo":r.cooperateShopAddressSnap,"loadingStatus":!1},(function(){e.setState({"loading":!1})}))}))}},{"key":"onConfirmRefund","value":function onConfirmRefund(e){var t=this,r=this.state,n=r.id,c=r.orderInfo;a.a.requestSubscribeMessage({"tmplIds":Object(d.l)("orderRefund"),"complete":function complete(){Object(o.b)({"title":"请稍后","mask":!0}),Object(l.k)({"id":n,"content":e}).then((function(){t.setState({"isOpened":!1,"orderInfo":p({},c,{"refundAble":0})},(function(){Object(o.a)(),Object(o.d)({"title":"提交成功"})}))}))}})}},{"key":"orderConfirmReceipt","value":function orderConfirmReceipt(){var e=this,t=this.state.orderInfo;Object(o.b)({"title":"请稍后","mask":!0}),Object(l.d)(this.state.id).then((function(){Object(o.d)({"title":"确认成功"}),e.getOrderInfo(),Object(o.c)({"title":"提示","content":"是否前往评论","success":function success(e){e.confirm&&Object(f.t)(t.id)}})}))}},{"key":"render","value":function render(){var e=this.state,t=e.loading,r=e.cartList,a=e.userInfo,o=e.storeInfo,l=e.orderInfo,p=e.isOpened;return n.l.createElement(c.a,{"className":"detail-page order-info"},t&&n.l.createElement(u.E,{"isCover":!0}),n.l.createElement(c.a,{"className":"order-card detail-header d-f f-d-c p-0"},1===l.distribute?n.l.createElement(c.a,{"className":"order-card__body user-info d-f f-d-c f-w-w"},n.l.createElement(c.a,{"className":"user-box d-f a-i-c j-c-b"},n.l.createElement(c.a,{"className":"user-name t-o-e"},o.shopName),n.l.createElement(c.a,{"className":"user-phone t-o-e"},o.phone)),n.l.createElement(c.a,{"className":"user-box user-address"},o.address)):n.l.createElement(c.a,{"className":"order-card__body user-info d-f f-d-c f-w-w"},n.l.createElement(c.a,{"className":"user-box d-f a-i-c j-c-b"},n.l.createElement(c.a,{"className":"user-name t-o-e"},a.name),n.l.createElement(c.a,{"className":"user-phone t-o-e"},a.telephone)),n.l.createElement(c.a,{"className":"user-box user-address"},a.city," ",a.detail))),n.l.createElement(c.a,{"className":"order-card order-card__body"},n.l.createElement(c.a,{"className":"cart-list"},r.map((function(e){return n.l.createElement(m.a,{"key":e.id,"info":e,"isJump":!0,"className":"cart-item thin-border__b"})}))),n.l.createElement(c.a,{"className":"detail-list"},l.discountAmount&&n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"优惠金额："),n.l.createElement(c.a,{"className":"item-right bnn-number"},"￥",l.discountAmount)),l.freightAmount&&n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"运费"),n.l.createElement(c.a,{"className":"item-right bnn-number"},"￥",l.freightAmount)),n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"共",r.length,"件商品"),n.l.createElement(c.a,{"className":"item-right pay-amount bnn-number"},"￥",l.payAmount)),n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"订单备注："),n.l.createElement(c.a,{"className":"item-right"},l.remark||"无")))),n.l.createElement(c.a,{"className":"order-card"},n.l.createElement(c.a,{"className":"order-card__head"},"订单信息"),n.l.createElement(c.a,{"className":"order-card__body"},n.l.createElement(c.a,{"className":"detail-list"},n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"订单状态："),n.l.createElement(c.a,{"className":"item-right order-status"},i.f[l.status])),l.expressNo&&n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"快递单号："),n.l.createElement(c.a,{"className":"item-right"},l.expressNo)),l.expressName&&n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"快递公司："),n.l.createElement(c.a,{"className":"item-right"},l.expressName)),n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"订单编号："),n.l.createElement(c.a,{"className":"item-right"},l.id)),n.l.createElement(c.a,{"className":"detail-item"},n.l.createElement(c.a,{"className":"item-left"},"订单时间："),n.l.createElement(c.a,{"className":"item-right"},Object(d.g)(l.createdAt)))))),n.l.createElement(c.a,{"className":"float-box--height"}),n.l.createElement(c.a,{"className":"fy-popup fy-popup--bottom float-box d-f a-i-c j-c-b"},n.l.createElement(s.a,{"className":"confirm-btn xf-btn xf-btn-round xf-btn-primary","onClick":function onClick(){return Object(f.l)()}},"返回首页"),i.e.SENDING===l.status&&n.l.createElement(s.a,{"className":"confirm-btn xf-btn xf-btn-round xf-btn-primary","onClick":this.orderConfirmReceipt.bind(this)},"确认收货")),n.l.createElement(u.K,{"isOpened":p,"onClose":this.setState.bind(this,{"isOpened":!1}),"onConfirm":this.onConfirmRefund.bind(this)}))}},{"key":"componentDidMount","value":function componentDidMount(){y(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&y(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){y(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&y(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}(a.a.Component);h.options={"addGlobalClass":!0}}}]);