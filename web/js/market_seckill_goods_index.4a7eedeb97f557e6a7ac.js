(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"309":function(e,t,n){"use strict";n.d(t,"b",(function(){return filterStyles})),n.d(t,"a",(function(){return filterGoodsInfo}));var o=n(308),a=n(10),r=n(305),s=n(14);function filterStyles(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[null,void 0,"","px","rpx","0rpx",!1],n={};return Object.keys(e).filter((function(o){-1==t.indexOf(e[o])&&(n[o]=e[o])})),n}function filterGoodsInfo(e){switch(e.shareAmount=a.a.head(e.sharedAmount),e.saveMoney=o.a.Sub(Number(e.salePrice),Number(e.memberPrice)),e.unitName=e.unitSnap&&e.unitSnap.name||"件",e.isActivity=!!e.strategy,e.description=e.description&&Object(s.e)(e.description),e.shareAmount=e.shareAmount&&Object(s.d)(e.shareAmount),e.type){case r.b.REAL:case r.b.VIRTUAL:case r.b.SCORE:e.disabled=!(e.isOnSale&&e.stockNumber),e.disabledText=e.isOnSale?e.stockNumber?"":"已售罄":"已下架"}var t=e.strategy;switch(t&&e.saleStrategy){case r.b.SECKILL:e.seconds=t.status?t.endSeconds:t.startSeconds,e.status=t.status,e.statusName={"-1":"已结束","0":"未开始"}[t.status],e.limitNumber=t.limitNumber,e.disabled=t.status<1,e.disabledText={"-1":"已结束","0":"未开始"}[t.status]}return e}},"332":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(1),a=n(2),r=n(40),s=n(569),l=n(404),c=(n(333),n(8)),i=n.n(c),u=n(302),m=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function ShopInfoOne(){return _classCallCheck(this,ShopInfoOne),_possibleConstructorReturn(this,(ShopInfoOne.__proto__||Object.getPrototypeOf(ShopInfoOne)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShopInfoOne,e),m(ShopInfoOne,[{"key":"render","value":function render(){var e="shop-info-one",t=this.props,n=t.info,a=void 0===n?{}:n,c=t.className;return o.l.createElement(r.a,{"className":i()(e,c),"onClick":function onClick(){return Object(u.A)(a.id)}},o.l.createElement(s.a,{"src":a.logo,"className":e+"-logo"}),o.l.createElement(r.a,{"className":e+"-name t-o-e"},a.shopName),o.l.createElement(r.a,{"className":e+"-more bnn-icon d-f a-i-c"},o.l.createElement(l.a,{"className":e+"-more-text"},"进店逛逛"),o.l.createElement(l.a,{"className":e+"-more-icon"},"")))}}]),ShopInfoOne}(a.a.Component);d.options={"addGlobalClass":!0}},"333":function(e,t,n){},"334":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(1),a=n(2),r=n(40),s=n(404),l=(n(335),n(8)),c=n.n(l),i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function ShopInfoTwo(){return _classCallCheck(this,ShopInfoTwo),_possibleConstructorReturn(this,(ShopInfoTwo.__proto__||Object.getPrototypeOf(ShopInfoTwo)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShopInfoTwo,e),i(ShopInfoTwo,[{"key":"callPhone","value":function callPhone(e){var t=e.phone;if(!t)return!1;wx.makePhoneCall({"phoneNumber":t})}},{"key":"openMap","value":function openMap(e){var t=e.lat,n=e.lng,o=e.address,a=e.shopName;if(!t||!n)return!1;wx.openLocation({"name":a,"address":o,"latitude":Number(t),"longitude":Number(n)})}},{"key":"render","value":function render(){var e="shop-info-two",t=this.props,n=t.info,a=void 0===n?{}:n,l=t.className;return o.l.createElement(r.a,{"className":c()(e,l)},o.l.createElement(r.a,{"className":e+"-info"},o.l.createElement(r.a,{"className":e+"-info-left t-o-e"},a.shopName),o.l.createElement(r.a,{"className":e+"-info-right"},o.l.createElement(s.a,{"className":e+"-icon bnn-icon","onClick":this.callPhone.bind(this,a)},""),o.l.createElement(s.a,{"className":e+"-icon bnn-icon","onClick":this.openMap.bind(this,a)},""))),o.l.createElement(r.a,{"className":e+"-li"},a.businessTime),o.l.createElement(r.a,{"className":e+"-li"},a.address))}}]),ShopInfoTwo}(a.a.Component);u.options={"addGlobalClass":!0}},"335":function(e,t,n){},"357":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(1),a=n(352),r=n(40),s=n(404),l=(n(358),n(14)),c=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function SeckillCountdown(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SeckillCountdown);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(SeckillCountdown.__proto__||Object.getPrototypeOf(SeckillCountdown)).call(this));return e.state={"time":Object(l.b)()},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SeckillCountdown,e),c(SeckillCountdown,[{"key":"onIntervalCallBack","value":function onIntervalCallBack(e){this.setState({"time":e})}},{"key":"render","value":function render(){var e=this.state.time;return o.l.createElement(r.a,{"className":"goods-count-down bnn-number "},!!e.hours&&o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.hours)),!!e.hours&&":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.minutes)),":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.seconds)),":",o.l.createElement(s.a,{"className":"count-down__box"},this.formatNum(e.millisecond)))}}]),SeckillCountdown}(a.a)},"358":function(e,t,n){},"548":function(e,t,n){},"605":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var o=n(1),a=n(40),r=n(404),s=n(569),l=n(339),c=n(364),i=(n(548),n(315),n(8)),u=n.n(i),m=n(305),d=n(309),f=n(306),p=n(14),h=n(302),b=n(348),y=n.n(b),g=n(320),E=n(357),N=n(303),_=n(316),v=n(332),w=n(334),O=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),I=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationStyle":"custom"},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),O(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getGoodsInfo(),this.getGoodsPage(),this.getCommentPage()}},{"key":"getGoodsInfo","value":function getGoodsInfo(){var e=this,t=this.$router.params;Object(f.b)(t.id).then((function(t){var n=t.data;n.timestamp=Number(new Date),e.setState({"goodsInfo":Object(d.a)(n),"comboList":n.skuDetail||[],"goodsImages":n.images},(function(){e.setState({"loadingStatus":!1}),setTimeout((function(){e.getNodeLocation()}),200)}))})).catch((function(e){console.log(e),setTimeout((function(){wx.navigateBack()}),800)}))}},{"key":"onConfirm","value":function onConfirm(e,t){e.type===m.b.VIRTUAL?Object(h.f)({"id":e.productId,"skuId":e.skuId,"number":t,"shopId":e.shopId}):Object(h.e)({"cartList":[{"id":e.productId,"skuId":e.skuId,"number":t}]}),this.setState({"showSelect":!1})}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.opacity,i=t.nodeKey,d=t.nodeList,f=t.userInfo,b=t.goodsInfo,g=t.goodsList,O=t.showSelect,I=t.showShareImg,k=t.shareImg,C=t.commentRes,S=t.loadingStatus,j=b.salesReport&&b.salesReport.map((function(e){return e.userInfo&&e.userInfo.headImg})),P=(100/d.length).toFixed(2);return o.l.createElement(a.a,{"className":"goods-page"},S&&o.l.createElement(N.E,null),o.l.createElement(N.s,{"opacity":n},o.l.createElement(a.a,{"className":"node-list"},d.map((function(t,n){return o.l.createElement(a.a,{"key":t.id,"className":u()("node-item f-g-5",i===n&&"node-item__active"),"onClick":e.onSwitchNode.bind(e,t,n)},t.name)})),o.l.createElement(a.a,{"className":"under-line","style":{"left":"calc("+i*P+"% + ("+P+"% / 2))"}}))),o.l.createElement(a.a,{"className":"goods-scroll"},o.l.createElement(a.a,{"id":"goods-info","className":"goods-card"},o.l.createElement(N.o,{"fId":b.timestamp,"images":b.images,"video":{"url":b.video,"poster":b.videoCoverImg}}),o.l.createElement(a.a,{"className":"goods-activity d-f a-i-s"},o.l.createElement(a.a,{"className":"activity-left f-g-2 f-d-c"},o.l.createElement(r.a,{"className":"left-title"},"库存告急"),o.l.createElement(r.a,{"className":"activity-desc p-t-10"},b.limitNumber?"每人限购 "+b.limitNumber+b.unitName:"限时抢购")),o.l.createElement(a.a,{"className":"activity-right f-g-8 f-d-c"},o.l.createElement(r.a,{"className":"activity-desc p-b-10"},"距",b.status?"结束剩余":"开始"),o.l.createElement(E.a,{"seconds":b.seconds}))),o.l.createElement(a.a,{"className":"goods-head"},o.l.createElement(a.a,{"className":"d-f a-i-c j-c-b"},o.l.createElement(a.a,{"className":"price d-f a-i-b"},o.l.createElement(a.a,{"className":"sale-price bnn-number"},o.l.createElement(r.a,{"className":"price-unit"},"￥"),b.salePrice),100*b.originPrice>100*b.salePrice&&o.l.createElement(a.a,{"className":"origin-price bnn-number m-l-10"},"￥",b.originPrice)),o.l.createElement(a.a,{"className":"user-like f-g-5"},o.l.createElement(r.a,{"className":"like-icon bnn-icon m-r-10"},""),b.storeCount,"人喜欢")),o.l.createElement(a.a,{"className":"goods-name"},b.name),o.l.createElement(a.a,{"className":"stock-box d-f j-c-b"},o.l.createElement(a.a,{"className":""},"已兑换",b.salesNumber,b.unitName),o.l.createElement(a.a,{"className":""},"剩余库存",b.stockNumber,b.unitName)),Object(p.w)(b)&&o.l.createElement(a.a,{"className":"member-box d-f a-i-c j-c-b","onClick":function onClick(){return Object(h.p)()}},o.l.createElement(a.a,{"className":"member-left d-f a-i-c"},o.l.createElement(s.a,{"src":y.a,"className":"left-icon"}),o.l.createElement(a.a,{"className":"left-text"},"会员价",o.l.createElement(r.a,{"className":"member-price"},"￥",b.memberPrice),b.saveMoney?"省￥"+b.saveMoney:"")),o.l.createElement(a.a,{"className":"member-right d-f a-i-c"},o.l.createElement(a.a,{"className":"right-text"},f.isVip?"":"立即开通"),o.l.createElement(a.a,{"className":"right-icon bnn-icon"},""))),o.l.createElement(a.a,{"className":"sales-record d-f j-c-b"},o.l.createElement(N.b,{"list":j,"showMore":!0}),o.l.createElement(a.a,{"className":"invite-btn d-f a-i-c","hoverClass":"hover-class--btn","onClick":this.showShareImg.bind(this)},"分享给好友")),o.l.createElement(a.a,{"className":"tip-list d-f f-w-w"},b.tips&&b.tips.map((function(e,t){return o.l.createElement(a.a,{"key":t,"className":"tip-item d-f a-i-c"},o.l.createElement(a.a,{"className":"bnn-icon tip-icon"},""),o.l.createElement(a.a,{"className":"tip-text l-h-o"},e))}))))),b.type===m.b.VIRTUAL&&o.l.createElement(a.a,{"className":"goods-card goods-card__body shop-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(N.R,null,"商家信息")),o.l.createElement(v.a,{"info":b.shopSnap,"className":"shop-card__head"}),o.l.createElement(a.a,{"className":"thin-border__b"}),o.l.createElement(w.a,{"info":b.shopSnap,"className":"shop-card__foot"})),C.list&&C.list.length&&o.l.createElement(a.a,{"id":"goods-comment","className":"goods-card goods-card__body comment-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(N.R,null,"用户评论")),o.l.createElement(a.a,{"className":"comment-list"},C.list.map((function(e){return o.l.createElement(N.e,{"key":e.id,"info":e,"className":"comment-item"})})),o.l.createElement(a.a,{"className":"see-more f-g-5","onClick":function onClick(){return Object(h.h)(b.id)}},"查看更多好评（",C.totalCount,"）"))),o.l.createElement(a.a,{"className":"goods-body"},b.description&&o.l.createElement(a.a,{"id":"goods-desc","className":"goods-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(N.R,null,"商品详情")),o.l.createElement(a.a,{"className":"rich-text-wrap goods-card__body"},o.l.createElement(l.a,{"nodes":Object(p.e)(b.description)}))),o.l.createElement(a.a,{"id":"goods-hot","className":"goods-card"},o.l.createElement(a.a,{"className":"goods-card__head"},o.l.createElement(N.R,null,"更多美好生活")),o.l.createElement(N.v,{"list":g}))),o.l.createElement(a.a,{"className":"goods-foot--height"})),o.l.createElement(_.a,{"menus":["home","share","user"],"onShare":this.showShareImg.bind(this)},o.l.createElement(c.a,{"disabled":b.disabled,"className":"goods-foot__btns-btn xf-btn xf-btn-primary","onClick":this.setState.bind(this,{"showSelect":!0})},b.disabledText||"立即购买")),o.l.createElement(N.c,null),o.l.createElement(N.w,{"goods":b,"isOpened":O,"onClose":this.setState.bind(this,{"showSelect":!1}),"onConfirm":this.onConfirm.bind(this)}),o.l.createElement(N.N,{"isOpened":I,"width":500,"height":890,"image":k,"onClose":this.showShareImg.bind(this,!1)}))}},{"key":"componentDidMount","value":function componentDidMount(){I(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&I(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){I(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&I(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){I(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&I(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}(g.a)}}]);